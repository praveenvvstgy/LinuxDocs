<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   getmntent(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="getmntent(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="getmntent.3" name="getmntent.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     getmntent, setmntent, addmntent, endmntent, hasmntopt,
      getmntent_r &mdash; get filesystem descriptor file entry
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
#include &lt;stdio.h&gt;
#include &lt;mntent.h&gt;
</pre>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         FILE
            *
         <strong>
          setmntent
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         filename
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         type
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         struct mntent
            *
         <strong>
          getmntent
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        FILE *
        <var class="pdparam">
         fp
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          addmntent
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        FILE *
        <var class="pdparam">
         fp
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const struct mntent *
        <var class="pdparam">
         mnt
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          endmntent
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        FILE *
        <var class="pdparam">
         fp
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            *
         <strong>
          hasmntopt
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const struct mntent *
        <var class="pdparam">
         mnt
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         opt
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">

/* GNU extension */
#include &lt;mntent.h&gt;
</pre>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         struct mntent
            *
         <strong>
          getmntent_r
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        FILE *
        <var class="pdparam">
         fp
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        struct mntent *
        <var class="pdparam">
         mntbuf
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         buf
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         buflen
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <div class="featuretests">
         <table style="border-collapse: collapse;">
          <colgroup span="1">
           <col span="1">
           </col>
          </colgroup>
          <thead>
           <tr>
            <th colspan="1" rowspan="1" style="">
             Feature Test Macro Requirements
                      for glibc (see
             <a class="link" href="../htmlman7/feature_test_macros.7.html" shape="rect" target="_top">
              <span class="citerefentry">
               <span class="refentrytitle">
                feature_test_macros
               </span>
               (7)
              </span>
             </a>
             ):
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              getmntent_r
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _BSD_SOURCE
             </code>
             ||
             <code class="constant">
              _SVID_SOURCE
             </code>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="refsect1">
    <a id="getmntent-3_sect1" name="getmntent-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     These routines are used to access the filesystem
      description file
     <code class="filename">
      /etc/fstab
     </code>
     and
      the mounted filesystem description file
     <code class="filename">
      /etc/mtab
     </code>
     .
    </p>
    <p>
     The
     <code class="function">
      setmntent
     </code>
     () function
      opens the filesystem description file
     <em class="parameter">
      <code>
       filename
      </code>
     </em>
     and returns a file
      pointer which can be used by
     <code class="function">
      getmntent
     </code>
     (). The argument
     <em class="parameter">
      <code>
       type
      </code>
     </em>
     is the type of access
      required and can take the same values as the
     <em class="parameter">
      <code>
       mode
      </code>
     </em>
     argument of
     <a class="link" href="../htmlman3/fopen.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        fopen
       </span>
       (3)
      </span>
     </a>
     .
    </p>
    <p>
     The
     <code class="function">
      getmntent
     </code>
     () function
      reads the next line from the filesystem description file
     <em class="parameter">
      <code>
       fp
      </code>
     </em>
     and returns a
      pointer to a structure containing the broken out fields from
      a line in the file. The pointer points to a static area of
      memory which is overwritten by subsequent calls to
     <code class="function">
      getmntent
     </code>
     ().
    </p>
    <p>
     The
     <code class="function">
      addmntent
     </code>
     () function
      adds the
     <span class="structname">
      mntent
     </span>
     structure
     <em class="parameter">
      <code>
       mnt
      </code>
     </em>
     to the end of the
      open file
     <em class="parameter">
      <code>
       fp
      </code>
     </em>
     .
    </p>
    <p>
     The
     <code class="function">
      endmntent
     </code>
     () function
      closes the filesystem description file
     <em class="parameter">
      <code>
       fp
      </code>
     </em>
     .
    </p>
    <p>
     The
     <code class="function">
      hasmntopt
     </code>
     () function
      scans the
     <em class="parameter">
      <code>
       mnt_opts
      </code>
     </em>
     field (see below) of the
     <span class="structname">
      mntent
     </span>
     structure
     <em class="parameter">
      <code>
       mnt
      </code>
     </em>
     for a substring that
      matches
     <em class="parameter">
      <code>
       opt
      </code>
     </em>
     . See
     <code class="literal">
      &lt;
     </code>
     <code class="filename">
      mntent.h
     </code>
     <code class="literal">
      &gt;
     </code>
     and
     <a class="link" href="../htmlman8/mount.8.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        mount
       </span>
       (8)
      </span>
     </a>
     for valid mount
      options.
    </p>
    <p>
     The reentrant
     <code class="function">
      getmntent_r
     </code>
     ()
      function is similar to
     <code class="function">
      getmntent
     </code>
     (), but stores the
     <span class="emphasis">
      <em>
       struct mount
      </em>
     </span>
     in the provided
      *
     <em class="parameter">
      <code>
       mntbuf
      </code>
     </em>
     and stores
      the strings pointed to by the entries in that struct in the
      provided array
     <em class="parameter">
      <code>
       buf
      </code>
     </em>
     of
      size
     <em class="parameter">
      <code>
       buflen
      </code>
     </em>
     .
    </p>
    <p>
     The
     <span class="structname">
      mntent
     </span>
     structure is
      defined in
     <code class="literal">
      &lt;
     </code>
     <code class="filename">
      mntent.h
     </code>
     <code class="literal">
      &gt;
     </code>
     as follows:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="structdef">
       <table style="border-collapse: collapse;">
        <colgroup span="1">
         <col class="c1" span="1">
         </col>
         <col class="c2" span="1">
         </col>
         <col class="c3" span="1">
         </col>
         <col class="c4" span="1">
         </col>
         <col class="c5" span="1">
         </col>
        </colgroup>
        <tbody>
         <tr>
          <td align="left" class="structdefhdr" colspan="1" rowspan="1" style="">
           struct
          </td>
          <td align="left" class="structdefhdr" colspan="4" rowspan="1" style="">
           <span class="structname">
            mntent
           </span>
           &nbsp;{
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            char
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           *
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             mnt_fsname
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;name&nbsp;of&nbsp;mounted&nbsp;filesystem&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            char
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           *
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             mnt_dir
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;filesystem&nbsp;path&nbsp;prefix&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            char
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           *
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             mnt_type
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;mount&nbsp;type&nbsp;(see&nbsp;mntent.h)&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            char
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           *
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             mnt_opts
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;mount&nbsp;options&nbsp;(see&nbsp;mntent.h)&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             mnt_freq
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;dump&nbsp;frequency&nbsp;in&nbsp;days&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             mnt_passno
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;pass&nbsp;number&nbsp;on&nbsp;parallel&nbsp;fsck&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td align="left" class="structdefftr" colspan="5" rowspan="1" style="">
           };
          </td>
         </tr>
        </tbody>
       </table>
      </div>
     </blockquote>
    </div>
    <p>
     Since fields in the mtab and fstab files are separated by
      whitespace, octal escapes are used to represent the four
      characters space (\040), tab (\011), newline (\012) and
      backslash (\134) in those files when they occur in one of the
      four strings in a
     <span class="structname">
      mntent
     </span>
     structure. The routines
     <code class="function">
      addmntent
     </code>
     () and
     <code class="function">
      getmntent
     </code>
     () will convert from string
      representation to escaped representation and back.
    </p>
   </div>
   <div class="refsect1">
    <a id="getmntent-3_sect2" name="getmntent-3_sect2" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     The
     <code class="function">
      getmntent
     </code>
     () and
     <code class="function">
      getmntent_r
     </code>
     () functions return
      a pointer to the
     <span class="structname">
      mntent
     </span>
     structure or NULL on failure.
    </p>
    <p>
     The
     <code class="function">
      addmntent
     </code>
     () function
      returns 0 on success and 1 on failure.
    </p>
    <p>
     The
     <code class="function">
      endmntent
     </code>
     () function
      always returns 1.
    </p>
    <p>
     The
     <code class="function">
      hasmntopt
     </code>
     () function
      returns the address of the substring if a match is found and
      NULL otherwise.
    </p>
   </div>
   <div class="refsect1">
    <a id="getmntent-3_sect3" name="getmntent-3_sect3" shape="rect">
    </a>
    <h2>
     FILES
    </h2>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
/etc/fstab          filesystem description file
/etc/mtab           mounted filesystem description file
</pre>
    </div>
   </div>
   <div class="refsect1">
    <a id="getmntent-3_sect4" name="getmntent-3_sect4" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     The nonreentrant functions are from SunOS 4.1.3. A routine
     <code class="function">
      getmntent_r
     </code>
     () was introduced in
      HP-UX 10, but it returns an int. The prototype shown above is
      glibc-only.
    </p>
   </div>
   <div class="refsect1">
    <a id="getmntent-3_sect5" name="getmntent-3_sect5" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <p>
     System V also has a
     <code class="function">
      getmntent
     </code>
     () function but the calling
      sequence differs, and the returned structure is different.
      Under System V
     <code class="filename">
      /etc/mnttab
     </code>
     is
      used. 4.4BSD and Digital UNIX have a routine
     <code class="function">
      getmntinfo
     </code>
     (), a wrapper around the system
      call
     <code class="function">
      getfsstat
     </code>
     ().
    </p>
   </div>
   <div class="refsect1">
    <a id="getmntent-3_sect6" name="getmntent-3_sect6" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman3/fopen.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        fopen
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman5/fstab.5.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        fstab
       </span>
       (5)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman8/mount.8.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        mount
       </span>
       (8)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="getmntent-3_sect7" name="getmntent-3_sect7" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
