<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   getdate(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="getdate(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="getdate.3" name="getdate.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     getdate, getdate_r &mdash; convert a date-plus-time string
      to broken-down time
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;time.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         struct tm
            *
         <strong>
          getdate
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         string
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">

extern int getdate_err;

#include &lt;time.h&gt;
</pre>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          getdate_r
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         string
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        struct tm *
        <var class="pdparam">
         res
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <div class="featuretests">
         <table style="border-collapse: collapse;">
          <colgroup span="1">
           <col span="1">
           </col>
          </colgroup>
          <thead>
           <tr>
            <th colspan="1" rowspan="1" style="">
             Feature Test Macro Requirements
                      for glibc (see
             <a class="link" href="../htmlman7/feature_test_macros.7.html" shape="rect" target="_top">
              <span class="citerefentry">
               <span class="refentrytitle">
                feature_test_macros
               </span>
               (7)
              </span>
             </a>
             ):
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              getdate
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _XOPEN_SOURCE
             </code>
             &gt;= 500 ||
             <code class="constant">
              _XOPEN_SOURCE
             </code>
             &amp;&amp;
             <code class="constant">
              _XOPEN_SOURCE_EXTENDED
             </code>
            </td>
           </tr>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              getdate_r
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _GNU_SOURCE
             </code>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="refsect1">
    <a id="getdate-3_sect1" name="getdate-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     The function
     <code class="function">
      getdate
     </code>
     ()
      converts a string representation of a date and time,
      contained in the buffer pointed to by
     <em class="parameter">
      <code>
       string
      </code>
     </em>
     , into a broken-down
      time. The broken-down time is stored in a
     <span class="structname">
      tm
     </span>
     structure, and a pointer to this
      structure is returned as the function result. This
     <span class="structname">
      tm
     </span>
     structure is allocated in
      static storage, and consequently it will be overwritten by
      further calls to
     <code class="function">
      getdate
     </code>
     ().
    </p>
    <p>
     In contrast to
     <a class="link" href="../htmlman3/strptime.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strptime
       </span>
       (3)
      </span>
     </a>
     , (which has a
     <em class="parameter">
      <code>
       format
      </code>
     </em>
     argument),
     <code class="function">
      getdate
     </code>
     () uses the formats
      found in the file whose full pathname is given in the
      environment variable
     <code class="constant">
      DATEMSK
     </code>
     .
      The first line in the file that matches the given input
      string is used for the conversion.
    </p>
    <p>
     The matching is done case insensitively. Superfluous
      whitespace, either in the pattern or in the string to be
      converted, is ignored.
    </p>
    <p>
     The conversion specifications that a pattern can contain
      are those given for
     <a class="link" href="../htmlman3/strptime.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strptime
       </span>
       (3)
      </span>
     </a>
     . One more
      conversion specification is specified in POSIX.1-2001:
    </p>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        %Z
       </span>
      </dt>
      <dd>
       <p>
        Timezone name. This is not implemented in glibc.
       </p>
      </dd>
     </dl>
    </div>
    <p>
     When
     <em class="replaceable">
      <code>
       %Z
      </code>
     </em>
     is
      given, the structure containing the broken-down time is
      initialized with values corresponding to the current time in
      the given timezone. Otherwise, the structure is initialized
      to the broken-down time corresponding to the current local
      time (as by a call to
     <a class="link" href="../htmlman3/ctime.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        localtime
       </span>
       (3)
      </span>
     </a>
     ).
    </p>
    <p>
     When only the day of the week is given, the day is taken
      to be the first such day on or after today.
    </p>
    <p>
     When only the month is given (and no year), the month is
      taken to be the first such month equal to or after the
      current month. If no day is given, it is the first day of the
      month.
    </p>
    <p>
     When no hour, minute and second are given, the current
      hour, minute and second are taken.
    </p>
    <p>
     If no date is given, but we know the hour, then that hour
      is taken to be the first such hour equal to or after the
      current hour.
    </p>
    <p>
     <code class="function">
      getdate_r
     </code>
     () is a GNU
      extension that provides a reentrant version of
     <code class="function">
      getdate
     </code>
     (). Rather than using a global
      variable to report errors and a static buffer to return the
      broken down time, it returns errors via the function result
      value, and returns the resulting broken-down time in the
      caller-allocated buffer pointed to by the argument
     <em class="parameter">
      <code>
       res
      </code>
     </em>
     .
    </p>
   </div>
   <div class="refsect1">
    <a id="getdate-3_sect2" name="getdate-3_sect2" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     When successful,
     <code class="function">
      getdate
     </code>
     ()
      returns a pointer to a
     <span class="emphasis">
      <em>
       struct
      tm
      </em>
     </span>
     . Otherwise, it returns NULL and sets the
      global variable
     <code class="varname">
      getdate_err
     </code>
     to
      one of the error numbers shown below. Changes to
     <code class="varname">
      errno
     </code>
     are unspecified.
    </p>
    <p>
     On success
     <code class="function">
      getdate_r
     </code>
     ()
      returns 0; on error it returns one of the error numbers shown
      below.
    </p>
   </div>
   <div class="refsect1">
    <a id="getdate-3_sect3" name="getdate-3_sect3" shape="rect">
    </a>
    <h2>
     ERRORS
    </h2>
    <p>
     The following errors are returned via
     <code class="varname">
      getdate_err
     </code>
     (for
     <code class="function">
      getdate
     </code>
     ()) or as the function result (for
     <code class="function">
      getdate_r
     </code>
     ()):
    </p>
    <div class="orderedlist">
     <ol class="orderedlist" type="1">
      <li class="listitem">
       <p>
        The
        <code class="constant">
         DATEMSK
        </code>
        environment variable is not defined, or its value is an
            empty string.
       </p>
      </li>
      <li class="listitem">
       <p>
        The template file specified by
        <code class="constant">
         DATEMSK
        </code>
        cannot be opened for
            reading.
       </p>
      </li>
      <li class="listitem">
       <p>
        Failed to get file status information.
       </p>
      </li>
      <li class="listitem">
       <p>
        The template file is not a regular file.
       </p>
      </li>
      <li class="listitem">
       <p>
        An error was encountered while reading the template
            file.
       </p>
      </li>
      <li class="listitem">
       <p>
        Memory allocation failed (not enough memory
            available).
       </p>
      </li>
      <li class="listitem">
       <p>
        There is no line in the file that matches the
            input.
       </p>
      </li>
      <li class="listitem">
       <p>
        Invalid input specification.
       </p>
      </li>
     </ol>
    </div>
   </div>
   <div class="refsect1">
    <a id="getdate-3_sect4" name="getdate-3_sect4" shape="rect">
    </a>
    <h2>
     ENVIRONMENT
    </h2>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <code class="constant">
         DATEMSK
        </code>
       </span>
      </dt>
      <dd>
       <p>
        File containing format patterns.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         TZ
        </code>
        ,
        <code class="constant">
         LC_TIME
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Variables used by
        <a class="link" href="../htmlman3/strptime.3.html" shape="rect" target="_top">
         <span class="citerefentry">
          <span class="refentrytitle">
           strptime
          </span>
          (3)
         </span>
        </a>
        .
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="getdate-3_sect5" name="getdate-3_sect5" shape="rect">
    </a>
    <h2>
     ATTRIBUTES
    </h2>
    <div class="refsect2">
     <a id="getdate-3_sect6" name="getdate-3_sect6" shape="rect">
     </a>
     <h3>
      Multithreading (see pthreads(7))
     </h3>
     <p>
      The
      <code class="function">
       getdate
      </code>
      () function is
        not thread-safe.
     </p>
     <p>
      The
      <code class="function">
       getdate_r
      </code>
      () function
        is thread-safe.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="getdate-3_sect7" name="getdate-3_sect7" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     POSIX.1-2001.
    </p>
   </div>
   <div class="refsect1">
    <a id="getdate-3_sect8" name="getdate-3_sect8" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <p>
     The POSIX.1-2001 specification for
     <a class="link" href="../htmlman3/strptime.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strptime
       </span>
       (3)
      </span>
     </a>
     contains
      conversion specifications using the
     <em class="replaceable">
      <code>
       %E
      </code>
     </em>
     or
     <em class="replaceable">
      <code>
       %O
      </code>
     </em>
     modifier, while such
      specifications are not given for
     <code class="function">
      getdate
     </code>
     (). In glibc,
     <code class="function">
      getdate
     </code>
     () is implemented using
     <a class="link" href="../htmlman3/strptime.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strptime
       </span>
       (3)
      </span>
     </a>
     , so that
      precisely the same conversions are supported by both.
    </p>
   </div>
   <div class="refsect1">
    <a id="getdate-3_sect9" name="getdate-3_sect9" shape="rect">
    </a>
    <h2>
     EXAMPLE
    </h2>
    <p>
     The program below calls
     <code class="function">
      getdate
     </code>
     () for each of its command-line
      arguments, and for each call displays the values in the
      fields of the returned
     <span class="structname">
      tm
     </span>
     structure. The following shell session demonstrates the
      operation of the program:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
$<span class="emphasis"><em> TFILE=$PWD/tfile</em></span>
$<span class="emphasis"><em> echo '%A' &gt; $TFILE</em></span>      # Full name of the day of the week
$<span class="emphasis"><em> echo '%T' &gt;&gt; $TFILE</em></span>      # ISO date (YYYY-MM-DD)
$<span class="emphasis"><em> echo '%F' &gt;&gt; $TFILE</em></span>      # Time (HH:MM:SS)
$<span class="emphasis"><em> date</em></span>
$<span class="emphasis"><em> export DATEMSK=$TFILE</em></span>
$<span class="emphasis"><em> ./a.out Tuesday '2009-12-28' '12:22:33'</em></span>
Sun Sep  7 06:03:36 CEST 2008
Call 1 ("Tuesday") succeeded:
    tm_sec   = 36
    tm_min   = 3
    tm_hour  = 6
    tm_mday  = 9
    tm_mon   = 8
    tm_year  = 108
    tm_wday  = 2
    tm_yday  = 252
    tm_isdst = 1
Call 2 ("2009-12-28") succeeded:
    tm_sec   = 36
    tm_min   = 3
    tm_hour  = 6
    tm_mday  = 28
    tm_mon   = 11
    tm_year  = 109
    tm_wday  = 1
    tm_yday  = 361
    tm_isdst = 0
Call 3 ("12:22:33") succeeded:
    tm_sec   = 33
    tm_min   = 22
    tm_hour  = 12
    tm_mday  = 7
    tm_mon   = 8
    tm_year  = 108
    tm_wday  = 0
    tm_yday  = 250
    tm_isdst = 1
</pre>
      </div>
     </blockquote>
    </div>
    <div class="refsect2">
     <a id="getdate-3_sect10" name="getdate-3_sect10" shape="rect">
     </a>
     <h3>
      Program source
     </h3>
     <div class="informalexample">
      <pre class="programlisting" xml:space="preserve">
#define _GNU_SOURCE
#include &lt;time.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int
main(int argc, char *argv[])
{
    struct tm *tmp;
    int j;

    for (j = 1; j &lt; argc; j++) {
        tmp = getdate(argv[j]);

        if (tmp == NULL) {
            printf("Call %d failed; getdate_err = %d\n",
                   j, getdate_err);
            continue;
        }

        printf("Call %d (\"%s\") succeeded:\n", j, argv[j]);
        printf("    tm_sec   = %d\n", tmp&minus;&gt;tm_sec);
        printf("    tm_min   = %d\n", tmp&minus;&gt;tm_min);
        printf("    tm_hour  = %d\n", tmp&minus;&gt;tm_hour);
        printf("    tm_mday  = %d\n", tmp&minus;&gt;tm_mday);
        printf("    tm_mon   = %d\n", tmp&minus;&gt;tm_mon);
        printf("    tm_year  = %d\n", tmp&minus;&gt;tm_year);
        printf("    tm_wday  = %d\n", tmp&minus;&gt;tm_wday);
        printf("    tm_yday  = %d\n", tmp&minus;&gt;tm_yday);
        printf("    tm_isdst = %d\n", tmp&minus;&gt;tm_isdst);
    }

    exit(EXIT_SUCCESS);
}
</pre>
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="getdate-3_sect11" name="getdate-3_sect11" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman2/time.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        time
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/ctime.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        localtime
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/setlocale.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        setlocale
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/strftime.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strftime
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/strptime.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strptime
       </span>
       (3)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="getdate-3_sect12" name="getdate-3_sect12" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
