<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   ldap_get_dn(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="ldap_get_dn(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="ldap-get-dn.3" name="ldap-get-dn.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     ldap_get_dn, ldap_explode_dn, ldap_explode_rdn,
      ldap_dn2ufn &mdash; LDAP DN handling routines
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;ldap.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            *
         <strong>
          ldap_get_dn
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        LDAP *
        <var class="pdparam">
         ld
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        LDAPMessage *
        <var class="pdparam">
         entry
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          ldap_str2dn
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         str
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        LDAPDN *
        <var class="pdparam">
         dn
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        unsigned
        <var class="pdparam">
         flags
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         void
         <strong>
          ldap_dnfree
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        LDAPDN
        <var class="pdparam">
         dn
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          ldap_dn2str
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        LDAPDN
        <var class="pdparam">
         dn
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char **
        <var class="pdparam">
         str
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        unsigned
        <var class="pdparam">
         flags
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            **
         <strong>
          ldap_explode_dn
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         dn
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         notypes
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            **
         <strong>
          ldap_explode_rdn
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         rdn
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         notypes
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            *
         <strong>
          ldap_dn2ufn
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         dn
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            *
         <strong>
          ldap_dn2dcedn
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         dn
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            *
         <strong>
          ldap_dcedn2dn
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         dn
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            *
         <strong>
          ldap_dn2ad_canonical
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         dn
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="ldap-get-dn-3_sect1" name="ldap-get-dn-3_sect1" shape="rect">
    </a>
    <h2>
     LIBRARY
    </h2>
    <p>
     OpenLDAP LDAP (libldap, &minus;lldap)
    </p>
   </div>
   <div class="refsect1">
    <a id="ldap-get-dn-3_sect2" name="ldap-get-dn-3_sect2" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     These routines allow LDAP entry names (Distinguished
      Names, or DNs) to be obtained, parsed, converted to a
      user-friendly form, and tested. A DN has the form described
      in RFC 4414 "Lightweight Directory Access Protocol (LDAP):
      String Representation of Distinguished Names".
    </p>
    <p>
     The
     <code class="function">
      ldap_get_dn
     </code>
     () routine
      takes an
     <em class="parameter">
      <code>
       entry
      </code>
     </em>
     as
      returned by
     <a class="link" href="../htmlman3/ldap_first_entry.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_first_entry
       </span>
       (3)
      </span>
     </a>
     or
     <a class="link" href="../htmlman3/ldap_first_entry.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_next_entry
       </span>
       (3)
      </span>
     </a>
     and
      returns a copy of the entry's DN. Space for the DN will be
      obtained dynamically and should be freed by the caller using
     <a class="link" href="../htmlman3/ldap_memory.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_memfree
       </span>
       (3)
      </span>
     </a>
     .
    </p>
    <p>
     <code class="function">
      ldap_str2dn
     </code>
     () parses a
      string representation of a distinguished name contained in
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     into its
      components, which are stored in
     <em class="parameter">
      <code>
       dn
      </code>
     </em>
     as
     <code class="function">
      ldap_ava
     </code>
     structures, arranged in
     <em class="replaceable">
      <code>
       LDAPAVA,
      </code>
     </em>
     <em class="replaceable">
      <code>
       LDAPRDN,
      </code>
     </em>
     and
     <code class="constant">
      LDAPDN
     </code>
     terms. Space for
     <em class="parameter">
      <code>
       dn
      </code>
     </em>
     will be obtained dynamically
      and should be freed by the caller using
     <span class="citerefentry">
      <span class="refentrytitle">
       ldap_dnfree
      </span>
      (3)
     </span>
     . The
     <code class="constant">
      LDAPDN
     </code>
     is defined as:
    </p>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
typedef struct ldap_ava {
    char *la_attr;
    struct berval *la_value;
    unsigned la_flags;
} LDAPAVA;

typedef LDAPAVA** LDAPRDN;
typedef LDAPRDN* LDAPDN;
</pre>
    </div>
    <p>
     The attribute types and the attribute values are not
      normalized. The
     <code class="function">
      la_flags
     </code>
     can be
      either
     <code class="constant">
      LDAP_AVA_STRING
     </code>
     or
     <em class="replaceable">
      <code>
       LDAP_AVA_BINARY,
      </code>
     </em>
     the latter meaning that the value is BER/DER encoded and thus
      must be represented as, quoting from RFC 4514, " ... an
      octothorpe character ('#' ASCII 35) followed by the
      hexadecimal representation of each of the bytes of the BER
      encoding of the X.500 AttributeValue." The
     <em class="parameter">
      <code>
       flags
      </code>
     </em>
     parameter to
     <code class="function">
      ldap_str2dn
     </code>
     () can be
    </p>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
        LDAP_DN_FORMAT_LDAPV3
        LDAP_DN_FORMAT_LDAPV2
        LDAP_DN_FORMAT_DCE
</pre>
    </div>
    <p>
     which defines what DN syntax is expected (according to RFC
      4514, RFC 1779 and DCE, respectively). The format can be
     <code class="constant">
      OR
     </code>
     ed to the flags
    </p>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
        LDAP_DN_P_NO_SPACES
        LDAP_DN_P_NO_SPACE_AFTER_RDN
        ...
        LDAP_DN_PEDANTIC
</pre>
    </div>
    <p>
     The latter is a shortcut for all the previous
      limitations.
    </p>
    <p>
     <code class="constant">
      LDAP_DN_P_NO_SPACES
     </code>
     does not
      allow extra spaces in the dn; the default is to silently
      eliminate spaces around AVA separators ('='), RDN component
      separators ('+' for LDAPv3/LDAPv2 or ',' for DCE) and RDN
      separators (',' LDAPv3/LDAPv2 or '/' for DCE).
    </p>
    <p>
     <code class="constant">
      LDAP_DN_P_NO_SPACE_AFTER_RDN
     </code>
     does not allow a single space after RDN separators.
    </p>
    <p>
     <code class="function">
      ldap_dn2str
     </code>
     () performs the
      inverse operation, yielding in
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     a string representation of
     <em class="replaceable">
      <code>
       dn.
      </code>
     </em>
     It allows the
      same values for
     <em class="parameter">
      <code>
       flags
      </code>
     </em>
     as
     <code class="function">
      ldap_str2dn
     </code>
     (), plus
    </p>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
        LDAP_DN_FORMAT_UFN
        LDAP_DN_FORMAT_AD_CANONICAL
</pre>
    </div>
    <p>
     for user-friendly naming (RFC 1781) and AD canonical.
    </p>
    <p>
     The following routines are viewed as deprecated in favor
      of
     <code class="function">
      ldap_str2dn
     </code>
     () and
     <code class="function">
      ldap_dn2str
     </code>
     (). They are
      provided to support legacy applications.
    </p>
    <p>
     The
     <code class="function">
      ldap_explode_dn
     </code>
     ()
      routine takes a DN as returned by
     <code class="function">
      ldap_get_dn
     </code>
     () and breaks it up into its
      component parts. Each part is known as a Relative
      Distinguished Name, or RDN.
     <code class="function">
      ldap_explode_dn
     </code>
     () returns a NULL-terminated
      array, each component of which contains an RDN from the DN.
      The
     <em class="parameter">
      <code>
       notypes
      </code>
     </em>
     parameter
      is used to request that only the RDN values be returned, not
      their types. For example, the DN "cn=Bob, c=US" would return
      as either { "cn=Bob", "c=US", NULL } or { "Bob", "US", NULL
      }, depending on whether notypes was 0 or 1, respectively.
      Assertion values in RDN strings may included escaped
      characters. The result can be freed by calling
     <span class="citerefentry">
      <span class="refentrytitle">
       ldap_value_free
      </span>
      (3)
     </span>
     .
    </p>
    <p>
     Similarly, the
     <code class="function">
      ldap_explode_rdn
     </code>
     () routine takes an RDN as
      returned by
     <em class="replaceable">
      <code>
       ldap_explode_dn(dn,0)
      </code>
     </em>
     and
      breaks it up into its "type=value" component parts (or just
      "value", if the
     <em class="parameter">
      <code>
       notypes
      </code>
     </em>
     parameter is set). Note
      the value is not unescaped. The result can be freed by
      calling
     <span class="citerefentry">
      <span class="refentrytitle">
       ldap_value_free
      </span>
      (3)
     </span>
     .
    </p>
    <p>
     <code class="function">
      ldap_dn2ufn
     </code>
     () is used to
      turn a DN as returned by
     <a class="link" href="../htmlman3/ldap_get_dn.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_get_dn
       </span>
       (3)
      </span>
     </a>
     into a more
      user-friendly form, stripping off all type names. See "Using
      the Directory to Achieve User Friendly Naming" (RFC 1781) for
      more details on the UFN format. Due to the ambiguous nature
      of the format, it is generally only used for display
      purposes. The space for the UFN returned is obtained
      dynamically and the user is responsible for freeing it via a
      call to
     <a class="link" href="../htmlman3/ldap_memory.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_memfree
       </span>
       (3)
      </span>
     </a>
     .
    </p>
    <p>
     <code class="function">
      ldap_dn2dcedn
     </code>
     () is used to
      turn a DN as returned by
     <a class="link" href="../htmlman3/ldap_get_dn.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_get_dn
       </span>
       (3)
      </span>
     </a>
     into a
      DCE-style DN, e.g. a string with most-significant to least
      significant rdns separated by slashes ('/'); rdn components
      are separated by commas (','). Only printable chars (e.g.
      LDAPv2 printable string) are allowed, at least in this
      implementation.
     <code class="function">
      ldap_dcedn2dn
     </code>
     ()
      performs the opposite operation.
     <code class="function">
      ldap_dn2ad_canonical
     </code>
     () turns a DN into a AD
      canonical name, which is basically a DCE dn with attribute
      types omitted. The trailing domain, if present, is turned in
      a DNS-like domain. The space for the returned value is
      obtained dynamically and the user is responsible for freeing
      it via a call to
     <a class="link" href="../htmlman3/ldap_memory.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_memfree
       </span>
       (3)
      </span>
     </a>
     .
    </p>
   </div>
   <div class="refsect1">
    <a id="ldap-get-dn-3_sect3" name="ldap-get-dn-3_sect3" shape="rect">
    </a>
    <h2>
     ERRORS
    </h2>
    <p>
     If an error occurs in
     <code class="function">
      ldap_get_dn
     </code>
     <code class="literal">
      (
     </code>
     <code class="literal">
      )
     </code>
     , NULL is
      returned and the
     <code class="function">
      ld_errno
     </code>
     field
      in the
     <em class="parameter">
      <code>
       ld
      </code>
     </em>
     parameter
      is set to indicate the error. See
     <a class="link" href="../htmlman3/ldap_error.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_error
       </span>
       (3)
      </span>
     </a>
     for a
      description of possible error codes.
     <code class="function">
      ldap_explode_dn
     </code>
     <code class="literal">
      (
     </code>
     <code class="literal">
      )
     </code>
     ,
     <code class="function">
      ldap_explode_rdn
     </code>
     <code class="literal">
      (
     </code>
     <code class="literal">
      )
     </code>
     ,
     <code class="function">
      ldap_dn2ufn
     </code>
     (),
     <code class="function">
      ldap_dn2dcedn
     </code>
     (),
     <code class="function">
      ldap_dcedn2dn
     </code>
     (), and
     <code class="function">
      ldap_dn2ad_canonical
     </code>
     () will return NULL
      with
     <a class="link" href="../htmlman3/errno.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        errno
       </span>
       (3)
      </span>
     </a>
     set appropriately
      in case of trouble.
    </p>
   </div>
   <div class="refsect1">
    <a id="ldap-get-dn-3_sect4" name="ldap-get-dn-3_sect4" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <p>
     These routines dynamically allocate memory that the caller
      must free.
    </p>
   </div>
   <div class="refsect1">
    <a id="ldap-get-dn-3_sect5" name="ldap-get-dn-3_sect5" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman3/ldap.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/ldap_error.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_error
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/ldap_first_entry.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_first_entry
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/ldap_memory.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_memfree
       </span>
       (3)
      </span>
     </a>
     ,
     <span class="citerefentry">
      <span class="refentrytitle">
       ldap_value_free
      </span>
      (3)
     </span>
    </p>
   </div>
   <div class="refsect1">
    <a id="ldap-get-dn-3_sect6" name="ldap-get-dn-3_sect6" shape="rect">
    </a>
    <h2>
     ACKNOWLEDGEMENTS
    </h2>
    <p>
     <span class="emphasis">
      <em>
       OpenLDAP Software
      </em>
     </span>
     is developed and maintained by The OpenLDAP Project
      &lt;
     <a class="literalurl" href="http://www.openldap.org/" shape="rect" target="_top">
      http://www.openldap.org/
     </a>
     &gt;.
     <span class="emphasis">
      <em>
       OpenLDAP Software
      </em>
     </span>
     is derived from
      University of Michigan LDAP 3.3 Release.
    </p>
   </div>
  </div>
 </body>
</html>
