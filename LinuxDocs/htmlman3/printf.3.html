<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   printf(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="printf(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="printf.3" name="printf.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     printf, fprintf, sprintf, snprintf, vprintf, vfprintf,
      vsprintf, vsnprintf &mdash; formatted output conversion
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;stdio.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          printf
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         format
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        <var class="pdparam">
         ...
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          fprintf
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        FILE *
        <var class="pdparam">
         stream
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         format
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        <var class="pdparam">
         ...
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          sprintf
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         str
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         format
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        <var class="pdparam">
         ...
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          snprintf
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         str
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        size_t
        <var class="pdparam">
         size
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         format
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        <var class="pdparam">
         ...
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;stdarg.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          vprintf
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         format
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        va_list
        <var class="pdparam">
         ap
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          vfprintf
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        FILE *
        <var class="pdparam">
         stream
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         format
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        va_list
        <var class="pdparam">
         ap
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          vsprintf
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         str
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         format
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        va_list
        <var class="pdparam">
         ap
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          vsnprintf
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         str
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        size_t
        <var class="pdparam">
         size
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         format
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        va_list
        <var class="pdparam">
         ap
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <div class="featuretests">
         <table style="border-collapse: collapse;">
          <colgroup span="1">
           <col span="1">
           </col>
          </colgroup>
          <thead>
           <tr>
            <th colspan="1" rowspan="1" style="">
             Feature Test Macro Requirements
                      for glibc (see
             <a class="link" href="../htmlman7/feature_test_macros.7.html" shape="rect" target="_top">
              <span class="citerefentry">
               <span class="refentrytitle">
                feature_test_macros
               </span>
               (7)
              </span>
             </a>
             ):
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              snprintf
             </code>
             (),
             <code class="function">
              vsnprintf
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _BSD_SOURCE
             </code>
             ||
             <code class="constant">
              _XOPEN_SOURCE
             </code>
             &gt;= 500 ||
             <code class="constant">
              _ISOC99_SOURCE
             </code>
             ||
             <code class="constant">
              _POSIX_C_SOURCE
             </code>
             &gt;= 200112L;
            </td>
           </tr>
           <tr>
            <td colspan="1" rowspan="1" style="">
             or
             <span class="command">
              <strong>
               cc
              </strong>
             </span>
             <code class="option">
              -std=c99
             </code>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="refsect1">
    <a id="printf-3_sect1" name="printf-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     The functions in the
     <code class="function">
      printf
     </code>
     () family produce output according to
      a
     <em class="parameter">
      <code>
       format
      </code>
     </em>
     as described
      below. The functions
     <code class="function">
      printf
     </code>
     ()
      and
     <code class="function">
      vprintf
     </code>
     () write output to
     <code class="varname">
      stdout
     </code>
     , the standard output
      stream;
     <code class="function">
      fprintf
     </code>
     () and
     <code class="function">
      vfprintf
     </code>
     () write output to the
      given output
     <em class="parameter">
      <code>
       stream
      </code>
     </em>
     ;
     <code class="function">
      sprintf
     </code>
     (),
     <code class="function">
      snprintf
     </code>
     (),
     <code class="function">
      vsprintf
     </code>
     () and
     <code class="function">
      vsnprintf
     </code>
     () write to the character string
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     .
    </p>
    <p>
     The functions
     <code class="function">
      snprintf
     </code>
     () and
     <code class="function">
      vsnprintf
     </code>
     () write at most
     <em class="parameter">
      <code>
       size
      </code>
     </em>
     bytes (including
      the terminating null byte ('\0')) to
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     .
    </p>
    <p>
     The functions
     <code class="function">
      vprintf
     </code>
     (),
     <code class="function">
      vfprintf
     </code>
     (),
     <code class="function">
      vsprintf
     </code>
     (),
     <code class="function">
      vsnprintf
     </code>
     () are equivalent to the functions
     <code class="function">
      printf
     </code>
     (),
     <code class="function">
      fprintf
     </code>
     (),
     <code class="function">
      sprintf
     </code>
     (),
     <code class="function">
      snprintf
     </code>
     (), respectively, except that they
      are called with a
     <code class="function">
      va_list
     </code>
     instead of a variable number of arguments. These functions do
      not call the
     <code class="function">
      va_end
     </code>
     macro.
      Because they invoke the
     <code class="function">
      va_arg
     </code>
     macro, the value of
     <em class="parameter">
      <code>
       ap
      </code>
     </em>
     is undefined after the call.
      See
     <a class="link" href="../htmlman3/stdarg.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        stdarg
       </span>
       (3)
      </span>
     </a>
     .
    </p>
    <p>
     These eight functions write the output under the control
      of a
     <em class="parameter">
      <code>
       format
      </code>
     </em>
     string
      that specifies how subsequent arguments (or arguments
      accessed via the variable-length argument facilities of
     <a class="link" href="../htmlman3/stdarg.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        stdarg
       </span>
       (3)
      </span>
     </a>
     ) are converted
      for output.
    </p>
    <p>
     C99 and POSIX.1-2001 specify that the results are
      undefined if a call to
     <code class="function">
      sprintf
     </code>
     (),
     <code class="function">
      snprintf
     </code>
     (),
     <code class="function">
      vsprintf
     </code>
     (), or
     <code class="function">
      vsnprintf
     </code>
     () would cause copying to take
      place between objects that overlap (e.g., if the target
      string array and one of the supplied input arguments refer to
      the same buffer). See NOTES.
    </p>
    <div class="refsect2">
     <a id="printf-3_sect2" name="printf-3_sect2" shape="rect">
     </a>
     <h3>
      Return value
     </h3>
     <p>
      Upon successful return, these functions return the
        number of characters printed (excluding the null byte used
        to end output to strings).
     </p>
     <p>
      The functions
      <code class="function">
       snprintf
      </code>
      ()
        and
      <code class="function">
       vsnprintf
      </code>
      () do not write
        more than
      <em class="parameter">
       <code>
        size
       </code>
      </em>
      bytes (including the terminating null byte ('\0')). If the
        output was truncated due to this limit, then the return
        value is the number of characters (excluding the
        terminating null byte) which would have been written to the
        final string if enough space had been available. Thus, a
        return value of
      <em class="parameter">
       <code>
        size
       </code>
      </em>
      or more means that the
        output was truncated. (See also below under NOTES.)
     </p>
     <p>
      If an output error is encountered, a negative value is
        returned.
     </p>
    </div>
    <div class="refsect2">
     <a id="printf-3_sect3" name="printf-3_sect3" shape="rect">
     </a>
     <h3>
      Format of the format string
     </h3>
     <p>
      The format string is a character string, beginning and
        ending in its initial shift state, if any. The format
        string is composed of zero or more directives: ordinary
        characters (not
      <code class="literal">
       %
      </code>
      ), which are
        copied unchanged to the output stream; and conversion
        specifications, each of which results in fetching zero or
        more subsequent arguments. Each conversion specification is
        introduced by the character
      <code class="literal">
       %
      </code>
      ,
        and ends with a
      <span class="emphasis">
       <em>
        conversion
        specifier
       </em>
      </span>
      . In between there may be (in this
        order) zero or more
      <em class="replaceable">
       <code>
        flags
       </code>
      </em>
      , an optional minimum
      <span class="emphasis">
       <em>
        field width
       </em>
      </span>
      , an
        optional
      <em class="replaceable">
       <code>
        precision
       </code>
      </em>
      and an optional
      <span class="emphasis">
       <em>
        length modifier
       </em>
      </span>
      .
     </p>
     <p>
      The arguments must correspond properly (after type
        promotion) with the conversion specifier. By default, the
        arguments are used in the order given, where each '*' and
        each conversion specifier asks for the next argument (and
        it is an error if insufficiently many arguments are given).
        One can also specify explicitly which argument is taken, at
        each place where an argument is required, by writing "%m$"
        instead of '%' and "*m$" instead of '*', where the decimal
        integer m denotes the position in the argument list of the
        desired argument, indexed starting from 1. Thus,
     </p>
     <div class="blockquote">
      <blockquote class="blockquote">
       <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
printf("%*d", width, num);
</pre>
       </div>
      </blockquote>
     </div>
     <p>
      and
     </p>
     <div class="blockquote">
      <blockquote class="blockquote">
       <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
printf("%2$*1$d", width, num);
</pre>
       </div>
      </blockquote>
     </div>
     <p>
      are equivalent. The second style allows repeated
        references to the same argument. The C99 standard does not
        include the style using '$', which comes from the Single
        UNIX Specification. If the style using '$' is used, it must
        be used throughout for all conversions taking an argument
        and all width and precision arguments, but it may be mixed
        with "%%" formats which do not consume an argument. There
        may be no gaps in the numbers of arguments specified using
        '$'; for example, if arguments 1 and 3 are specified,
        argument 2 must also be specified somewhere in the format
        string.
     </p>
     <p>
      For some numeric conversions a radix character ("decimal
        point") or thousands' grouping character is used. The
        actual character used depends on the
      <code class="constant">
       LC_NUMERIC
      </code>
      part of the locale. The POSIX
        locale uses '.' as radix character, and does not have a
        grouping character. Thus,
     </p>
     <div class="blockquote">
      <blockquote class="blockquote">
       <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
    printf("%'.2f", 1234567.89);
</pre>
       </div>
      </blockquote>
     </div>
     <p>
      results in "1234567.89" in the POSIX locale, in
        "1234567,89" in the nl_NL locale, and in "1.234.567,89" in
        the da_DK locale.
     </p>
    </div>
    <div class="refsect2">
     <a id="printf-3_sect4" name="printf-3_sect4" shape="rect">
     </a>
     <h3>
      The flag characters
     </h3>
     <p>
      The character % is followed by zero or more of the
        following flags:
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <code class="literal">
          #
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The value should be converted to an "alternate
              form". For
         <code class="literal">
          o
         </code>
         conversions, the first character of the output string
              is made zero (by prefixing a 0 if it was not zero
              already). For
         <code class="literal">
          x
         </code>
         and
         <code class="constant">
          X
         </code>
         conversions, a
              nonzero result has the string "0x" (or "0X" for
         <code class="constant">
          X
         </code>
         conversions)
              prepended to it. For
         <code class="literal">
          a
         </code>
         ,
         <code class="constant">
          A
         </code>
         ,
         <code class="literal">
          e
         </code>
         ,
         <code class="constant">
          E
         </code>
         ,
         <code class="literal">
          f
         </code>
         ,
         <code class="constant">
          F
         </code>
         ,
         <code class="literal">
          g
         </code>
         ,
              and
         <code class="constant">
          G
         </code>
         conversions, the
              result will always contain a decimal point, even if
              no digits follow it (normally, a decimal point
              appears in the results of those conversions only if a
              digit follows). For
         <code class="literal">
          g
         </code>
         and
         <code class="constant">
          G
         </code>
         conversions,
              trailing zeros are not removed from the result as
              they would otherwise be. For other conversions, the
              result is undefined.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          0
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The value should be zero padded. For
         <code class="literal">
          d
         </code>
         ,
         <code class="literal">
          i
         </code>
         ,
         <code class="literal">
          o
         </code>
         ,
         <code class="literal">
          u
         </code>
         ,
         <code class="literal">
          x
         </code>
         ,
         <code class="constant">
          X
         </code>
         ,
         <code class="literal">
          a
         </code>
         ,
         <code class="constant">
          A
         </code>
         ,
         <code class="literal">
          e
         </code>
         ,
         <code class="constant">
          E
         </code>
         ,
         <code class="literal">
          f
         </code>
         ,
         <code class="constant">
          F
         </code>
         ,
         <code class="literal">
          g
         </code>
         , and
         <code class="constant">
          G
         </code>
         conversions, the converted value
              is padded on the left with zeros rather than blanks.
              If the
         <code class="constant">
          0
         </code>
         and
         <span class="emphasis">
          <em>
           &minus;
          </em>
         </span>
         flags
              both appear, the
         <code class="constant">
          0
         </code>
         flag
              is ignored. If a precision is given with a numeric
              conversion (
         <code class="literal">
          d
         </code>
         ,
         <code class="literal">
          i
         </code>
         ,
         <code class="literal">
          o
         </code>
         ,
         <code class="literal">
          u
         </code>
         ,
         <code class="literal">
          x
         </code>
         , and
         <code class="constant">
          X
         </code>
         ), the
         <code class="constant">
          0
         </code>
         flag is ignored. For other
              conversions, the behavior is undefined.
        </p>
       </dd>
       <dt>
        <span class="term">
         <span class="emphasis">
          <em>
           &minus;
          </em>
         </span>
        </span>
       </dt>
       <dd>
        <p>
         The converted value is to be left adjusted on the
              field boundary. (The default is right justification.)
              The converted value is padded on the right with
              blanks, rather than on the left with blanks or zeros.
              A
         <span class="emphasis">
          <em>
           &minus;
          </em>
         </span>
         overrides a
         <code class="constant">
          0
         </code>
         if both
              are given.
        </p>
       </dd>
       <dt>
        <span class="term">
         <span class="emphasis">
          <em>
           ''
          </em>
         </span>
        </span>
       </dt>
       <dd>
        <p>
         (a space) A blank should be left before a positive
              number (or empty string) produced by a signed
              conversion.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          +
         </code>
        </span>
       </dt>
       <dd>
        <p>
         A sign (+ or &minus;) should always be placed
              before a number produced by a signed conversion. By
              default a sign is used only for negative numbers. A
         <code class="literal">
          +
         </code>
         overrides a space if
              both are used.
        </p>
       </dd>
      </dl>
     </div>
     <p>
      The five flag characters above are defined in the C99
        standard. The Single UNIX Specification specifies one
        further flag character.
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <code class="literal">
          '
         </code>
        </span>
       </dt>
       <dd>
        <p>
         For decimal conversion (
         <code class="literal">
          i
         </code>
         ,
         <code class="literal">
          d
         </code>
         ,
         <code class="literal">
          u
         </code>
         ,
         <code class="literal">
          f
         </code>
         ,
         <code class="constant">
          F
         </code>
         ,
         <code class="literal">
          g
         </code>
         ,
         <code class="constant">
          G
         </code>
         ) the output is to be grouped with
              thousands' grouping characters if the locale
              information indicates any. Note that many versions of
         <span class="citerefentry">
          <span class="refentrytitle">
           gcc
          </span>
          (1)
         </span>
         cannot parse
              this option and will issue a warning. (SUSv2 did not
              include
         <em class="replaceable">
          <code>
           %'F
          </code>
         </em>
         , but SUSv3 added
              it.)
        </p>
       </dd>
      </dl>
     </div>
     <p>
      glibc 2.2 adds one further flag character.
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <code class="constant">
          I
         </code>
        </span>
       </dt>
       <dd>
        <p>
         For decimal integer conversion (
         <code class="literal">
          i
         </code>
         ,
         <code class="literal">
          d
         </code>
         ,
         <code class="literal">
          u
         </code>
         ) the output uses the
              locale's alternative output digits, if any. For
              example, since glibc 2.2.3 this will give
              Arabic-Indic digits in the Persian ("fa_IR")
              locale.
        </p>
       </dd>
      </dl>
     </div>
    </div>
    <div class="refsect2">
     <a id="printf-3_sect5" name="printf-3_sect5" shape="rect">
     </a>
     <h3>
      The field width
     </h3>
     <p>
      An optional decimal digit string (with nonzero first
        digit) specifying a minimum field width. If the converted
        value has fewer characters than the field width, it will be
        padded with spaces on the left (or right, if the
        left-adjustment flag has been given). Instead of a decimal
        digit string one may write "*" or "*m$" (for some decimal
        integer
      <code class="literal">
       m
      </code>
      ) to specify that the
        field width is given in the next argument, or in the
      <code class="literal">
       m
      </code>
      -th argument, respectively,
        which must be of type
      <span class="type">
       int
      </span>
      . A
        negative field width is taken as a '&minus;' flag followed
        by a positive field width. In no case does a nonexistent or
        small field width cause truncation of a field; if the
        result of a conversion is wider than the field width, the
        field is expanded to contain the conversion result.
     </p>
    </div>
    <div class="refsect2">
     <a id="printf-3_sect6" name="printf-3_sect6" shape="rect">
     </a>
     <h3>
      The precision
     </h3>
     <p>
      An optional precision, in the form of a period ('.')
        followed by an optional decimal digit string. Instead of a
        decimal digit string one may write "*" or "*m$" (for some
        decimal integer m) to specify that the precision is given
        in the next argument, or in the m-th argument,
        respectively, which must be of type
      <span class="type">
       int
      </span>
      . If the precision is given as just '.',
        the precision is taken to be zero. A negative precision is
        taken as if the precision were omitted. This gives the
        minimum number of digits to appear for
      <code class="literal">
       d
      </code>
      ,
      <code class="literal">
       i
      </code>
      ,
      <code class="literal">
       o
      </code>
      ,
      <code class="literal">
       u
      </code>
      ,
      <code class="literal">
       x
      </code>
      , and
      <code class="constant">
       X
      </code>
      conversions, the number of
        digits to appear after the radix character for
      <code class="literal">
       a
      </code>
      ,
      <code class="constant">
       A
      </code>
      ,
      <code class="literal">
       e
      </code>
      ,
      <code class="constant">
       E
      </code>
      ,
      <code class="literal">
       f
      </code>
      , and
      <code class="constant">
       F
      </code>
      conversions, the maximum
        number of significant digits for
      <code class="literal">
       g
      </code>
      and
      <code class="constant">
       G
      </code>
      conversions, or the maximum number of characters to be
        printed from a string for
      <code class="literal">
       s
      </code>
      and
      <code class="constant">
       S
      </code>
      conversions.
     </p>
    </div>
    <div class="refsect2">
     <a id="printf-3_sect7" name="printf-3_sect7" shape="rect">
     </a>
     <h3>
      The length modifier
     </h3>
     <p>
      Here, "integer conversion" stands for
      <code class="literal">
       d
      </code>
      ,
      <code class="literal">
       i
      </code>
      ,
      <code class="literal">
       o
      </code>
      ,
      <code class="literal">
       u
      </code>
      ,
      <code class="literal">
       x
      </code>
      , or
      <code class="constant">
       X
      </code>
      conversion.
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <code class="literal">
          hh
         </code>
        </span>
       </dt>
       <dd>
        <p>
         A following integer conversion corresponds to a
         <span class="emphasis">
          <em>
           signed char
          </em>
         </span>
         or
         <span class="type">
          unsigned char
         </span>
         argument, or
              a following
         <code class="literal">
          n
         </code>
         conversion
              corresponds to a pointer to a
         <span class="emphasis">
          <em>
           signed char
          </em>
         </span>
         argument.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          h
         </code>
        </span>
       </dt>
       <dd>
        <p>
         A following integer conversion corresponds to a
         <span class="type">
          short int
         </span>
         or
         <span class="type">
          unsigned short int
         </span>
         argument, or a
              following
         <code class="literal">
          n
         </code>
         conversion
              corresponds to a pointer to a
         <span class="type">
          short int
         </span>
         argument.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          l
         </code>
        </span>
       </dt>
       <dd>
        <p>
         (ell) A following integer conversion corresponds
              to a
         <span class="type">
          long int
         </span>
         or
         <span class="type">
          unsigned long int
         </span>
         argument,
              or a following
         <code class="literal">
          n
         </code>
         conversion corresponds to a pointer to a
         <span class="type">
          long int
         </span>
         argument, or a following
         <code class="literal">
          c
         </code>
         conversion corresponds
              to a
         <span class="type">
          wint_t
         </span>
         argument, or a
              following
         <code class="literal">
          s
         </code>
         conversion
              corresponds to a pointer to
         <span class="type">
          wchar_t
         </span>
         argument.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          ll
         </code>
        </span>
       </dt>
       <dd>
        <p>
         (ell-ell). A following integer conversion
              corresponds to a
         <span class="type">
          long long
              int
         </span>
         or
         <span class="type">
          unsigned long long
              int
         </span>
         argument, or a following
         <code class="literal">
          n
         </code>
         conversion corresponds to a
              pointer to a
         <span class="type">
          long long int
         </span>
         argument.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          L
         </code>
        </span>
       </dt>
       <dd>
        <p>
         A following
         <code class="literal">
          a
         </code>
         ,
         <code class="constant">
          A
         </code>
         ,
         <code class="literal">
          e
         </code>
         ,
         <code class="constant">
          E
         </code>
         ,
         <code class="literal">
          f
         </code>
         ,
         <code class="constant">
          F
         </code>
         ,
         <code class="literal">
          g
         </code>
         ,
              or
         <code class="constant">
          G
         </code>
         conversion
              corresponds to a
         <span class="type">
          long
              double
         </span>
         argument. (C99 allows %LF, but SUSv2
              does not.) This is a synonym for
         <code class="literal">
          ll
         </code>
         .
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          j
         </code>
        </span>
       </dt>
       <dd>
        <p>
         A following integer conversion corresponds to an
         <span class="type">
          intmax_t
         </span>
         or
         <span class="type">
          uintmax_t
         </span>
         argument, or a following
         <code class="literal">
          n
         </code>
         conversion corresponds
              to a pointer to an
         <span class="type">
          intmax_t
         </span>
         argument.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          z
         </code>
        </span>
       </dt>
       <dd>
        <p>
         A following integer conversion corresponds to a
         <span class="type">
          size_t
         </span>
         or
         <span class="type">
          ssize_t
         </span>
         argument, or a following
         <code class="literal">
          n
         </code>
         conversion corresponds
              to a pointer to a
         <span class="type">
          size_t
         </span>
         argument.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          t
         </code>
        </span>
       </dt>
       <dd>
        <p>
         A following integer conversion corresponds to a
         <span class="type">
          ptrdiff_t
         </span>
         argument, or a
              following
         <code class="literal">
          n
         </code>
         conversion
              corresponds to a pointer to a
         <span class="type">
          ptrdiff_t
         </span>
         argument.
        </p>
       </dd>
      </dl>
     </div>
     <p>
      SUSv3 specifies all of the above. SUSv2 specified only
        the length modifiers
      <code class="literal">
       h
      </code>
      (in
      <code class="literal">
       hd
      </code>
      ,
      <code class="literal">
       hi
      </code>
      ,
      <code class="literal">
       ho
      </code>
      ,
      <code class="literal">
       hx
      </code>
      ,
      <code class="literal">
       hX
      </code>
      ,
      <code class="literal">
       hn
      </code>
      ) and
      <code class="literal">
       l
      </code>
      (in
      <code class="literal">
       ld
      </code>
      ,
      <code class="literal">
       li
      </code>
      ,
      <code class="literal">
       lo
      </code>
      ,
      <code class="literal">
       lx
      </code>
      ,
      <code class="literal">
       lX
      </code>
      ,
      <code class="literal">
       ln
      </code>
      ,
      <code class="literal">
       lc
      </code>
      ,
      <code class="literal">
       ls
      </code>
      ) and
      <code class="constant">
       L
      </code>
      (in
      <code class="literal">
       Le
      </code>
      ,
      <code class="constant">
       LE
      </code>
      ,
      <code class="literal">
       Lf
      </code>
      ,
      <code class="literal">
       Lg
      </code>
      ,
      <code class="constant">
       LG
      </code>
      ).
     </p>
    </div>
    <div class="refsect2">
     <a id="printf-3_sect8" name="printf-3_sect8" shape="rect">
     </a>
     <h3>
      The conversion specifier
     </h3>
     <p>
      A character that specifies the type of conversion to be
        applied. The conversion specifiers and their meanings
        are:
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <code class="literal">
          d
         </code>
         ,
         <code class="literal">
          i
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The
         <span class="type">
          int
         </span>
         argument is
              converted to signed decimal notation. The precision,
              if any, gives the minimum number of digits that must
              appear; if the converted value requires fewer digits,
              it is padded on the left with zeros. The default
              precision is 1. When 0 is printed with an explicit
              precision 0, the output is empty.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          o
         </code>
         ,
         <code class="literal">
          u
         </code>
         ,
         <code class="literal">
          x
         </code>
         ,
         <code class="constant">
          X
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The
         <span class="type">
          unsigned int
         </span>
         argument is converted to unsigned octal (
         <code class="literal">
          o
         </code>
         ), unsigned decimal (
         <code class="literal">
          u
         </code>
         ), or unsigned hexadecimal
              (
         <code class="literal">
          x
         </code>
         and
         <code class="constant">
          X
         </code>
         ) notation. The letters
         <code class="literal">
          abcdef
         </code>
         are used for
         <code class="literal">
          x
         </code>
         conversions; the
              letters
         <code class="constant">
          ABCDEF
         </code>
         are used
              for
         <code class="constant">
          X
         </code>
         conversions. The
              precision, if any, gives the minimum number of digits
              that must appear; if the converted value requires
              fewer digits, it is padded on the left with zeros.
              The default precision is 1. When 0 is printed with an
              explicit precision 0, the output is empty.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          e
         </code>
         ,
         <code class="constant">
          E
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The
         <span class="type">
          double
         </span>
         argument is
              rounded and converted in the style
              [&minus;]d
         <code class="filename">
          .
         </code>
         ddd
         <code class="literal">
          e
         </code>
         &plusmn;dd where there is one digit
              before the decimal-point character and the number of
              digits after it is equal to the precision; if the
              precision is missing, it is taken as 6; if the
              precision is zero, no decimal-point character
              appears. An
         <code class="constant">
          E
         </code>
         conversion uses the letter
         <code class="constant">
          E
         </code>
         (rather than
         <code class="literal">
          e
         </code>
         ) to introduce the exponent. The
              exponent always contains at least two digits; if the
              value is zero, the exponent is 00.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          f
         </code>
         ,
         <code class="constant">
          F
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The
         <span class="type">
          double
         </span>
         argument is
              rounded and converted to decimal notation in the
              style [&minus;]ddd
         <code class="filename">
          .
         </code>
         ddd,
              where the number of digits after the decimal-point
              character is equal to the precision specification. If
              the precision is missing, it is taken as 6; if the
              precision is explicitly zero, no decimal-point
              character appears. If a decimal point appears, at
              least one digit appears before it.
        </p>
        <p>
         (SUSv2 does not know about
         <code class="constant">
          F
         </code>
         and says that character string
              representations for infinity and NaN may be made
              available. SUSv3 adds a specification for
         <code class="constant">
          F
         </code>
         . The C99 standard
              specifies "[&minus;]inf" or "[&minus;]infinity" for
              infinity, and a string starting with "nan" for NaN,
              in the case of
         <code class="literal">
          f
         </code>
         conversion, and "[&minus;]INF" or "[&minus;]INFINITY"
              or "NAN*" in the case of
         <code class="constant">
          F
         </code>
         conversion.)
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          g
         </code>
         ,
         <code class="constant">
          G
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The
         <span class="type">
          double
         </span>
         argument is
              converted in style
         <code class="literal">
          f
         </code>
         or
         <code class="literal">
          e
         </code>
         (or
         <code class="constant">
          F
         </code>
         or
         <code class="constant">
          E
         </code>
         for
         <code class="constant">
          G
         </code>
         conversions). The precision
              specifies the number of significant digits. If the
              precision is missing, 6 digits are given; if the
              precision is zero, it is treated as 1. Style
         <code class="literal">
          e
         </code>
         is used if the
              exponent from its conversion is less than &minus;4 or
              greater than or equal to the precision. Trailing
              zeros are removed from the fractional part of the
              result; a decimal point appears only if it is
              followed by at least one digit.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          a
         </code>
         ,
         <code class="constant">
          A
         </code>
        </span>
       </dt>
       <dd>
        <p>
         (C99; not in SUSv2, but added in SUSv3) For
         <code class="literal">
          a
         </code>
         conversion, the
         <span class="type">
          double
         </span>
         argument is
              converted to hexadecimal notation (using the letters
              abcdef) in the style [&minus;]
         <code class="literal">
          0x
         </code>
         h
         <code class="filename">
          .
         </code>
         hhhh
         <code class="literal">
          p
         </code>
         &plusmn;; for
         <code class="constant">
          A
         </code>
         conversion the prefix
         <code class="constant">
          0X
         </code>
         , the letters ABCDEF,
              and the exponent separator
         <code class="constant">
          P
         </code>
         is used. There is one hexadecimal
              digit before the decimal point, and the number of
              digits after it is equal to the precision. The
              default precision suffices for an exact
              representation of the value if an exact
              representation in base 2 exists and otherwise is
              sufficiently large to distinguish values of type
         <span class="type">
          double
         </span>
         . The digit before
              the decimal point is unspecified for nonnormalized
              numbers, and nonzero but otherwise unspecified for
              normalized numbers.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          c
         </code>
        </span>
       </dt>
       <dd>
        <p>
         If no
         <code class="literal">
          l
         </code>
         modifier is
              present, the
         <span class="type">
          int
         </span>
         argument
              is converted to an
         <span class="type">
          unsigned
              char
         </span>
         , and the resulting character is written.
              If an
         <code class="literal">
          l
         </code>
         modifier is
              present, the
         <span class="type">
          wint_t
         </span>
         (wide
              character) argument is converted to a multibyte
              sequence by a call to the
         <a class="link" href="../htmlman3/wcrtomb.3.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            wcrtomb
           </span>
           (3)
          </span>
         </a>
         function, with a conversion state starting in the
              initial state, and the resulting multibyte string is
              written.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          s
         </code>
        </span>
       </dt>
       <dd>
        <p>
         If no
         <code class="literal">
          l
         </code>
         modifier is
              present: The
         <span class="type">
          const char *
         </span>
         argument is expected to be a pointer to an array of
              character type (pointer to a string). Characters from
              the array are written up to (but not including) a
              terminating null byte ('\0'); if a precision is
              specified, no more than the number specified are
              written. If a precision is given, no null byte need
              be present; if the precision is not specified, or is
              greater than the size of the array, the array must
              contain a terminating null byte.
        </p>
        <p>
         If an
         <code class="literal">
          l
         </code>
         modifier is
              present: The
         <span class="type">
          const wchar_t
              *
         </span>
         argument is expected to be a pointer to an
              array of wide characters. Wide characters from the
              array are converted to multibyte characters (each by
              a call to the
         <a class="link" href="../htmlman3/wcrtomb.3.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            wcrtomb
           </span>
           (3)
          </span>
         </a>
         function, with a conversion state starting in the
              initial state before the first wide character), up to
              and including a terminating null wide character. The
              resulting multibyte characters are written up to (but
              not including) the terminating null byte. If a
              precision is specified, no more bytes than the number
              specified are written, but no partial multibyte
              characters are written. Note that the precision
              determines the number of
         <span class="emphasis">
          <em>
           bytes
          </em>
         </span>
         written, not the
              number of
         <span class="emphasis">
          <em>
           wide
              characters
          </em>
         </span>
         or
         <span class="emphasis">
          <em>
           screen positions
          </em>
         </span>
         . The
              array must contain a terminating null wide character,
              unless a precision is given and it is so small that
              the number of bytes written exceeds it before the end
              of the array is reached.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          C
         </code>
        </span>
       </dt>
       <dd>
        <p>
         (Not in C99 or C11, but in SUSv2, SUSv3, and
              SUSv4.) Synonym for
         <code class="literal">
          lc
         </code>
         .
              Don't use.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          S
         </code>
        </span>
       </dt>
       <dd>
        <p>
         (Not in C99 or C11, but in SUSv2, SUSv3, and
              SUSv4.) Synonym for
         <code class="literal">
          ls
         </code>
         .
              Don't use.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          p
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The
         <span class="emphasis">
          <em>
           void *
          </em>
         </span>
         pointer argument is printed in hexadecimal (as if by
         <em class="replaceable">
          <code>
           %#x
          </code>
         </em>
         or
         <em class="replaceable">
          <code>
           %#lx
          </code>
         </em>
         ).
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          n
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The number of characters written so far is stored
              into the integer pointed to by the corresponding
              argument. That argument shall be an
         <span class="emphasis">
          <em>
           int * ,
          </em>
         </span>
         or variant whose
              size matches the (optionally) supplied integer length
              modifier. No argument is converted. The behavior is
              undefined if the conversion specification includes
              any flags, a field width, or a precision.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          m
         </code>
        </span>
       </dt>
       <dd>
        <p>
         (Glibc extension.) Print output of
         <em class="replaceable">
          <code>
           strerror(errno)
          </code>
         </em>
         . No
              argument is required.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="literal">
          %
         </code>
        </span>
       </dt>
       <dd>
        <p>
         A '%' is written. No argument is converted. The
              complete conversion specification is '%%'.
        </p>
       </dd>
      </dl>
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="printf-3_sect9" name="printf-3_sect9" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     The
     <code class="function">
      fprintf
     </code>
     (),
     <code class="function">
      printf
     </code>
     (),
     <code class="function">
      sprintf
     </code>
     (),
     <code class="function">
      vprintf
     </code>
     (),
     <code class="function">
      vfprintf
     </code>
     (), and
     <code class="function">
      vsprintf
     </code>
     () functions conform to C89 and
      C99. The
     <code class="function">
      snprintf
     </code>
     () and
     <code class="function">
      vsnprintf
     </code>
     () functions conform
      to C99.
    </p>
    <p>
     Concerning the return value of
     <code class="function">
      snprintf
     </code>
     (), SUSv2 and C99 contradict each
      other: when
     <code class="function">
      snprintf
     </code>
     () is
      called with
     <em class="parameter">
      <code>
       size
      </code>
     </em>
     =0
      then SUSv2 stipulates an unspecified return value less than
      1, while C99 allows
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     to be NULL in this case,
      and gives the return value (as always) as the number of
      characters that would have been written in case the output
      string has been large enough. SUSv3 and later align their
      specification of
     <code class="function">
      snprintf
     </code>
     ()
      with C99.
    </p>
    <p>
     glibc 2.1 adds length modifiers
     <code class="literal">
      hh
     </code>
     ,
     <code class="literal">
      j
     </code>
     ,
     <code class="literal">
      t
     </code>
     , and
     <code class="literal">
      z
     </code>
     and conversion characters
     <code class="literal">
      a
     </code>
     and
     <code class="constant">
      A
     </code>
     .
    </p>
    <p>
     glibc 2.2 adds the conversion character
     <code class="constant">
      F
     </code>
     with C99 semantics, and the flag
      character
     <code class="constant">
      I
     </code>
     .
    </p>
   </div>
   <div class="refsect1">
    <a id="printf-3_sect10" name="printf-3_sect10" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <p>
     Some programs imprudently rely on code such as the
      following
    </p>
    <p>
     sprintf(buf, "%s some further text", buf);
    </p>
    <p>
     to append text to
     <code class="function">
      buf
     </code>
     .
      However, the standards explicitly note that the results are
      undefined if source and destination buffers overlap when
      calling
     <code class="function">
      sprintf
     </code>
     (),
     <code class="function">
      snprintf
     </code>
     (),
     <code class="function">
      vsprintf
     </code>
     (), and
     <code class="function">
      vsnprintf
     </code>
     (). Depending on the version of
     <span class="citerefentry">
      <span class="refentrytitle">
       gcc
      </span>
      (1)
     </span>
     used, and the compiler
      options employed, calls such as the above will
     <span class="emphasis">
      <em>
       not
      </em>
     </span>
     produce the expected
      results.
    </p>
    <p>
     The glibc implementation of the functions
     <code class="function">
      snprintf
     </code>
     () and
     <code class="function">
      vsnprintf
     </code>
     () conforms to the C99 standard,
      that is, behaves as described above, since glibc version 2.1.
      Until glibc 2.0.6, they would return &minus;1 when the output
      was truncated.
    </p>
   </div>
   <div class="refsect1">
    <a id="printf-3_sect11" name="printf-3_sect11" shape="rect">
    </a>
    <h2>
     BUGS
    </h2>
    <p>
     Because
     <code class="function">
      sprintf
     </code>
     () and
     <code class="function">
      vsprintf
     </code>
     () assume an
      arbitrarily long string, callers must be careful not to
      overflow the actual space; this is often impossible to
      assure. Note that the length of the strings produced is
      locale-dependent and difficult to predict. Use
     <code class="function">
      snprintf
     </code>
     () and
     <code class="function">
      vsnprintf
     </code>
     () instead (or
     <a class="link" href="../htmlman3/asprintf.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        asprintf
       </span>
       (3)
      </span>
     </a>
     and
     <a class="link" href="../htmlman3/asprintf.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        vasprintf
       </span>
       (3)
      </span>
     </a>
     ).
    </p>
    <p>
     Code such as
    </p>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
  <code class="function">printf</code>(<em class="parameter"><code>foo</code></em>);
</pre>
    </div>
    <p>
     often indicates a bug, since
     <em class="replaceable">
      <code>
       foo
      </code>
     </em>
     may contain a %
      character. If
     <em class="replaceable">
      <code>
       foo
      </code>
     </em>
     comes from untrusted user input, it may contain
     <em class="replaceable">
      <code>
       %n
      </code>
     </em>
     , causing the
     <code class="function">
      printf
     </code>
     () call to write to memory and
      creating a security hole.
    </p>
   </div>
   <div class="refsect1">
    <a id="printf-3_sect12" name="printf-3_sect12" shape="rect">
    </a>
    <h2>
     EXAMPLE
    </h2>
    <p>
     To print
     <code class="literal">
      Pi
     </code>
     to five decimal
      places:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
#include &lt;math.h&gt;
#include &lt;stdio.h&gt;
fprintf(stdout, "pi = %.5f\n", 4 * atan(1.0));
</pre>
      </div>
     </blockquote>
    </div>
    <p>
     To print a date and time in the form "Sunday, July 3,
      10:02", where
     <em class="replaceable">
      <code>
       weekday
      </code>
     </em>
     and
     <em class="replaceable">
      <code>
       month
      </code>
     </em>
     are pointers to
      strings:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
#include &lt;stdio.h&gt;
fprintf(stdout, "%s, %s %d, %.2d:%.2d\n",
        weekday, month, day, hour, min);
</pre>
      </div>
     </blockquote>
    </div>
    <p>
     Many countries use the day-month-year order. Hence, an
      internationalized version must be able to print the arguments
      in an order specified by the format:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
#include &lt;stdio.h&gt;
fprintf(stdout, format,
        weekday, month, day, hour, min);
</pre>
      </div>
     </blockquote>
    </div>
    <p>
     where
     <em class="parameter">
      <code>
       format
      </code>
     </em>
     depends on locale, and may permute the arguments. With the
      value:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
"%1$s, %3$d. %2$s, %4$d:%5$.2d\n"
</pre>
      </div>
     </blockquote>
    </div>
    <p>
     one might obtain "Sonntag, 3. Juli, 10:02".
    </p>
    <p>
     To allocate a sufficiently large string and print into it
      (code correct for both glibc 2.0 and glibc 2.1):
    </p>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdarg.h&gt;

char *
make_message(const char *fmt, ...)
{
    int n;
    int size = 100;     /* Guess we need no more than 100 bytes */
    char *p, *np;
    va_list ap;

    p = malloc(size);
    if (p == NULL)
        return NULL;

    while (1) {

        /* Try to print in the allocated space */

        va_start(ap, fmt);
        n = vsnprintf(p, size, fmt, ap);
        va_end(ap);

        /* Check error code */

        if (n &lt; 0) {
            free(p);
            return NULL;
        }

        /* If that worked, return the string */

        if (n &lt; size)
            return p;

        /* Else try again with more space */

        size = n + 1;       /* Precisely what is needed */


        np = realloc(p, size);
        if (np == NULL) {
            free(p);
            return NULL;
        } else {
            p = np;
        }
    }
}
</pre>
    </div>
    <p>
     If truncation occurs in glibc versions prior to 2.0.6,
      this is treated as an error instead of being handled
      gracefully.
    </p>
   </div>
   <div class="refsect1">
    <a id="printf-3_sect13" name="printf-3_sect13" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman1/printf.1.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        printf
       </span>
       (1)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/asprintf.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        asprintf
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/dprintf.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        dprintf
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/scanf.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        scanf
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/setlocale.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        setlocale
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/wcrtomb.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        wcrtomb
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/wprintf.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        wprintf
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman5/locale.5.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        locale
       </span>
       (5)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="printf-3_sect14" name="printf-3_sect14" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
