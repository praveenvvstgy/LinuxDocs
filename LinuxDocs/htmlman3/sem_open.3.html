<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   sem_open(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="sem_open(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="sem-open.3" name="sem-open.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     sem_open &mdash; initialize and open a named semaphore
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
#include &lt;fcntl.h&gt;            /* For O_* constants */
#include &lt;sys/stat.h&gt;         /* For mode constants */
#include &lt;semaphore.h&gt;
</pre>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         sem_t
            *
         <strong>
          sem_open
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         name
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         oflag
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         sem_t
            *
         <strong>
          sem_open
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         name
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         oflag
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        mode_t
        <var class="pdparam">
         mode
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        unsigned int
        <var class="pdparam">
         value
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <p>
         Link with
         <code class="option">
          &minus;pthread
         </code>
         .
        </p>
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="refsect1">
    <a id="sem-open-3_sect1" name="sem-open-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     <code class="function">
      sem_open
     </code>
     () creates a new
      POSIX semaphore or opens an existing semaphore. The semaphore
      is identified by
     <em class="parameter">
      <code>
       name
      </code>
     </em>
     . For details of the
      construction of
     <em class="parameter">
      <code>
       name
      </code>
     </em>
     ,
      see
     <a class="link" href="../htmlman7/sem_overview.7.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sem_overview
       </span>
       (7)
      </span>
     </a>
     .
    </p>
    <p>
     The
     <em class="parameter">
      <code>
       oflag
      </code>
     </em>
     argument
      specifies flags that control the operation of the call.
      (Definitions of the flags values can be obtained by including
     <code class="literal">
      &lt;
     </code>
     <code class="filename">
      fcntl.h
     </code>
     <code class="literal">
      &gt;
     </code>
     If
     <code class="constant">
      O_CREAT
     </code>
     is specified in
     <em class="parameter">
      <code>
       oflag
      </code>
     </em>
     , then the
      semaphore is created if it does not already exist. The owner
      (user ID) of the semaphore is set to the effective user ID of
      the calling process. The group ownership (group ID) is set to
      the effective group ID of the calling process. If both
     <code class="constant">
      O_CREAT
     </code>
     and
     <code class="constant">
      O_EXCL
     </code>
     are specified in
     <em class="parameter">
      <code>
       oflag
      </code>
     </em>
     , then an error is
      returned if a semaphore with the given
     <em class="parameter">
      <code>
       name
      </code>
     </em>
     already exists.
    </p>
    <p>
     If
     <code class="constant">
      O_CREAT
     </code>
     is specified in
     <em class="parameter">
      <code>
       oflag
      </code>
     </em>
     , then two
      additional arguments must be supplied. The
     <em class="parameter">
      <code>
       mode
      </code>
     </em>
     argument specifies the
      permissions to be placed on the new semaphore, as for
     <a class="link" href="../htmlman2/open.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        open
       </span>
       (2)
      </span>
     </a>
     . (Symbolic
      definitions for the permissions bits can be obtained by
      including
     <code class="literal">
      &lt;
     </code>
     <code class="filename">
      sys/stat.h
     </code>
     <code class="literal">
      &gt;
     </code>
     The permissions settings are masked against the process
      umask. Both read and write permission should be granted to
      each class of user that will access the semaphore. The
     <em class="parameter">
      <code>
       value
      </code>
     </em>
     argument
      specifies the initial value for the new semaphore. If
     <code class="constant">
      O_CREAT
     </code>
     is specified, and a
      semaphore with the given
     <em class="parameter">
      <code>
       name
      </code>
     </em>
     already exists, then
     <em class="parameter">
      <code>
       mode
      </code>
     </em>
     and
     <em class="parameter">
      <code>
       value
      </code>
     </em>
     are ignored.
    </p>
   </div>
   <div class="refsect1">
    <a id="sem-open-3_sect2" name="sem-open-3_sect2" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     On success,
     <code class="function">
      sem_open
     </code>
     ()
      returns the address of the new semaphore; this address is
      used when calling other semaphore-related functions. On
      error,
     <code class="function">
      sem_open
     </code>
     () returns
     <code class="constant">
      SEM_FAILED
     </code>
     , with
     <code class="varname">
      errno
     </code>
     set to indicate the error.
    </p>
   </div>
   <div class="refsect1">
    <a id="sem-open-3_sect3" name="sem-open-3_sect3" shape="rect">
    </a>
    <h2>
     ERRORS
    </h2>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <span class="errorname">
         EACCES
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The semaphore exists, but the caller does not have
            permission to open it.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EEXIST
        </span>
       </span>
      </dt>
      <dd>
       <p>
        Both
        <code class="constant">
         O_CREAT
        </code>
        and
        <code class="constant">
         O_EXCL
        </code>
        were specified in
        <em class="parameter">
         <code>
          oflag
         </code>
        </em>
        , but a
            semaphore with this
        <em class="parameter">
         <code>
          name
         </code>
        </em>
        already exists.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EINVAL
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          value
         </code>
        </em>
        was
            greater than
        <code class="constant">
         SEM_VALUE_MAX
        </code>
        .
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EINVAL
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          name
         </code>
        </em>
        consists of just "/", followed by no other
            characters.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EMFILE
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The process already has the maximum number of files
            and open.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENAMETOOLONG
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          name
         </code>
        </em>
        was too
            long.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENFILE
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The system limit on the total number of open files
            has been reached.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENOENT
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The
        <code class="constant">
         O_CREAT
        </code>
        flag was
            not specified in
        <em class="parameter">
         <code>
          oflag
         </code>
        </em>
        and no semaphore
            with this
        <em class="parameter">
         <code>
          name
         </code>
        </em>
        exists; or,
        <code class="constant">
         O_CREAT
        </code>
        was
            specified, but
        <em class="parameter">
         <code>
          name
         </code>
        </em>
        wasn't well
            formed.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENOMEM
        </span>
       </span>
      </dt>
      <dd>
       <p>
        Insufficient memory.
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="sem-open-3_sect4" name="sem-open-3_sect4" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     POSIX.1-2001.
    </p>
   </div>
   <div class="refsect1">
    <a id="sem-open-3_sect5" name="sem-open-3_sect5" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman3/sem_close.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sem_close
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/sem_getvalue.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sem_getvalue
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/sem_post.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sem_post
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/sem_unlink.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sem_unlink
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/sem_wait.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sem_wait
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman7/sem_overview.7.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sem_overview
       </span>
       (7)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="sem-open-3_sect6" name="sem-open-3_sect6" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
