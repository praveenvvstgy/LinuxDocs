<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   regex(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="regex(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="regex.3" name="regex.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     regcomp, regexec, regerror, regfree &mdash; POSIX regex
      functions
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
#include &lt;sys/types.h&gt;
#include &lt;regex.h&gt;
</pre>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          regcomp
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        regex_t *
        <var class="pdparam">
         preg
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         regex
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         cflags
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          regexec
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const regex_t *
        <var class="pdparam">
         preg
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         string
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        size_t
        <var class="pdparam">
         nmatch
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        regmatch_t
        <var class="pdparam">
         pmatch[]
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         eflags
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         size_t
         <strong>
          regerror
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         errcode
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const regex_t *
        <var class="pdparam">
         preg
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         errbuf
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        size_t
        <var class="pdparam">
         errbuf_size
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         void
         <strong>
          regfree
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        regex_t *
        <var class="pdparam">
         preg
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="regex-3_sect1" name="regex-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <div class="refsect2">
     <a id="regex-3_sect2" name="regex-3_sect2" shape="rect">
     </a>
     <h3>
      POSIX regex compiling
     </h3>
     <p>
      <code class="function">
       regcomp
      </code>
      () is used to
        compile a regular expression into a form that is suitable
        for subsequent
      <code class="function">
       regexec
      </code>
      ()
        searches.
     </p>
     <p>
      <code class="function">
       regcomp
      </code>
      () is supplied with
      <em class="parameter">
       <code>
        preg
       </code>
      </em>
      , a pointer to
        a pattern buffer storage area;
      <em class="parameter">
       <code>
        regex
       </code>
      </em>
      , a pointer to the
        null-terminated string and
      <em class="parameter">
       <code>
        cflags
       </code>
      </em>
      , flags used to
        determine the type of compilation.
     </p>
     <p>
      All regular expression searching must be done via a
        compiled pattern buffer, thus
      <code class="function">
       regexec
      </code>
      () must always be supplied with
        the address of a
      <code class="function">
       regcomp
      </code>
      ()
        initialized pattern buffer.
     </p>
     <p>
      <em class="parameter">
       <code>
        cflags
       </code>
      </em>
      may be
        the bitwise-
      <span class="emphasis">
       <em>
        or
       </em>
      </span>
      of
        one or more of the following:
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <code class="constant">
          REG_EXTENDED
         </code>
        </span>
       </dt>
       <dd>
        <p>
         Use
         <code class="constant">
          POSIX
         </code>
         Extended
              Regular Expression syntax when interpreting
         <em class="parameter">
          <code>
           regex
          </code>
         </em>
         . If not
              set,
         <code class="constant">
          POSIX
         </code>
         Basic
              Regular Expression syntax is used.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          REG_ICASE
         </code>
        </span>
       </dt>
       <dd>
        <p>
         Do not differentiate case. Subsequent
         <code class="function">
          regexec
         </code>
         () searches using this
              pattern buffer will be case insensitive.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          REG_NOSUB
         </code>
        </span>
       </dt>
       <dd>
        <p>
         Do not report position of matches. The
         <em class="parameter">
          <code>
           nmatch
          </code>
         </em>
         and
         <em class="parameter">
          <code>
           pmatch
          </code>
         </em>
         arguments to
         <code class="function">
          regexec
         </code>
         () are ignored
              if the pattern buffer supplied was compiled with this
              flag set.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          REG_NEWLINE
         </code>
        </span>
       </dt>
       <dd>
        <p>
         Match-any-character operators don't match a
              newline.
        </p>
        <p>
         A nonmatching list (
         <em class="replaceable">
          <code>
           [^...]
          </code>
         </em>
         ) not
              containing a newline does not match a newline.
        </p>
        <p>
         Match-beginning-of-line operator (
         <code class="literal">
          ^
         </code>
         ) matches the empty string
              immediately after a newline, regardless of whether
         <em class="parameter">
          <code>
           eflags
          </code>
         </em>
         , the
              execution flags of
         <code class="function">
          regexec
         </code>
         (), contains
         <code class="constant">
          REG_NOTBOL
         </code>
         .
        </p>
        <p>
         Match-end-of-line operator (
         <code class="literal">
          $
         </code>
         ) matches the empty string
              immediately before a newline, regardless of whether
         <em class="parameter">
          <code>
           eflags
          </code>
         </em>
         contains
         <code class="constant">
          REG_NOTEOL
         </code>
         .
        </p>
       </dd>
      </dl>
     </div>
    </div>
    <div class="refsect2">
     <a id="regex-3_sect3" name="regex-3_sect3" shape="rect">
     </a>
     <h3>
      POSIX regex matching
     </h3>
     <p>
      <code class="function">
       regexec
      </code>
      () is used to match
        a null-terminated string against the precompiled pattern
        buffer,
      <em class="parameter">
       <code>
        preg
       </code>
      </em>
      .
      <em class="parameter">
       <code>
        nmatch
       </code>
      </em>
      and
      <em class="parameter">
       <code>
        pmatch
       </code>
      </em>
      are used to
        provide information regarding the location of any matches.
      <em class="parameter">
       <code>
        eflags
       </code>
      </em>
      may be the
        bitwise-
      <span class="emphasis">
       <em>
        or
       </em>
      </span>
      of one or
        both of
      <code class="constant">
       REG_NOTBOL
      </code>
      and
      <code class="constant">
       REG_NOTEOL
      </code>
      which cause
        changes in matching behavior described below.
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <code class="constant">
          REG_NOTBOL
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The match-beginning-of-line operator always fails
              to match (but see the compilation flag
         <code class="constant">
          REG_NEWLINE
         </code>
         above). This flag may
              be used when different portions of a string are
              passed to
         <code class="function">
          regexec
         </code>
         () and
              the beginning of the string should not be interpreted
              as the beginning of the line.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          REG_NOTEOL
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The match-end-of-line operator always fails to
              match (but see the compilation flag
         <code class="constant">
          REG_NEWLINE
         </code>
         above).
        </p>
       </dd>
      </dl>
     </div>
    </div>
    <div class="refsect2">
     <a id="regex-3_sect4" name="regex-3_sect4" shape="rect">
     </a>
     <h3>
      Byte offsets
     </h3>
     <p>
      Unless
      <code class="constant">
       REG_NOSUB
      </code>
      was set
        for the compilation of the pattern buffer, it is possible
        to obtain match addressing information.
      <em class="parameter">
       <code>
        pmatch
       </code>
      </em>
      must be dimensioned to
        have at least
      <em class="parameter">
       <code>
        nmatch
       </code>
      </em>
      elements. These are
        filled in by
      <code class="function">
       regexec
      </code>
      () with
        substring match addresses. The offsets of the subexpression
        starting at the
      <code class="literal">
       i
      </code>
      th open
        parenthesis are stored in
      <em class="replaceable">
       <code>
        pmatch[i]
       </code>
      </em>
      . The entire
        regular expression's match addresses are stored in
      <em class="replaceable">
       <code>
        pmatch[0]
       </code>
      </em>
      . (Note
        that to return the offsets of
      <code class="constant">
       N
      </code>
      subexpression matches,
      <em class="parameter">
       <code>
        nmatch
       </code>
      </em>
      must be at least
      <em class="replaceable">
       <code>
        N+1
       </code>
      </em>
      .) Any unused
        structure elements will contain the value &minus;1.
     </p>
     <p>
      The
      <span class="type">
       regmatch_t
      </span>
      structure which
        is the type of
      <em class="parameter">
       <code>
        pmatch
       </code>
      </em>
      is defined in
      <code class="literal">
       &lt;
      </code>
      <code class="filename">
       regex.h
      </code>
      <code class="literal">
       &gt;
      </code>
     </p>
     <div class="blockquote">
      <blockquote class="blockquote">
       <div class="structdef">
        <table style="border-collapse: collapse;">
         <colgroup span="1">
          <col class="c1" span="1">
          </col>
          <col class="c2" span="1">
          </col>
          <col class="c3" span="1">
          </col>
          <col class="c4" span="1">
          </col>
          <col class="c5" span="1">
          </col>
         </colgroup>
         <tbody>
          <tr>
           <td align="left" class="structdefhdr" colspan="1" rowspan="1" style="">
            typedef
           </td>
           <td align="left" class="structdefhdr" colspan="4" rowspan="1" style="">
            struct&nbsp;{
           </td>
          </tr>
          <tr>
           <td colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <span class="type">
             regoff_t
            </span>
           </td>
           <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <em class="structfield">
             <code>
              rm_so
             </code>
            </em>
            ;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
          </tr>
          <tr>
           <td colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <span class="type">
             regoff_t
            </span>
           </td>
           <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <em class="structfield">
             <code>
              rm_eo
             </code>
            </em>
            ;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
          </tr>
          <tr>
           <td align="left" class="structdefftr" colspan="5" rowspan="1" style="">
            } regmatch_t;
           </td>
          </tr>
         </tbody>
        </table>
       </div>
      </blockquote>
     </div>
     <p>
      Each
      <em class="parameter">
       <code>
        rm_so
       </code>
      </em>
      element that is not &minus;1 indicates the start offset of
        the next largest substring match within the string. The
        relative
      <em class="parameter">
       <code>
        rm_eo
       </code>
      </em>
      element indicates the end offset of the match, which is the
        offset of the first character after the matching text.
     </p>
    </div>
    <div class="refsect2">
     <a id="regex-3_sect5" name="regex-3_sect5" shape="rect">
     </a>
     <h3>
      POSIX error reporting
     </h3>
     <p>
      <code class="function">
       regerror
      </code>
      () is used to turn
        the error codes that can be returned by both
      <code class="function">
       regcomp
      </code>
      () and
      <code class="function">
       regexec
      </code>
      () into error message strings.
     </p>
     <p>
      <code class="function">
       regerror
      </code>
      () is passed the
        error code,
      <em class="parameter">
       <code>
        errcode
       </code>
      </em>
      , the pattern buffer,
      <em class="parameter">
       <code>
        preg
       </code>
      </em>
      , a pointer to
        a character string buffer,
      <em class="parameter">
       <code>
        errbuf
       </code>
      </em>
      , and the size of the
        string buffer,
      <em class="parameter">
       <code>
        errbuf_size
       </code>
      </em>
      . It returns the
        size of the
      <em class="parameter">
       <code>
        errbuf
       </code>
      </em>
      required to contain the null-terminated error message
        string. If both
      <em class="parameter">
       <code>
        errbuf
       </code>
      </em>
      and
      <em class="parameter">
       <code>
        errbuf_size
       </code>
      </em>
      are nonzero,
      <em class="parameter">
       <code>
        errbuf
       </code>
      </em>
      is filled in
        with the first
      <span class="emphasis">
       <em>
        errbuf_size
        &minus; 1
       </em>
      </span>
      characters of the error message and a
        terminating null byte ('\0').
     </p>
    </div>
    <div class="refsect2">
     <a id="regex-3_sect6" name="regex-3_sect6" shape="rect">
     </a>
     <h3>
      POSIX pattern buffer freeing
     </h3>
     <p>
      Supplying
      <code class="function">
       regfree
      </code>
      () with a
        precompiled pattern buffer,
      <em class="parameter">
       <code>
        preg
       </code>
      </em>
      will free the memory
        allocated to the pattern buffer by the compiling process,
      <code class="function">
       regcomp
      </code>
      ().
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="regex-3_sect7" name="regex-3_sect7" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     <code class="function">
      regcomp
     </code>
     () returns zero for a
      successful compilation or an error code for failure.
    </p>
    <p>
     <code class="function">
      regexec
     </code>
     () returns zero for a
      successful match or
     <code class="constant">
      REG_NOMATCH
     </code>
     for failure.
    </p>
   </div>
   <div class="refsect1">
    <a id="regex-3_sect8" name="regex-3_sect8" shape="rect">
    </a>
    <h2>
     ERRORS
    </h2>
    <p>
     The following errors can be returned by
     <code class="function">
      regcomp
     </code>
     ():
    </p>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <code class="constant">
         REG_BADBR
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Invalid use of back reference operator.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_BADPAT
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Invalid use of pattern operators such as group or
            list.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_BADRPT
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Invalid use of repetition operators such as using
            '*' as the first character.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_EBRACE
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Un-matched brace interval operators.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_EBRACK
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Un-matched bracket list operators.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_ECOLLATE
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Invalid collating element.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_ECTYPE
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Unknown character class name.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_EEND
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Nonspecific error. This is not defined by
            POSIX.2.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_EESCAPE
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Trailing backslash.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_EPAREN
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Un-matched parenthesis group operators.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_ERANGE
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Invalid use of the range operator; for example, the
            ending point of the range occurs prior to the starting
            point.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_ESIZE
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Compiled regular expression requires a pattern
            buffer larger than 64Kb. This is not defined by
            POSIX.2.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_ESPACE
        </code>
       </span>
      </dt>
      <dd>
       <p>
        The regex routines ran out of memory.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         REG_ESUBREG
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Invalid back reference to a subexpression.
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="regex-3_sect9" name="regex-3_sect9" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     POSIX.1-2001.
    </p>
   </div>
   <div class="refsect1">
    <a id="regex-3_sect10" name="regex-3_sect10" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <span class="citerefentry">
      <span class="refentrytitle">
       grep
      </span>
      (1)
     </span>
     ,
     <a class="link" href="../htmlman7/regex.7.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        regex
       </span>
       (7)
      </span>
     </a>
    </p>
    <p>
     The glibc manual section,
     <span class="emphasis">
      <em>
       Regular Expression Matching
      </em>
     </span>
    </p>
   </div>
   <div class="colophon">
    <a id="regex-3_sect11" name="regex-3_sect11" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
