<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   mallinfo(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="mallinfo(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="mallinfo.3" name="mallinfo.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     mallinfo &mdash; obtain memory allocation information
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;malloc.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         struct mallinfo
         <strong>
          mallinfo
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        <code>
         void)
        </code>
        ;
       </td>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="mallinfo-3_sect1" name="mallinfo-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     The
     <code class="function">
      mallinfo
     </code>
     () function
      returns a copy of a structure containing information about
      memory allocations performed by
     <a class="link" href="../htmlman3/malloc.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        malloc
       </span>
       (3)
      </span>
     </a>
     and related
      functions. This structure is defined as follows:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="structdef">
       <table style="border-collapse: collapse;">
        <colgroup span="1">
         <col class="c1" span="1">
         </col>
         <col class="c2" span="1">
         </col>
         <col class="c3" span="1">
         </col>
         <col class="c4" span="1">
         </col>
         <col class="c5" span="1">
         </col>
        </colgroup>
        <tbody>
         <tr>
          <td align="left" class="structdefhdr" colspan="1" rowspan="1" style="">
           struct
          </td>
          <td align="left" class="structdefhdr" colspan="4" rowspan="1" style="">
           <span class="structname">
            mallinfo
           </span>
           &nbsp;{
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             arena
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;Non-mmapped&nbsp;space&nbsp;allocated&nbsp;(bytes)&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             ordblks
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;Number&nbsp;of&nbsp;free&nbsp;chunks&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             smblks
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;Number&nbsp;of&nbsp;free&nbsp;fastbin&nbsp;blocks&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             hblks
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;Number&nbsp;of&nbsp;mmapped&nbsp;regions&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             hblkhd
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;Space&nbsp;allocated&nbsp;in&nbsp;mmapped&nbsp;regions&nbsp;(bytes)&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             usmblks
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;Maximum&nbsp;total&nbsp;allocated&nbsp;space&nbsp;(bytes)&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             fsmblks
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;Space&nbsp;in&nbsp;freed&nbsp;fastbin&nbsp;blocks&nbsp;(bytes)&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             uordblks
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;Total&nbsp;allocated&nbsp;space&nbsp;(bytes)&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             fordblks
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;Total&nbsp;free&nbsp;space&nbsp;(bytes)&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <span class="type">
            int
           </span>
          </td>
          <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
           &nbsp;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <em class="structfield">
            <code>
             keepcost
            </code>
           </em>
           ;
          </td>
          <td align="left" colspan="1" rowspan="1" style="">
           <div class="literallayout">
            /*&nbsp;Top-most,&nbsp;releasable&nbsp;space&nbsp;(bytes)&nbsp;*/
           </div>
          </td>
         </tr>
         <tr>
          <td align="left" class="structdefftr" colspan="5" rowspan="1" style="">
           };
          </td>
         </tr>
        </tbody>
       </table>
      </div>
     </blockquote>
    </div>
    <p>
     The fields of the
     <code class="function">
      mallinfo
     </code>
     structure contain the following information:
    </p>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <em class="parameter">
         <code>
          arena
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        The total amount of memory allocated by means other
            than
        <a class="link" href="../htmlman2/mmap.2.html" shape="rect" target="_top">
         <span class="citerefentry">
          <span class="refentrytitle">
           mmap
          </span>
          (2)
         </span>
        </a>
        (i.e., memory
            allocated on the heap). This figure includes both
            in-use blocks and blocks on the free list.
       </p>
      </dd>
      <dt>
       <span class="term">
        <em class="parameter">
         <code>
          ordblks
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        The number of ordinary (i.e., non-fastbin) free
            blocks.
       </p>
      </dd>
      <dt>
       <span class="term">
        <em class="parameter">
         <code>
          smblks
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        The number of fastbin free blocks (see
        <a class="link" href="../htmlman3/mallopt.3.html" shape="rect" target="_top">
         <span class="citerefentry">
          <span class="refentrytitle">
           mallopt
          </span>
          (3)
         </span>
        </a>
        ).
       </p>
      </dd>
      <dt>
       <span class="term">
        <em class="parameter">
         <code>
          hblks
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        The number of blocks currently allocated using
        <a class="link" href="../htmlman2/mmap.2.html" shape="rect" target="_top">
         <span class="citerefentry">
          <span class="refentrytitle">
           mmap
          </span>
          (2)
         </span>
        </a>
        . (See the
            discussion of
        <code class="constant">
         M_MMAP_THRESHOLD
        </code>
        in
        <a class="link" href="../htmlman3/mallopt.3.html" shape="rect" target="_top">
         <span class="citerefentry">
          <span class="refentrytitle">
           mallopt
          </span>
          (3)
         </span>
        </a>
        .)
       </p>
      </dd>
      <dt>
       <span class="term">
        <em class="parameter">
         <code>
          hblkhd
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        The number of bytes in blocks currently allocated
            using
        <a class="link" href="../htmlman2/mmap.2.html" shape="rect" target="_top">
         <span class="citerefentry">
          <span class="refentrytitle">
           mmap
          </span>
          (2)
         </span>
        </a>
        .
       </p>
      </dd>
      <dt>
       <span class="term">
        <em class="parameter">
         <code>
          usmblks
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        The "highwater mark" for allocated space&mdash;that
            is, the maximum amount of space that was ever
            allocated. This field is maintained only in
            nonthreading environments.
       </p>
      </dd>
      <dt>
       <span class="term">
        <em class="parameter">
         <code>
          fsmblks
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        The total number of bytes in fastbin free
            blocks.
       </p>
      </dd>
      <dt>
       <span class="term">
        <em class="parameter">
         <code>
          uordblks
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        The total number of bytes used by in-use
            allocations.
       </p>
      </dd>
      <dt>
       <span class="term">
        <em class="parameter">
         <code>
          fordblks
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        The total number of bytes in free blocks.
       </p>
      </dd>
      <dt>
       <span class="term">
        <em class="parameter">
         <code>
          keepcost
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        The total amount of releasable free space at the top
            of the heap. This is the maximum number of bytes that
            could ideally (i.e., ignoring page alignment
            restrictions, and so on) be released by
        <a class="link" href="../htmlman3/malloc_trim.3.html" shape="rect" target="_top">
         <span class="citerefentry">
          <span class="refentrytitle">
           malloc_trim
          </span>
          (3)
         </span>
        </a>
        .
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="mallinfo-3_sect2" name="mallinfo-3_sect2" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     This function is not specified by POSIX or the C
      standards. A similar function exists on many System V
      derivatives, and was specified in the SVID.
    </p>
   </div>
   <div class="refsect1">
    <a id="mallinfo-3_sect3" name="mallinfo-3_sect3" shape="rect">
    </a>
    <h2>
     BUGS
    </h2>
    <p>
     <span class="emphasis">
      <em>
       Information is returned for
      only the main memory allocation area.
      </em>
     </span>
     Allocations
      in other arenas are excluded. See
     <a class="link" href="../htmlman3/malloc_stats.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        malloc_stats
       </span>
       (3)
      </span>
     </a>
     and
     <a class="link" href="../htmlman3/malloc_info.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        malloc_info
       </span>
       (3)
      </span>
     </a>
     for
      alternatives that include information about other arenas.
    </p>
    <p>
     The fields of the
     <code class="function">
      mallinfo
     </code>
     structure are typed as
     <span class="type">
      int
     </span>
     .
      However, because some internal bookkeeping values may be of
      type
     <span class="type">
      long
     </span>
     , the reported values may
      wrap around zero and thus be inaccurate.
    </p>
   </div>
   <div class="refsect1">
    <a id="mallinfo-3_sect4" name="mallinfo-3_sect4" shape="rect">
    </a>
    <h2>
     EXAMPLE
    </h2>
    <p>
     The program below employs
     <code class="function">
      mallinfo
     </code>
     () to retrieve memory allocation
      statistics before and after allocating and freeing some
      blocks of memory. The statistics are displayed on standard
      output.
    </p>
    <p>
     The first two command-line arguments specify the number
      and size of blocks to be allocated with
     <a class="link" href="../htmlman3/malloc.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        malloc
       </span>
       (3)
      </span>
     </a>
     .
    </p>
    <p>
     The remaining three arguments specify which of the
      allocated blocks should be freed with
     <a class="link" href="../htmlman3/malloc.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        free
       </span>
       (3)
      </span>
     </a>
     . These three
      arguments are optional, and specify (in order): the step size
      to be used in the loop that frees blocks (the default is 1,
      meaning free all blocks in the range); the ordinal position
      of the first block to be freed (default 0, meaning the first
      allocated block); and a number one greater than the ordinal
      position of the last block to be freed (default is one
      greater than the maximum block number). If these three
      arguments are omitted, then the defaults cause all allocated
      blocks to be freed.
    </p>
    <p>
     In the following example run of the program, 1000
      allocations of 100 bytes are performed, and then every second
      allocated block is freed:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
$ <span class="emphasis"><em>./a.out 1000 100 2</em></span>
============== Before allocating blocks ==============
Total non&minus;mmapped bytes (arena):       0
# of free chunks (ordblks):            1
# of free fastbin blocks (smblks):     0
# of mapped regions (hblks):           0
Bytes in mapped regions (hblkhd):      0
Max. total allocated space (usmblks):  0
Free bytes held in fastbins (fsmblks): 0
Total allocated space (uordblks):      0
Total free space (fordblks):           0
Topmost releasable block (keepcost):   0

============== After allocating blocks ==============
Total non&minus;mmapped bytes (arena):       135168
# of free chunks (ordblks):            1
# of free fastbin blocks (smblks):     0
# of mapped regions (hblks):           0
Bytes in mapped regions (hblkhd):      0
Max. total allocated space (usmblks):  0
Free bytes held in fastbins (fsmblks): 0
Total allocated space (uordblks):      104000
Total free space (fordblks):           31168
Topmost releasable block (keepcost):   31168

============== After freeing blocks ==============
Total non&minus;mmapped bytes (arena):       135168
# of free chunks (ordblks):            501
# of free fastbin blocks (smblks):     0
# of mapped regions (hblks):           0
Bytes in mapped regions (hblkhd):      0
Max. total allocated space (usmblks):  0
Free bytes held in fastbins (fsmblks): 0
Total allocated space (uordblks):      52000
Total free space (fordblks):           83168
Topmost releasable block (keepcost):   31168
</pre>
      </div>
     </blockquote>
    </div>
    <div class="refsect2">
     <a id="mallinfo-3_sect5" name="mallinfo-3_sect5" shape="rect">
     </a>
     <h3>
      Program source
     </h3>
     <div class="informalexample">
      <pre class="programlisting" xml:space="preserve">
#include &lt;malloc.h&gt;
#include "tlpi_hdr.h"

static void
display_mallinfo(void)
{
    struct mallinfo mi;

    mi = mallinfo();

    printf("Total non&minus;mmapped bytes (arena):       %d\n", mi.arena);
    printf("# of free chunks (ordblks):            %d\n", mi.ordblks);
    printf("# of free fastbin blocks (smblks):     %d\n", mi.smblks);
    printf("# of mapped regions (hblks):           %d\n", mi.hblks);
    printf("Bytes in mapped regions (hblkhd):      %d\n", mi.hblkhd);
    printf("Max. total allocated space (usmblks):  %d\n", mi.usmblks);
    printf("Free bytes held in fastbins (fsmblks): %d\n", mi.fsmblks);
    printf("Total allocated space (uordblks):      %d\n", mi.uordblks);
    printf("Total free space (fordblks):           %d\n", mi.fordblks);
    printf("Topmost releasable block (keepcost):   %d\n", mi.keepcost);
}

int
main(int argc, char *argv[])
{
#define MAX_ALLOCS 2000000
    char *alloc[MAX_ALLOCS];
    int numBlocks, j, freeBegin, freeEnd, freeStep;
    size_t blockSize;

    if (argc &lt; 3 || strcmp(argv[1], "&minus;&minus;help") == 0)
        usageErr("%s num&minus;blocks block&minus;size [free&minus;step [start&minus;free "
                "[end&minus;free]]]\n", argv[0]);

    numBlocks = atoi(argv[1]);
    blockSize = atoi(argv[2]);
    freeStep = (argc &gt; 3) ? atoi(argv[3]) : 1;
    freeBegin = (argc &gt; 4) ? atoi(argv[4]) : 0;
    freeEnd = (argc &gt; 5) ? atoi(argv[5]) : numBlocks;

    printf("============== Before allocating blocks ==============\n");
    display_mallinfo();

    for (j = 0; j &lt; numBlocks; j++) {
        if (numBlocks &gt;= MAX_ALLOCS)
            fatal("Too many allocations");

        alloc[j] = malloc(blockSize);
        if (alloc[j] == NULL)
            errExit("malloc");
    }

    printf("\n============== After allocating blocks ==============\n");
    display_mallinfo();

    for (j = freeBegin; j &lt; freeEnd; j += freeStep)
        free(alloc[j]);

    printf("\n============== After freeing blocks ==============\n");
    display_mallinfo();

    exit(EXIT_SUCCESS);
}
</pre>
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="mallinfo-3_sect6" name="mallinfo-3_sect6" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman2/mmap.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        mmap
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/malloc.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        malloc
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/malloc_info.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        malloc_info
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/malloc_stats.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        malloc_stats
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/malloc_trim.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        malloc_trim
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/mallopt.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        mallopt
       </span>
       (3)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="mallinfo-3_sect7" name="mallinfo-3_sect7" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
