<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   strtok(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="strtok(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="strtok.3" name="strtok.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     strtok, strtok_r &mdash; extract tokens from strings
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;string.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            *
         <strong>
          strtok
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         str
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         delim
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            *
         <strong>
          strtok_r
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         str
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         delim
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char **
        <var class="pdparam">
         saveptr
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <div class="featuretests">
         <table style="border-collapse: collapse;">
          <colgroup span="1">
           <col span="1">
           </col>
          </colgroup>
          <thead>
           <tr>
            <th colspan="1" rowspan="1" style="">
             Feature Test Macro Requirements
                      for glibc (see
             <a class="link" href="../htmlman7/feature_test_macros.7.html" shape="rect" target="_top">
              <span class="citerefentry">
               <span class="refentrytitle">
                feature_test_macros
               </span>
               (7)
              </span>
             </a>
             ):
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              strtok_r
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _SVID_SOURCE
             </code>
             ||
             <code class="constant">
              _BSD_SOURCE
             </code>
             ||
             <code class="constant">
              _POSIX_C_SOURCE
             </code>
             &gt;= 1 ||
             <code class="constant">
              _XOPEN_SOURCE
             </code>
             ||
             <code class="constant">
              _POSIX_SOURCE
             </code>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="refsect1">
    <a id="strtok-3_sect1" name="strtok-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     The
     <code class="function">
      strtok
     </code>
     () function breaks
      a string into a sequence of zero or more nonempty tokens. On
      the first call to
     <code class="function">
      strtok
     </code>
     () the
      string to be parsed should be specified in
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     . In each subsequent call
      that should parse the same string,
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     must be NULL.
    </p>
    <p>
     The
     <em class="parameter">
      <code>
       delim
      </code>
     </em>
     argument
      specifies a set of bytes that delimit the tokens in the
      parsed string. The caller may specify different strings in
     <em class="parameter">
      <code>
       delim
      </code>
     </em>
     in successive
      calls that parse the same string.
    </p>
    <p>
     Each call to
     <code class="function">
      strtok
     </code>
     ()
      returns a pointer to a null-terminated string containing the
      next token. This string does not include the delimiting byte.
      If no more tokens are found,
     <code class="function">
      strtok
     </code>
     () returns NULL.
    </p>
    <p>
     A sequence of calls to
     <code class="function">
      strtok
     </code>
     () that operate on the same string
      maintains a pointer that determines the point from which to
      start searching for the next token. The first call to
     <code class="function">
      strtok
     </code>
     () sets this pointer to
      point to the first byte of the string. The start of the next
      token is determined by scanning forward for the next
      nondelimiter byte in
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     . If such a byte is found,
      it is taken as the start of the next token. If no such byte
      is found, then there are no more tokens, and
     <code class="function">
      strtok
     </code>
     () returns NULL. (A string that is
      empty or that contains only delimiters will thus cause
     <code class="function">
      strtok
     </code>
     () to return NULL on the
      first call.)
    </p>
    <p>
     The end of each token is found by scanning forward until
      either the next delimiter byte is found or until the
      terminating null byte ('\0') is encountered. If a delimiter
      byte is found, it is overwritten with a null byte to
      terminate the current token, and
     <code class="function">
      strtok
     </code>
     () saves a pointer to the following
      byte; that pointer will be used as the starting point when
      searching for the next token. In this case,
     <code class="function">
      strtok
     </code>
     () returns a pointer to the start of
      the found token.
    </p>
    <p>
     From the above description, it follows that a sequence of
      two or more contiguous delimiter bytes in the parsed string
      is considered to be a single delimiter, and that delimiter
      bytes at the start or end of the string are ignored. Put
      another way: the tokens returned by
     <code class="function">
      strtok
     </code>
     () are always nonempty strings. Thus,
      for example, given the string "
     <em class="replaceable">
      <code>
       aaa;;bbb,
      </code>
     </em>
     ", successive calls
      to
     <code class="function">
      strtok
     </code>
     () that specify the
      delimiter string "
     <em class="replaceable">
      <code>
       ;,
      </code>
     </em>
     " would return the strings
      "
     <code class="function">
      aaa
     </code>
     " and "
     <code class="function">
      bbb
     </code>
     ", and then a null pointer.
    </p>
    <p>
     The
     <code class="function">
      strtok_r
     </code>
     () function is a
      reentrant version
     <code class="function">
      strtok
     </code>
     (). The
     <em class="parameter">
      <code>
       saveptr
      </code>
     </em>
     argument is a
      pointer to a
     <span class="emphasis">
      <em>
       char *
      </em>
     </span>
     variable that is used internally by
     <code class="function">
      strtok_r
     </code>
     () in order to maintain context
      between successive calls that parse the same string.
    </p>
    <p>
     On the first call to
     <code class="function">
      strtok_r
     </code>
     (),
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     should point to the string
      to be parsed, and the value of
     <em class="parameter">
      <code>
       saveptr
      </code>
     </em>
     is ignored. In
      subsequent calls,
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     should be NULL, and
     <em class="parameter">
      <code>
       saveptr
      </code>
     </em>
     should be unchanged
      since the previous call.
    </p>
    <p>
     Different strings may be parsed concurrently using
      sequences of calls to
     <code class="function">
      strtok_r
     </code>
     () that specify different
     <em class="parameter">
      <code>
       saveptr
      </code>
     </em>
     arguments.
    </p>
   </div>
   <div class="refsect1">
    <a id="strtok-3_sect2" name="strtok-3_sect2" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     The
     <code class="function">
      strtok
     </code>
     () and
     <code class="function">
      strtok_r
     </code>
     () functions return a
      pointer to the next token, or NULL if there are no more
      tokens.
    </p>
   </div>
   <div class="refsect1">
    <a id="strtok-3_sect3" name="strtok-3_sect3" shape="rect">
    </a>
    <h2>
     ATTRIBUTES
    </h2>
    <div class="refsect2">
     <a id="strtok-3_sect4" name="strtok-3_sect4" shape="rect">
     </a>
     <h3>
      Multithreading (see pthreads(7))
     </h3>
     <p>
      The
      <code class="function">
       strtok
      </code>
      () function is
        not thread-safe.
     </p>
     <p>
      The
      <code class="function">
       strtok_r
      </code>
      () function is
        thread-safe.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="strtok-3_sect5" name="strtok-3_sect5" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <code class="function">
         strtok
        </code>
        ()
       </span>
      </dt>
      <dd>
       <p>
        SVr4, POSIX.1-2001, 4.3BSD, C89, C99.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="function">
         strtok_r
        </code>
        ()
       </span>
      </dt>
      <dd>
       <p>
        POSIX.1-2001.
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="strtok-3_sect6" name="strtok-3_sect6" shape="rect">
    </a>
    <h2>
     BUGS
    </h2>
    <p>
     Be cautious when using these functions. If you do use
      them, note that:
    </p>
    <div class="itemizedlist">
     <ul class="itemizedlist" style="list-style-type: disc;">
      <li class="listitem">
       <p>
        These functions modify their first argument.
       </p>
      </li>
      <li class="listitem">
       <p>
        These functions cannot be used on constant
            strings.
       </p>
      </li>
      <li class="listitem">
       <p>
        The identity of the delimiting byte is lost.
       </p>
      </li>
      <li class="listitem">
       <p>
        The
        <code class="function">
         strtok
        </code>
        () function
            uses a static buffer while parsing, so it's not thread
            safe. Use
        <code class="function">
         strtok_r
        </code>
        () if
            this matters to you.
       </p>
      </li>
     </ul>
    </div>
   </div>
   <div class="refsect1">
    <a id="strtok-3_sect7" name="strtok-3_sect7" shape="rect">
    </a>
    <h2>
     EXAMPLE
    </h2>
    <p>
     The program below uses nested loops that employ
     <code class="function">
      strtok_r
     </code>
     () to break a string
      into a two-level hierarchy of tokens. The first command-line
      argument specifies the string to be parsed. The second
      argument specifies the delimiter byte(s) to be used to
      separate that string into "major" tokens. The third argument
      specifies the delimiter byte(s) to be used to separate the
      "major" tokens into subtokens.
    </p>
    <p>
     An example of the output produced by this program is the
      following:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
$<span class="emphasis"><em> ./a.out 'a/bbb///cc;xxx:yyy:' ':;' '/'</em></span>
1: a/bbb///cc
         &minus;&minus;&gt; a
         &minus;&minus;&gt; bbb
         &minus;&minus;&gt; cc
2: xxx
         &minus;&minus;&gt; xxx
3: yyy
         &minus;&minus;&gt; yyy
</pre>
      </div>
     </blockquote>
    </div>
    <div class="refsect2">
     <a id="strtok-3_sect8" name="strtok-3_sect8" shape="rect">
     </a>
     <h3>
      Program source
     </h3>
     <div class="informalexample">
      <pre class="programlisting" xml:space="preserve">
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int
main(int argc, char *argv[])
{
    char *str1, *str2, *token, *subtoken;
    char *saveptr1, *saveptr2;
    int j;

    if (argc != 4) {
        fprintf(stderr, "Usage: %s string delim subdelim\n",
                argv[0]);
        exit(EXIT_FAILURE);
    }

    for (j = 1, str1 = argv[1]; ; j++, str1 = NULL) {
        token = strtok_r(str1, argv[2], &amp;saveptr1);
        if (token == NULL)
            break;
        printf("%d: %s\n", j, token);

        for (str2 = token; ; str2 = NULL) {
            subtoken = strtok_r(str2, argv[3], &amp;saveptr2);
            if (subtoken == NULL)
                break;
            printf("\t &minus;&minus;&gt; %s\n", subtoken);
        }
    }

    exit(EXIT_SUCCESS);
}
</pre>
     </div>
     <p>
      Another example program using
      <code class="function">
       strtok
      </code>
      () can be found in
      <a class="link" href="../htmlman3/getaddrinfo_a.3.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         getaddrinfo_a
        </span>
        (3)
       </span>
      </a>
      .
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="strtok-3_sect9" name="strtok-3_sect9" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman3/index.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        index
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/memchr.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        memchr
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/index.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        rindex
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/strchr.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strchr
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/string.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        string
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/strpbrk.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strpbrk
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/strsep.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strsep
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/strspn.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strspn
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/strstr.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strstr
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/wcstok.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        wcstok
       </span>
       (3)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="strtok-3_sect10" name="strtok-3_sect10" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
