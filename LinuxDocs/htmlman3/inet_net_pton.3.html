<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   inet_net_pton(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="inet_net_pton(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="inet-net-pton.3" name="inet-net-pton.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     inet_net_pton, inet_net_ntop &mdash; Internet network
      number conversion
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;arpa/inet.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          inet_net_pton
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         af
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         pres
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        void *
        <var class="pdparam">
         netp
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        size_t
        <var class="pdparam">
         nsize
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         char
            *
         <strong>
          inet_net_ntop
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         af
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const void *
        <var class="pdparam">
         netp
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         bits
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         pres
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        size_t
        <var class="pdparam">
         psize
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <div class="featuretests">
         <table style="border-collapse: collapse;">
          <colgroup span="1">
           <col span="1">
           </col>
          </colgroup>
          <thead>
           <tr>
            <th colspan="1" rowspan="1" style="">
             Feature Test Macro Requirements
                      for glibc (see
             <a class="link" href="../htmlman7/feature_test_macros.7.html" shape="rect" target="_top">
              <span class="citerefentry">
               <span class="refentrytitle">
                feature_test_macros
               </span>
               (7)
              </span>
             </a>
             ):
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              inet_net_pton
             </code>
             (),
             <code class="function">
              inet_net_ntop
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestver" colspan="1" rowspan="1" style="">
             Since
                      glibc 2.20:
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _DEFAULT_SOURCE
             </code>
            </td>
           </tr>
           <tr>
            <td class="featuretestver" colspan="1" rowspan="1" style="">
             Before
                      glibc 2.20:
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _BSD_SOURCE
             </code>
             ||
             <code class="constant">
              _SVID_SOURCE
             </code>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
       </td>
      </tr>
     </table>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <p>
         Link with
         <code class="option">
          &minus;lresolv
         </code>
         .
        </p>
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="refsect1">
    <a id="inet-net-pton-3_sect1" name="inet-net-pton-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     These functions convert network numbers between
      presentation (i.e., printable) format and network (i.e.,
      binary) format.
    </p>
    <p>
     For both functions,
     <em class="parameter">
      <code>
       af
      </code>
     </em>
     specifies the address family
      for the conversion; the only supported value is
     <code class="constant">
      AF_INET
     </code>
     .
    </p>
    <div class="refsect2">
     <a id="inet-net-pton-3_sect2" name="inet-net-pton-3_sect2" shape="rect">
     </a>
     <h3>
      inet_net_pton()
     </h3>
     <p>
      The
      <code class="function">
       inet_net_pton
      </code>
      ()
        function converts
      <em class="parameter">
       <code>
        pres
       </code>
      </em>
      , a null-terminated
        string containing an Internet network number in
        presentation format to network format. The result of the
        conversion, which is in network byte order, is placed in
        the buffer pointed to by
      <code class="function">
       net
      </code>
      .
        (The
      <em class="parameter">
       <code>
        netp
       </code>
      </em>
      argument
        typically points to an
      <code class="function">
       in_addr
      </code>
      structure.) The
      <em class="parameter">
       <code>
        nsize
       </code>
      </em>
      argument specifies the
        number of bytes available in
      <em class="parameter">
       <code>
        netp
       </code>
      </em>
      .
     </p>
     <p>
      On success,
      <code class="function">
       inet_net_pton
      </code>
      () returns the number of
        bits in the network number field of the result placed in
      <em class="parameter">
       <code>
        netp
       </code>
      </em>
      . For a
        discussion of the input presentation format and the return
        value, see NOTES.
     </p>
     <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
      <table border="0" summary="Note">
       <tr>
        <td align="center" colspan="1" rowspan="2" valign="top" width="25">
         <img alt="[Note]" src="../stylesheet/note.png"/>
        </td>
        <th align="left" colspan="1" rowspan="1">
         Note
        </th>
       </tr>
       <tr>
        <td align="left" colspan="1" rowspan="1" valign="top">
         <p>
          the buffer pointed to by
          <em class="parameter">
           <code>
            netp
           </code>
          </em>
          should be zeroed
                out before calling
          <code class="function">
           inet_net_pton
          </code>
          (), since the call
                writes only as many bytes as are required for the
                network number (or as are explicitly specified by
          <em class="parameter">
           <code>
            pres
           </code>
          </em>
          ),
                which may be less than the number of bytes in a
                complete network address.
         </p>
        </td>
       </tr>
      </table>
     </div>
    </div>
    <div class="refsect2">
     <a id="inet-net-pton-3_sect3" name="inet-net-pton-3_sect3" shape="rect">
     </a>
     <h3>
      inet_net_ntop()
     </h3>
     <p>
      The
      <code class="function">
       inet_net_ntop
      </code>
      ()
        function converts the network number in the buffer pointed
        to by
      <em class="parameter">
       <code>
        netp
       </code>
      </em>
      to
        presentation format; *
      <em class="parameter">
       <code>
        netp
       </code>
      </em>
      is interpreted as a
        value in network byte order. The
      <em class="parameter">
       <code>
        bits
       </code>
      </em>
      argument specifies the
        number of bits in the network number in *
      <em class="parameter">
       <code>
        netp
       </code>
      </em>
      .
     </p>
     <p>
      The null-terminated presentation-format string is placed
        in the buffer pointed to by
      <em class="parameter">
       <code>
        pres
       </code>
      </em>
      . The
      <em class="parameter">
       <code>
        psize
       </code>
      </em>
      argument specifies the
        number of bytes available in
      <em class="parameter">
       <code>
        pres
       </code>
      </em>
      . The presentation string
        is in CIDR format: a dotted-decimal number representing the
        network address, followed by a slash, and the size of the
        network number in bits.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="inet-net-pton-3_sect4" name="inet-net-pton-3_sect4" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     On success,
     <code class="function">
      inet_net_pton
     </code>
     ()
      returns the number of bits in the network number. On error,
      it returns &minus;1, and
     <code class="varname">
      errno
     </code>
     is set to indicate the cause of the error.
    </p>
    <p>
     On success,
     <code class="function">
      inet_net_ntop
     </code>
     ()
      returns
     <em class="parameter">
      <code>
       pres
      </code>
     </em>
     . On
      error, it returns NULL, and
     <code class="varname">
      errno
     </code>
     is set to indicate the cause of the
      error.
    </p>
   </div>
   <div class="refsect1">
    <a id="inet-net-pton-3_sect5" name="inet-net-pton-3_sect5" shape="rect">
    </a>
    <h2>
     ERRORS
    </h2>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <span class="errorname">
         EAFNOSUPPORT
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          af
         </code>
        </em>
        specified
            a value other than
        <code class="constant">
         AF_INET
        </code>
        .
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EMSGSIZE
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The size of the output buffer was insufficient.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENOENT
        </span>
       </span>
      </dt>
      <dd>
       <p>
        (
        <code class="function">
         inet_net_pton
        </code>
        ())
        <em class="parameter">
         <code>
          pres
         </code>
        </em>
        was not in
            correct presentation format.
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="inet-net-pton-3_sect6" name="inet-net-pton-3_sect6" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     The
     <code class="function">
      inet_net_pton
     </code>
     () and
     <code class="function">
      inet_net_ntop
     </code>
     () functions are
      nonstandard, but widely available.
    </p>
   </div>
   <div class="refsect1">
    <a id="inet-net-pton-3_sect7" name="inet-net-pton-3_sect7" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <div class="refsect2">
     <a id="inet-net-pton-3_sect8" name="inet-net-pton-3_sect8" shape="rect">
     </a>
     <h3>
      Input presentation format for inet_net_pton()
     </h3>
     <p>
      The network number may be specified either as a
        hexadecimal value or in dotted-decimal notation.
     </p>
     <p>
      Hexadecimal values are indicated by an initial "0x" or
        "0X". The hexadecimal digits populate the nibbles (half
        octets) of the network number from left to right in network
        byte order.
     </p>
     <p>
      In dotted-decimal notation, up to four octets are
        specified, as decimal numbers separated by dots. Thus, any
        of the following forms are accepted:
     </p>
     <p>
      a.b.c.d a.b.c a.b a
     </p>
     <p>
      Each part is a number in the range 0 to 255 that
        populates one byte of the resulting network number, going
        from left to right, in network-byte (big endian) order.
        Where a part is omitted, the resulting byte in the network
        number is zero.
     </p>
     <p>
      For either hexadecimal or dotted-decimal format, the
        network number can optionally be followed by a slash and a
        number in the range 0 to 32, which specifies the size of
        the network number in bits.
     </p>
    </div>
    <div class="refsect2">
     <a id="inet-net-pton-3_sect9" name="inet-net-pton-3_sect9" shape="rect">
     </a>
     <h3>
      Return value of inet_net_pton()
     </h3>
     <p>
      The return value of
      <code class="function">
       inet_net_pton
      </code>
      () is the number of bits in
        the network number field. If the input presentation string
        terminates with a slash and an explicit size value, then
        that size becomes the return value of
      <code class="function">
       inet_net_pton
      </code>
      (). Otherwise, the return
        value,
      <em class="parameter">
       <code>
        bits
       </code>
      </em>
      , is
        inferred as follows:
     </p>
     <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
       <li class="listitem">
        <p>
         If the most significant byte of the network number
              is greater than or equal to 240, then
         <em class="parameter">
          <code>
           bits
          </code>
         </em>
         is 32.
        </p>
       </li>
       <li class="listitem">
        <p>
         Otherwise, if the most significant byte of the
              network number is greater than or equal to 224, then
         <em class="parameter">
          <code>
           bits
          </code>
         </em>
         is
              4.
        </p>
       </li>
       <li class="listitem">
        <p>
         Otherwise, if the most significant byte of the
              network number is greater than or equal to 192, then
         <em class="parameter">
          <code>
           bits
          </code>
         </em>
         is
              24.
        </p>
       </li>
       <li class="listitem">
        <p>
         Otherwise, if the most significant byte of the
              network number is greater than or equal to 128, then
         <em class="parameter">
          <code>
           bits
          </code>
         </em>
         is
              16.
        </p>
       </li>
       <li class="listitem">
        <p>
         Otherwise,
         <em class="parameter">
          <code>
           bits
          </code>
         </em>
         is 8.
        </p>
       </li>
      </ul>
     </div>
     <p>
      If the resulting
      <em class="parameter">
       <code>
        bits
       </code>
      </em>
      value from the above
        steps is greater than or equal to 8, but the number of
        octets specified in the network number exceed
      <code class="function">
       bits/8
      </code>
      , then
      <em class="parameter">
       <code>
        bits
       </code>
      </em>
      is set to 8 times the
        number of octets actually specified.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="inet-net-pton-3_sect10" name="inet-net-pton-3_sect10" shape="rect">
    </a>
    <h2>
     EXAMPLE
    </h2>
    <p>
     The program below demonstrates the use of
     <code class="function">
      inet_net_pton
     </code>
     () and
     <code class="function">
      inet_net_ntop
     </code>
     (). It uses
     <code class="function">
      inet_net_pton
     </code>
     () to convert the presentation
      format network address provided in its first command-line
      argument to binary form, displays the return value from
     <code class="function">
      inet_net_pton
     </code>
     (). It then uses
     <code class="function">
      inet_net_ntop
     </code>
     () to convert the
      binary form back to presentation format, and displays the
      resulting string.
    </p>
    <p>
     In order to demonstrate that
     <code class="function">
      inet_net_pton
     </code>
     () may not write to all bytes
      of its
     <em class="parameter">
      <code>
       netp
      </code>
     </em>
     argument,
      the program allows an optional second command-line argument,
      a number used to initialize the buffer before
     <code class="function">
      inet_net_pton
     </code>
     () is called. As its final
      line of output, the program displays all of the bytes of the
      buffer returned by
     <code class="function">
      inet_net_pton
     </code>
     () allowing the user to see
      which bytes have not been touched by
     <code class="function">
      inet_net_pton
     </code>
     ().
    </p>
    <p>
     An example run, showing that
     <code class="function">
      inet_net_pton
     </code>
     () infers the number of bits
      in the network number:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
$ <span class="emphasis"><em>./a.out 193.168</em></span>
inet_net_pton() returned: 24
inet_net_ntop() yielded:  193.168.0/24
Raw address:              c1a80000
</pre>
      </div>
     </blockquote>
    </div>
    <p>
     Demonstrate that
     <code class="function">
      inet_net_pton
     </code>
     () does not zero out unused
      bytes in its result buffer:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
$ <span class="emphasis"><em>./a.out 193.168 0xffffffff</em></span>
inet_net_pton() returned: 24
inet_net_ntop() yielded:  193.168.0/24
Raw address:              c1a800ff
</pre>
      </div>
     </blockquote>
    </div>
    <p>
     Demonstrate that
     <code class="function">
      inet_net_pton
     </code>
     () will widen the inferred
      size of the network number, if the supplied number of bytes
      in the presentation string exceeds the inferred value:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
$ <span class="emphasis"><em>./a.out 193.168.1.128</em></span>
inet_net_pton() returned: 32
inet_net_ntop() yielded:  193.168.1.128/32
Raw address:              c1a80180
</pre>
      </div>
     </blockquote>
    </div>
    <p>
     Explicitly specifying the size of the network number
      overrides any inference about its size (but any extra bytes
      that are explicitly specified will still be used by
     <code class="function">
      inet_net_pton
     </code>
     (): to populate
      the result buffer):
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
$ <span class="emphasis"><em>./a.out 193.168.1.128/24</em></span>
inet_net_pton() returned: 24
inet_net_ntop() yielded:  193.168.1/24
Raw address:              c1a80180
</pre>
      </div>
     </blockquote>
    </div>
    <div class="refsect2">
     <a id="inet-net-pton-3_sect11" name="inet-net-pton-3_sect11" shape="rect">
     </a>
     <h3>
      Program source
     </h3>
     <div class="informalexample">
      <pre class="programlisting" xml:space="preserve">
/* Link with "&minus;lresolv" */

#include &lt;arpa/inet.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define errExit(msg)    do { perror(msg); exit(EXIT_FAILURE); \
                        } while (0)

int
main(int argc, char *argv[])
{
    char buf[100];
    struct in_addr addr;
    int bits;

    if (argc &lt; 2) {
        fprintf(stderr,
                "Usage: %s presentation&minus;form [addr&minus;init&minus;value]\n",
                argv[0]);
        exit(EXIT_FAILURE);
    }

    /* If argv[2] is supplied (a numeric value), use it to initialize
       the output buffer given to inet_net_pton(), so that we can see
       that inet_net_pton() initializes only those bytes needed for
       the network number. If argv[2] is not supplied, then initialize
       the buffer to zero (as is recommended practice). */

    addr.s_addr = (argc &gt; 2) ? strtod(argv[2], NULL) : 0;

    /* Convert presentation network number in argv[1] to binary */

    bits = inet_net_pton(AF_INET, argv[1], &amp;addr, sizeof(addr));
    if (bits == &minus;1)
        errExit("inet_net_ntop");

    printf("inet_net_pton() returned: %d\n", bits);

    /* Convert binary format back to presentation, using 'bits'
       returned by inet_net_pton() */

    if (inet_net_ntop(AF_INET, &amp;addr, bits, buf, sizeof(buf)) == NULL)
        errExit("inet_net_ntop");

    printf("inet_net_ntop() yielded:  %s\n", buf);

    /* Display 'addr' in raw form (in network byte order), so we can
       see bytes not displayed by inet_net_ntop(); some of those bytes
       may not have been touched by inet_net_ntop(), and so will still
       have any initial value that was specified in argv[2]. */

    printf("Raw address:              %x\n", htonl(addr.s_addr));

    exit(EXIT_SUCCESS);
}
</pre>
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="inet-net-pton-3_sect12" name="inet-net-pton-3_sect12" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman3/inet.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        inet
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman5/networks.5.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        networks
       </span>
       (5)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="inet-net-pton-3_sect13" name="inet-net-pton-3_sect13" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
