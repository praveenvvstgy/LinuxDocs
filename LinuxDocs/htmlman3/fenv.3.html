<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   fenv(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="fenv(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="fenv.3" name="fenv.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     feclearexcept, fegetexceptflag, feraiseexcept,
      fesetexceptflag, fetestexcept, fegetenv, fegetround,
      feholdexcept, fesetround, fesetenv, feupdateenv,
      feenableexcept, fedisableexcept, fegetexcept &mdash;
      floating-point rounding and exception handling
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;fenv.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          feclearexcept
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         excepts
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          fegetexceptflag
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        fexcept_t *
        <var class="pdparam">
         flagp
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         excepts
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          feraiseexcept
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         excepts
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          fesetexceptflag
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const fexcept_t *
        <var class="pdparam">
         flagp
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         excepts
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          fetestexcept
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         excepts
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          fegetround
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        <code>
         void)
        </code>
        ;
       </td>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          fesetround
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         rounding_mode
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          fegetenv
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        fenv_t *
        <var class="pdparam">
         envp
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          feholdexcept
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        fenv_t *
        <var class="pdparam">
         envp
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          fesetenv
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const fenv_t *
        <var class="pdparam">
         envp
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          feupdateenv
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const fenv_t *
        <var class="pdparam">
         envp
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <p>
         Link with
         <code class="option">
          &minus;lm
         </code>
         .
        </p>
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="refsect1">
    <a id="fenv-3_sect1" name="fenv-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     These eleven functions were defined in C99, and describe
      the handling of floating-point rounding and exceptions
      (overflow, zero-divide, etc.).
    </p>
    <div class="refsect2">
     <a id="fenv-3_sect2" name="fenv-3_sect2" shape="rect">
     </a>
     <h3>
      Exceptions
     </h3>
     <p>
      The
      <em class="replaceable">
       <code>
        divide-by-zero
       </code>
      </em>
      exception
        occurs when an operation on finite numbers produces
        infinity as exact answer.
     </p>
     <p>
      The
      <code class="function">
       overflow
      </code>
      exception
        occurs when a result has to be represented as a
        floating-point number, but has (much) larger absolute value
        than the largest (finite) floating-point number that is
        representable.
     </p>
     <p>
      The
      <code class="function">
       underflow
      </code>
      exception
        occurs when a result has to be represented as a
        floating-point number, but has smaller absolute value than
        the smallest positive normalized floating-point number (and
        would lose much accuracy when represented as a denormalized
        number).
     </p>
     <p>
      The
      <span class="emphasis">
       <em>
        inexact
       </em>
      </span>
      exception occurs when the rounded result of an operation is
        not equal to the infinite precision result. It may occur
        whenever
      <code class="function">
       overflow
      </code>
      or
      <code class="function">
       underflow
      </code>
      occurs.
     </p>
     <p>
      The
      <code class="function">
       invalid
      </code>
      exception
        occurs when there is no well-defined result for an
        operation, as for 0/0 or infinity &minus; infinity or
        sqrt(&minus;1).
     </p>
    </div>
    <div class="refsect2">
     <a id="fenv-3_sect3" name="fenv-3_sect3" shape="rect">
     </a>
     <h3>
      Exception handling
     </h3>
     <p>
      Exceptions are represented in two ways: as a single bit
        (exception present/absent), and these bits correspond in
        some implementation-defined way with bit positions in an
        integer, and also as an opaque structure that may contain
        more information about the exception (perhaps the code
        address where it occurred).
     </p>
     <p>
      Each of the macros
      <code class="constant">
       FE_DIVBYZERO
      </code>
      ,
      <code class="constant">
       FE_INEXACT
      </code>
      ,
      <code class="constant">
       FE_INVALID
      </code>
      ,
      <code class="constant">
       FE_OVERFLOW
      </code>
      ,
      <code class="constant">
       FE_UNDERFLOW
      </code>
      is defined when the
        implementation supports handling of the corresponding
        exception, and if so then defines the corresponding bit(s),
        so that one can call exception handling functions, for
        example, using the integer argument
      <code class="constant">
       FE_OVERFLOW
      </code>
      |
      <code class="constant">
       FE_UNDERFLOW
      </code>
      . Other exceptions may be
        supported. The macro
      <code class="constant">
       FE_ALL_EXCEPT
      </code>
      is the bitwise OR of all
        bits corresponding to supported exceptions.
     </p>
     <p>
      The
      <code class="function">
       feclearexcept
      </code>
      ()
        function clears the supported exceptions represented by the
        bits in its argument.
     </p>
     <p>
      The
      <code class="function">
       fegetexceptflag
      </code>
      ()
        function stores a representation of the state of the
        exception flags represented by the argument
      <em class="parameter">
       <code>
        excepts
       </code>
      </em>
      in the opaque object
        *
      <em class="parameter">
       <code>
        flagp
       </code>
      </em>
      .
     </p>
     <p>
      The
      <code class="function">
       feraiseexcept
      </code>
      ()
        function raises the supported exceptions represented by the
        bits in
      <em class="parameter">
       <code>
        excepts
       </code>
      </em>
      .
     </p>
     <p>
      The
      <code class="function">
       fesetexceptflag
      </code>
      ()
        function sets the complete status for the exceptions
        represented by
      <em class="parameter">
       <code>
        excepts
       </code>
      </em>
      to the value
        *
      <em class="parameter">
       <code>
        flagp
       </code>
      </em>
      . This value
        must have been obtained by an earlier call of
      <code class="function">
       fegetexceptflag
      </code>
      () with a last argument
        that contained all bits in
      <em class="parameter">
       <code>
        excepts
       </code>
      </em>
      .
     </p>
     <p>
      The
      <code class="function">
       fetestexcept
      </code>
      ()
        function returns a word in which the bits are set that were
        set in the argument
      <em class="parameter">
       <code>
        excepts
       </code>
      </em>
      and for which the
        corresponding exception is currently set.
     </p>
    </div>
    <div class="refsect2">
     <a id="fenv-3_sect4" name="fenv-3_sect4" shape="rect">
     </a>
     <h3>
      Rounding mode
     </h3>
     <p>
      The rounding mode determines how the result of
        floating-point operations is treated when the result cannot
        be exactly represented in the significand. Various rounding
        modes may be provided: round to nearest (the default),
        round up (toward positive infinity), round down (toward
        negative infinity), and round toward zero.
     </p>
     <p>
      Each of the macros
      <code class="constant">
       FE_TONEAREST
      </code>
      ,
      <code class="constant">
       FE_UPWARD
      </code>
      ,
      <code class="constant">
       FE_DOWNWARD
      </code>
      , and
      <code class="constant">
       FE_TOWARDZERO
      </code>
      is defined when the
        implementation supports getting and setting the
        corresponding rounding direction.
     </p>
     <p>
      The
      <code class="function">
       fegetround
      </code>
      () function
        returns the macro corresponding to the current rounding
        mode.
     </p>
     <p>
      The
      <code class="function">
       fesetround
      </code>
      () function
        sets the rounding mode as specified by its argument and
        returns zero when it was successful.
     </p>
     <p>
      C99 and POSIX.1-2008 specify an identifier,
      <code class="constant">
       FLT_ROUNDS
      </code>
      , defined in
      <code class="literal">
       &lt;
      </code>
      <code class="filename">
       float.h
      </code>
      <code class="literal">
       &gt;
      </code>
      which indicates the implementation-defined rounding
        behavior for floating-point addition. This identifier has
        one of the following values:
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <span class="emphasis">
          <em>
           &minus;1
          </em>
         </span>
        </span>
       </dt>
       <dd>
        <p>
         The rounding mode is not determinable.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          0
         </code>
        </span>
       </dt>
       <dd>
        <p>
         Rounding is toward 0.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          1
         </code>
        </span>
       </dt>
       <dd>
        <p>
         Rounding is toward nearest number.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          2
         </code>
        </span>
       </dt>
       <dd>
        <p>
         Rounding is toward positive infinity.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          3
         </code>
        </span>
       </dt>
       <dd>
        <p>
         Rounding is toward negative infinity.
        </p>
       </dd>
      </dl>
     </div>
     <p>
      Other values represent machine-dependent, nonstandard
        rounding modes.
     </p>
     <p>
      The value of
      <code class="constant">
       FLT_ROUNDS
      </code>
      should reflect the current rounding mode as set by
      <code class="function">
       fesetround
      </code>
      () (but see
        BUGS).
     </p>
    </div>
    <div class="refsect2">
     <a id="fenv-3_sect5" name="fenv-3_sect5" shape="rect">
     </a>
     <h3>
      Floating-point environment
     </h3>
     <p>
      The entire floating-point environment, including control
        modes and status flags, can be handled as one opaque
        object, of type
      <span class="type">
       fenv_t
      </span>
      . The
        default environment is denoted by
      <code class="constant">
       FE_DFL_ENV
      </code>
      (of type
      <span class="type">
       const fenv_t *
      </span>
      ). This is the environment
        setup at program start and it is defined by ISO C to have
        round to nearest, all exceptions cleared and a nonstop
        (continue on exceptions) mode.
     </p>
     <p>
      The
      <code class="function">
       fegetenv
      </code>
      () function
        saves the current floating-point environment in the object
        *
      <em class="parameter">
       <code>
        envp
       </code>
      </em>
      .
     </p>
     <p>
      The
      <code class="function">
       feholdexcept
      </code>
      ()
        function does the same, then clears all exception flags,
        and sets a nonstop (continue on exceptions) mode, if
        available. It returns zero when successful.
     </p>
     <p>
      The
      <code class="function">
       fesetenv
      </code>
      () function
        restores the floating-point environment from the object
        *
      <em class="parameter">
       <code>
        envp
       </code>
      </em>
      . This object
        must be known to be valid, for example, the result of a
        call to
      <code class="function">
       fegetenv
      </code>
      () or
      <code class="function">
       feholdexcept
      </code>
      () or equal to
      <code class="constant">
       FE_DFL_ENV
      </code>
      . This call does
        not raise exceptions.
     </p>
     <p>
      The
      <code class="function">
       feupdateenv
      </code>
      () function
        installs the floating-point environment represented by the
        object *
      <em class="parameter">
       <code>
        envp
       </code>
      </em>
      ,
        except that currently raised exceptions are not cleared.
        After calling this function, the raised exceptions will be
        a bitwise OR of those previously set with those in
        *
      <em class="parameter">
       <code>
        envp
       </code>
      </em>
      . As before,
        the object *
      <em class="parameter">
       <code>
        envp
       </code>
      </em>
      must be known to be valid.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="fenv-3_sect6" name="fenv-3_sect6" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     These functions return zero on success and nonzero if an
      error occurred.
    </p>
   </div>
   <div class="refsect1">
    <a id="fenv-3_sect7" name="fenv-3_sect7" shape="rect">
    </a>
    <h2>
     VERSIONS
    </h2>
    <p>
     These functions first appeared in glibc in version
      2.1.
    </p>
   </div>
   <div class="refsect1">
    <a id="fenv-3_sect8" name="fenv-3_sect8" shape="rect">
    </a>
    <h2>
     ATTRIBUTES
    </h2>
    <div class="refsect2">
     <a id="fenv-3_sect9" name="fenv-3_sect9" shape="rect">
     </a>
     <h3>
      Multithreading (see pthreads(7))
     </h3>
     <p>
      The
      <code class="function">
       feclearexcept
      </code>
      (),
      <code class="function">
       fegetexceptflag
      </code>
      (),
      <code class="function">
       fegetexceptflag
      </code>
      (),
      <code class="function">
       fesetexceptflag
      </code>
      (),
      <code class="function">
       fetestexcept
      </code>
      (),
      <code class="function">
       fegetround
      </code>
      (),
      <code class="function">
       fesetround
      </code>
      (),
      <code class="function">
       fegetenv
      </code>
      (),
      <code class="function">
       feholdexcept
      </code>
      (),
      <code class="function">
       fesetenv
      </code>
      (),
      <code class="function">
       feupdateenv
      </code>
      (),
      <code class="function">
       feenableexcept
      </code>
      (),
      <code class="function">
       fedisableexcept
      </code>
      (), and
      <code class="function">
       fegetexcept
      </code>
      () functions are
        thread-safe.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="fenv-3_sect10" name="fenv-3_sect10" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     IEC 60559 (IEC 559:1989), ANSI/IEEE 854, C99,
      POSIX.1-2001.
    </p>
   </div>
   <div class="refsect1">
    <a id="fenv-3_sect11" name="fenv-3_sect11" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <div class="refsect2">
     <a id="fenv-3_sect12" name="fenv-3_sect12" shape="rect">
     </a>
     <h3>
      Glibc notes
     </h3>
     <p>
      If possible, the GNU C Library defines a macro
      <code class="constant">
       FE_NOMASK_ENV
      </code>
      which
        represents an environment where every exception raised
        causes a trap to occur. You can test for this macro using
      <code class="literal">
       #ifdef
      </code>
      . It is defined only if
      <code class="constant">
       _GNU_SOURCE
      </code>
      is defined. The
        C99 standard does not define a way to set individual bits
        in the floating-point mask, for example, to trap on
        specific flags. Since version 2.2, glibc supports the
        functions
      <code class="function">
       feenableexcept
      </code>
      ()
        and
      <code class="function">
       fedisableexcept
      </code>
      () to set
        individual floating-point traps, and
      <code class="function">
       fegetexcept
      </code>
      () to query the state.
     </p>
     <div class="informalexample">
      <pre class="programlisting" xml:space="preserve">
<span class="emphasis"><em>#define _GNU_SOURCE</em></span>         /* See feature_test_macros(7) */
<span class="emphasis"><em>#include &lt;fenv.h&gt;</em></span>

  <code class="function">int feenableexcept</code>(<em class="parameter"><code>int excepts</code></em>);
  <code class="function">int fedisableexcept</code>(<em class="parameter"><code>int excepts</code></em>);
<span class="emphasis"><em>int fegetexcept(void);</em></span>
</pre>
     </div>
     <p>
      The
      <code class="function">
       feenableexcept
      </code>
      () and
      <code class="function">
       fedisableexcept
      </code>
      () functions
        enable (disable) traps for each of the exceptions
        represented by
      <em class="parameter">
       <code>
        excepts
       </code>
      </em>
      and return the
        previous set of enabled exceptions when successful, and
        &minus;1 otherwise. The
      <code class="function">
       fegetexcept
      </code>
      () function returns the set of
        all currently enabled exceptions.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="fenv-3_sect13" name="fenv-3_sect13" shape="rect">
    </a>
    <h2>
     BUGS
    </h2>
    <p>
     C99 specifies that the value of
     <code class="constant">
      FLT_ROUNDS
     </code>
     should reflect changes to the
      current rounding mode, as set by
     <code class="function">
      fesetround
     </code>
     (). Currently, this does not
      occur:
     <code class="constant">
      FLT_ROUNDS
     </code>
     always has
      the value 1.
    </p>
   </div>
   <div class="refsect1">
    <a id="fenv-3_sect14" name="fenv-3_sect14" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman7/math_error.7.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        math_error
       </span>
       (7)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="fenv-3_sect15" name="fenv-3_sect15" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
