<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   mkstemp(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="mkstemp(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="mkstemp.3" name="mkstemp.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     mkstemp, mkostemp, mkstemps, mkostemps &mdash; create a
      unique temporary file
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;stdlib.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          mkstemp
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         template
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          mkostemp
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         template
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         flags
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          mkstemps
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         template
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         suffixlen
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          mkostemps
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         template
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         suffixlen
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         flags
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <div class="featuretests">
         <table style="border-collapse: collapse;">
          <colgroup span="1">
           <col span="1">
           </col>
          </colgroup>
          <thead>
           <tr>
            <th colspan="1" rowspan="1" style="">
             Feature Test Macro Requirements
                      for glibc (see
             <a class="link" href="../htmlman7/feature_test_macros.7.html" shape="rect" target="_top">
              <span class="citerefentry">
               <span class="refentrytitle">
                feature_test_macros
               </span>
               (7)
              </span>
             </a>
             ):
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              mkstemp
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _BSD_SOURCE
             </code>
             ||
             <code class="constant">
              _SVID_SOURCE
             </code>
             ||
             <code class="constant">
              _XOPEN_SOURCE
             </code>
             &gt;= 500 ||
             <code class="constant">
              _XOPEN_SOURCE
             </code>
             &amp;&amp;
             <code class="constant">
              _XOPEN_SOURCE_EXTENDED
             </code>
            </td>
           </tr>
           <tr>
            <td class="featuretestver" colspan="1" rowspan="1" style="">
             || /*
                      Since glibc 2.12: */
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _POSIX_C_SOURCE
             </code>
             &gt;= 200112L
            </td>
           </tr>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              mkostemp
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _GNU_SOURCE
             </code>
            </td>
           </tr>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              mkstemps
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _BSD_SOURCE
             </code>
             ||
             <code class="constant">
              _SVID_SOURCE
             </code>
            </td>
           </tr>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              mkostemps
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _GNU_SOURCE
             </code>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="refsect1">
    <a id="mkstemp-3_sect1" name="mkstemp-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     The
     <code class="function">
      mkstemp
     </code>
     () function
      generates a unique temporary filename from
     <em class="parameter">
      <code>
       template
      </code>
     </em>
     , creates and opens the
      file, and returns an open file descriptor for the file.
    </p>
    <p>
     The last six characters of
     <em class="parameter">
      <code>
       template
      </code>
     </em>
     must be "XXXXXX" and
      these are replaced with a string that makes the filename
      unique. Since it will be modified,
     <em class="parameter">
      <code>
       template
      </code>
     </em>
     must not be a string
      constant, but should be declared as a character array.
    </p>
    <p>
     The file is created with permissions 0600, that is, read
      plus write for owner only. The returned file descriptor
      provides both read and write access to the file. The file is
      opened with the
     <a class="link" href="../htmlman2/open.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        open
       </span>
       (2)
      </span>
     </a>
     <code class="constant">
      O_EXCL
     </code>
     flag, guaranteeing that the caller
      is the process that creates the file.
    </p>
    <p>
     The
     <code class="function">
      mkostemp
     </code>
     () function is
      like
     <code class="function">
      mkstemp
     </code>
     (), with the
      difference that the following bits&mdash;with the same
      meaning as for
     <a class="link" href="../htmlman2/open.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        open
       </span>
       (2)
      </span>
     </a>
     \(emmay be specified
      in
     <em class="parameter">
      <code>
       flags
      </code>
     </em>
     :
     <code class="constant">
      O_APPEND
     </code>
     ,
     <code class="constant">
      O_CLOEXEC
     </code>
     , and
     <code class="constant">
      O_SYNC
     </code>
     . Note that when creating the file,
     <code class="function">
      mkostemp
     </code>
     () includes the values
     <code class="constant">
      O_RDWR
     </code>
     ,
     <code class="constant">
      O_CREAT
     </code>
     , and
     <code class="constant">
      O_EXCL
     </code>
     in the
     <em class="parameter">
      <code>
       flags
      </code>
     </em>
     argument given to
     <a class="link" href="../htmlman2/open.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        open
       </span>
       (2)
      </span>
     </a>
     ; including these
      values in the
     <em class="parameter">
      <code>
       flags
      </code>
     </em>
     argument given to
     <code class="function">
      mkostemp
     </code>
     () is
      unnecessary, and produces errors on some systems.
    </p>
    <p>
     The
     <code class="function">
      mkstemps
     </code>
     () function is
      like
     <code class="function">
      mkstemp
     </code>
     (), except that the
      string in
     <em class="parameter">
      <code>
       template
      </code>
     </em>
     contains a suffix of
     <em class="parameter">
      <code>
       suffixlen
      </code>
     </em>
     characters. Thus,
     <em class="parameter">
      <code>
       template
      </code>
     </em>
     is of the
      form
     <code class="function">
      prefixXXXXXXsuffix
     </code>
     , and
      the string XXXXXX is modified as for
     <code class="function">
      mkstemp
     </code>
     ().
    </p>
    <p>
     The
     <code class="function">
      mkostemps
     </code>
     () function is
      to
     <code class="function">
      mkstemps
     </code>
     () as
     <code class="function">
      mkostemp
     </code>
     () is to
     <code class="function">
      mkstemp
     </code>
     ().
    </p>
   </div>
   <div class="refsect1">
    <a id="mkstemp-3_sect2" name="mkstemp-3_sect2" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     On success, these functions return the file descriptor of
      the temporary file. On error, &minus;1 is returned, and
     <code class="varname">
      errno
     </code>
     is set appropriately.
    </p>
   </div>
   <div class="refsect1">
    <a id="mkstemp-3_sect3" name="mkstemp-3_sect3" shape="rect">
    </a>
    <h2>
     ERRORS
    </h2>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <span class="errorname">
         EEXIST
        </span>
       </span>
      </dt>
      <dd>
       <p>
        Could not create a unique temporary filename. Now
            the contents of
        <em class="parameter">
         <code>
          template
         </code>
        </em>
        are
            undefined.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EINVAL
        </span>
       </span>
      </dt>
      <dd>
       <p>
        For
        <code class="function">
         mkstemp
        </code>
        () and
        <code class="function">
         mkostemp
        </code>
        (): The last six
            characters of
        <em class="parameter">
         <code>
          template
         </code>
        </em>
        were not XXXXXX;
            now
        <em class="parameter">
         <code>
          template
         </code>
        </em>
        is
            unchanged.
       </p>
       <p>
        For
        <code class="function">
         mkstemps
        </code>
        () and
        <code class="function">
         mkostemps
        </code>
        ():
        <em class="parameter">
         <code>
          template
         </code>
        </em>
        is less than
        <span class="emphasis">
         <em>
          (6 + suffixlen)
         </em>
        </span>
        characters long, or the last 6 characters before the
            suffix in
        <em class="parameter">
         <code>
          template
         </code>
        </em>
        were not
            XXXXXX.
       </p>
      </dd>
     </dl>
    </div>
    <p>
     These functions may also fail with any of the errors
      described for
     <a class="link" href="../htmlman2/open.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        open
       </span>
       (2)
      </span>
     </a>
     .
    </p>
   </div>
   <div class="refsect1">
    <a id="mkstemp-3_sect4" name="mkstemp-3_sect4" shape="rect">
    </a>
    <h2>
     VERSIONS
    </h2>
    <p>
     <code class="function">
      mkostemp
     </code>
     () is available
      since glibc 2.7.
     <code class="function">
      mkstemps
     </code>
     () and
     <code class="function">
      mkostemps
     </code>
     () are available since
      glibc 2.11.
    </p>
   </div>
   <div class="refsect1">
    <a id="mkstemp-3_sect5" name="mkstemp-3_sect5" shape="rect">
    </a>
    <h2>
     ATTRIBUTES
    </h2>
    <div class="refsect2">
     <a id="mkstemp-3_sect6" name="mkstemp-3_sect6" shape="rect">
     </a>
     <h3>
      Multithreading (see pthreads(7))
     </h3>
     <p>
      The
      <code class="function">
       mkstemp
      </code>
      (),
      <code class="function">
       mkostemp
      </code>
      (),
      <code class="function">
       mkstemps
      </code>
      (), and
      <code class="function">
       mkostemps
      </code>
      () functions are
        thread-safe.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="mkstemp-3_sect7" name="mkstemp-3_sect7" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     <code class="function">
      mkstemp
     </code>
     (): 4.3BSD,
      POSIX.1-2001.
    </p>
    <p>
     <code class="function">
      mkstemps
     </code>
     (): unstandardized,
      but appears on several other systems.
    </p>
    <p>
     <code class="function">
      mkostemp
     </code>
     () and
     <code class="function">
      mkostemps
     </code>
     (): are glibc extensions.
    </p>
   </div>
   <div class="refsect1">
    <a id="mkstemp-3_sect8" name="mkstemp-3_sect8" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <p>
     In glibc versions 2.06 and earlier, the file is created
      with permissions 0666, that is, read and write for all users.
      This old behavior may be a security risk, especially since
      other UNIX flavors use 0600, and somebody might overlook this
      detail when porting programs. POSIX.1-2008 adds a requirement
      that the file be created with mode 0600.
    </p>
    <p>
     More generally, the POSIX specification of
     <code class="function">
      mkstemp
     </code>
     () does not say anything about file
      modes, so the application should make sure its file mode
      creation mask (see
     <a class="link" href="../htmlman2/umask.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        umask
       </span>
       (2)
      </span>
     </a>
     ) is set
      appropriately before calling
     <code class="function">
      mkstemp
     </code>
     () (and
     <code class="function">
      mkostemp
     </code>
     ()).
    </p>
   </div>
   <div class="refsect1">
    <a id="mkstemp-3_sect9" name="mkstemp-3_sect9" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman3/mkdtemp.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        mkdtemp
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/mktemp.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        mktemp
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/tempnam.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        tempnam
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/tmpfile.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        tmpfile
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/tmpnam.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        tmpnam
       </span>
       (3)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="mkstemp-3_sect10" name="mkstemp-3_sect10" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
