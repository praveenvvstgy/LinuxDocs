<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   getopt(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="getopt(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="getopt.3" name="getopt.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     getopt, getopt_long, getopt_long_only, optarg, optind,
      opterr, optopt &mdash; Parse command-line options
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;unistd.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          getopt
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         argc
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char * const
        <var class="pdparam">
         argv[]
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         optstring
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">

extern char *optarg;
extern int optind, opterr, optopt;

#include &lt;getopt.h&gt;
</pre>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          getopt_long
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         argc
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char * const
        <var class="pdparam">
         argv[]
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         optstring
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const struct option *
        <var class="pdparam">
         longopts
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int *
        <var class="pdparam">
         longindex
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          getopt_long_only
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         argc
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char * const
        <var class="pdparam">
         argv[]
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         optstring
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const struct option *
        <var class="pdparam">
         longopts
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int *
        <var class="pdparam">
         longindex
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <div class="featuretests">
         <table style="border-collapse: collapse;">
          <colgroup span="1">
           <col span="1">
           </col>
          </colgroup>
          <thead>
           <tr>
            <th colspan="1" rowspan="1" style="">
             Feature Test Macro Requirements
                      for glibc (see
             <a class="link" href="../htmlman7/feature_test_macros.7.html" shape="rect" target="_top">
              <span class="citerefentry">
               <span class="refentrytitle">
                feature_test_macros
               </span>
               (7)
              </span>
             </a>
             ):
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              getopt
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _POSIX_C_SOURCE
             </code>
             &gt;= 2 ||
             <code class="constant">
              _XOPEN_SOURCE
             </code>
            </td>
           </tr>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              getopt_long
             </code>
             (),
             <code class="function">
              getopt_long_only
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _GNU_SOURCE
             </code>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="refsect1">
    <a id="getopt-3_sect1" name="getopt-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     The
     <code class="function">
      getopt
     </code>
     () function parses
      the command-line arguments. Its arguments
     <em class="parameter">
      <code>
       argc
      </code>
     </em>
     and
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     are the argument count and
      array as passed to the
     <code class="function">
      main
     </code>
     ()
      function on program invocation. An element of
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     that starts with '&minus;'
      (and is not exactly "&minus;" or "&minus;&minus;") is an
      option element. The characters of this element (aside from
      the initial '&minus;') are option characters. If
     <code class="function">
      getopt
     </code>
     () is called repeatedly, it returns
      successively each of the option characters from each of the
      option elements.
    </p>
    <p>
     The variable
     <code class="varname">
      optind
     </code>
     is the
      index of the next element to be processed in
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     . The system initializes
      this value to 1. The caller can reset it to 1 to restart
      scanning of the same
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     , or when scanning a new
      argument vector.
    </p>
    <p>
     If
     <code class="function">
      getopt
     </code>
     () finds another
      option character, it returns that character, updating the
      external variable
     <code class="varname">
      optind
     </code>
     and a
      static variable
     <code class="varname">
      nextchar
     </code>
     so that
      the next call to
     <code class="function">
      getopt
     </code>
     () can
      resume the scan with the following option character or
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     -element.
    </p>
    <p>
     If there are no more option characters,
     <code class="function">
      getopt
     </code>
     () returns &minus;1. Then
     <code class="varname">
      optind
     </code>
     is the index in
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     of the first
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     -element that is
      not an option.
    </p>
    <p>
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     is a
      string containing the legitimate option characters. If such a
      character is followed by a colon, the option requires an
      argument, so
     <code class="function">
      getopt
     </code>
     () places a
      pointer to the following text in the same
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     -element, or the text of
      the following
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     -element, in
     <code class="varname">
      optarg
     </code>
     . Two colons mean an option takes an
      optional arg; if there is text in the current
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     -element (i.e., in the same
      word as the option name itself, for example, "&minus;oarg"),
      then it is returned in
     <code class="varname">
      optarg
     </code>
     ,
      otherwise
     <code class="varname">
      optarg
     </code>
     is set to zero.
      This is a GNU extension. If
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     contains
     <code class="constant">
      W
     </code>
     followed by a semicolon, then
     <code class="option">
      &minus;W foo
     </code>
     is treated as the
      long option
     <code class="option">
      &minus;&minus;foo
     </code>
     .
      (The
     <code class="option">
      &minus;W
     </code>
     option is reserved
      by POSIX.2 for implementation extensions.) This behavior is a
      GNU extension, not available with libraries before glibc
      2.
    </p>
    <p>
     By default,
     <code class="function">
      getopt
     </code>
     ()
      permutes the contents of
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     as it scans, so that
      eventually all the nonoptions are at the end. Two other modes
      are also implemented. If the first character of
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     is '+' or the
      environment variable
     <code class="constant">
      POSIXLY_CORRECT
     </code>
     is set, then option
      processing stops as soon as a nonoption argument is
      encountered. If the first character of
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     is '&minus;', then
      each nonoption
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     -element is handled as if
      it were the argument of an option with character code 1.
      (This is used by programs that were written to expect options
      and other
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     -elements in any order and
      that care about the ordering of the two.) The special
      argument "&minus;&minus;" forces an end of option-scanning
      regardless of the scanning mode.
    </p>
    <p>
     If
     <code class="function">
      getopt
     </code>
     () does not
      recognize an option character, it prints an error message to
     <code class="varname">
      stderr
     </code>
     , stores the character in
     <code class="varname">
      optopt
     </code>
     , and returns '?'. The
      calling program may prevent the error message by setting
     <code class="varname">
      opterr
     </code>
     to 0.
    </p>
    <p>
     If
     <code class="function">
      getopt
     </code>
     () finds an option
      character in
     <em class="parameter">
      <code>
       argv
      </code>
     </em>
     that was not included in
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     , or if it detects a
      missing option argument, it returns '?' and sets the external
      variable
     <code class="varname">
      optopt
     </code>
     to the actual
      option character. If the first character (following any
      optional '+' or '&minus;' described above) of
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     is a colon (':'),
      then
     <code class="function">
      getopt
     </code>
     () returns ':'
      instead of '?' to indicate a missing option argument. If an
      error was detected, and the first character of
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     is not a colon, and
      the external variable
     <code class="varname">
      opterr
     </code>
     is
      nonzero (which is the default),
     <code class="function">
      getopt
     </code>
     () prints an error message.
    </p>
    <div class="refsect2">
     <a id="getopt-3_sect2" name="getopt-3_sect2" shape="rect">
     </a>
     <h3>
      getopt_long() and getopt_long_only()
     </h3>
     <p>
      The
      <code class="function">
       getopt_long
      </code>
      () function
        works like
      <code class="function">
       getopt
      </code>
      () except
        that it also accepts long options, started with two dashes.
        (If the program accepts only long options, then
      <em class="parameter">
       <code>
        optstring
       </code>
      </em>
      should be specified
        as an empty string (""), not NULL.) Long option names may
        be abbreviated if the abbreviation is unique or is an exact
        match for some defined option. A long option may take a
        parameter, of the form
      <code class="option">
       &minus;&minus;arg=param
      </code>
      or
      <code class="option">
       &minus;&minus;arg param
      </code>
      .
     </p>
     <p>
      <em class="parameter">
       <code>
        longopts
       </code>
      </em>
      is a
        pointer to the first element of an array of
      <span class="emphasis">
       <em>
        struct option
       </em>
      </span>
      declared in
      <code class="literal">
       &lt;
      </code>
      <code class="filename">
       getopt.h
      </code>
      <code class="literal">
       &gt;
      </code>
      as
     </p>
     <div class="blockquote">
      <blockquote class="blockquote">
       <div class="structdef">
        <table style="border-collapse: collapse;">
         <colgroup span="1">
          <col class="c1" span="1">
          </col>
          <col class="c2" span="1">
          </col>
          <col class="c3" span="1">
          </col>
          <col class="c4" span="1">
          </col>
          <col class="c5" span="1">
          </col>
         </colgroup>
         <tbody>
          <tr>
           <td align="left" class="structdefhdr" colspan="1" rowspan="1" style="">
            struct
           </td>
           <td align="left" class="structdefhdr" colspan="4" rowspan="1" style="">
            <span class="structname">
             option
            </span>
            &nbsp;{
           </td>
          </tr>
          <tr>
           <td colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <span class="type">
             const&nbsp;char
            </span>
           </td>
           <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
            *
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <em class="structfield">
             <code>
              name
             </code>
            </em>
            ;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
          </tr>
          <tr>
           <td colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <span class="type">
             int
            </span>
           </td>
           <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <em class="structfield">
             <code>
              has_arg
             </code>
            </em>
            ;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
          </tr>
          <tr>
           <td colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <span class="type">
             int
            </span>
           </td>
           <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
            *
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <em class="structfield">
             <code>
              flag
             </code>
            </em>
            ;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
          </tr>
          <tr>
           <td colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <span class="type">
             int
            </span>
           </td>
           <td align="right" class="norightpad" colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            <em class="structfield">
             <code>
              val
             </code>
            </em>
            ;
           </td>
           <td align="left" colspan="1" rowspan="1" style="">
            &nbsp;
           </td>
          </tr>
          <tr>
           <td align="left" class="structdefftr" colspan="5" rowspan="1" style="">
            };
           </td>
          </tr>
         </tbody>
        </table>
       </div>
      </blockquote>
     </div>
     <p>
      The meanings of the different fields are:
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <em class="parameter">
          <code>
           name
          </code>
         </em>
        </span>
       </dt>
       <dd>
        <p>
         is the name of the long option.
        </p>
       </dd>
       <dt>
        <span class="term">
         <em class="parameter">
          <code>
           has_arg
          </code>
         </em>
        </span>
       </dt>
       <dd>
        <p>
         is:
         <code class="constant">
          no_argument
         </code>
         (or
              0) if the option does not take an argument;
         <code class="constant">
          required_argument
         </code>
         (or
              1) if the option requires an argument; or
         <code class="constant">
          optional_argument
         </code>
         (or
              2) if the option takes an optional argument.
        </p>
       </dd>
       <dt>
        <span class="term">
         <em class="parameter">
          <code>
           flag
          </code>
         </em>
        </span>
       </dt>
       <dd>
        <p>
         specifies how results are returned for a long
              option. If
         <em class="parameter">
          <code>
           flag
          </code>
         </em>
         is NULL, then
         <code class="function">
          getopt_long
         </code>
         () returns
         <em class="parameter">
          <code>
           val
          </code>
         </em>
         . (For
              example, the calling program may set
         <em class="parameter">
          <code>
           val
          </code>
         </em>
         to the equivalent
              short option character.) Otherwise,
         <code class="function">
          getopt_long
         </code>
         () returns 0, and
         <em class="parameter">
          <code>
           flag
          </code>
         </em>
         points
              to a variable which is set to
         <em class="parameter">
          <code>
           val
          </code>
         </em>
         if the option is
              found, but left unchanged if the option is not
              found.
        </p>
       </dd>
       <dt>
        <span class="term">
         <em class="parameter">
          <code>
           val
          </code>
         </em>
        </span>
       </dt>
       <dd>
        <p>
         is the value to return, or to load into the
              variable pointed to by
         <em class="parameter">
          <code>
           flag
          </code>
         </em>
         .
        </p>
       </dd>
      </dl>
     </div>
     <p>
      The last element of the array has to be filled with
        zeros.
     </p>
     <p>
      If
      <em class="parameter">
       <code>
        longindex
       </code>
      </em>
      is
        not NULL, it points to a variable which is set to the index
        of the long option relative to
      <em class="parameter">
       <code>
        longopts
       </code>
      </em>
      .
     </p>
     <p>
      <code class="function">
       getopt_long_only
      </code>
      () is like
      <code class="function">
       getopt_long
      </code>
      (), but '&minus;'
        as well as "&minus;&minus;" can indicate a long option. If
        an option that starts with '&minus;' (not "&minus;&minus;")
        doesn't match a long option, but does match a short option,
        it is parsed as a short option instead.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="getopt-3_sect3" name="getopt-3_sect3" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     If an option was successfully found, then
     <code class="function">
      getopt
     </code>
     () returns the option character. If
      all command-line options have been parsed, then
     <code class="function">
      getopt
     </code>
     () returns &minus;1. If
     <code class="function">
      getopt
     </code>
     () encounters an option character
      that was not in
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     , then '?' is
      returned. If
     <code class="function">
      getopt
     </code>
     ()
      encounters an option with a missing argument, then the return
      value depends on the first character in
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     : if it is ':', then
      ':' is returned; otherwise '?' is returned.
    </p>
    <p>
     <code class="function">
      getopt_long
     </code>
     () and
     <code class="function">
      getopt_long_only
     </code>
     () also return
      the option character when a short option is recognized. For a
      long option, they return
     <em class="parameter">
      <code>
       val
      </code>
     </em>
     if
     <em class="parameter">
      <code>
       flag
      </code>
     </em>
     is NULL, and 0 otherwise.
      Error and &minus;1 returns are the same as for
     <code class="function">
      getopt
     </code>
     (), plus '?' for an ambiguous match
      or an extraneous parameter.
    </p>
   </div>
   <div class="refsect1">
    <a id="getopt-3_sect4" name="getopt-3_sect4" shape="rect">
    </a>
    <h2>
     ENVIRONMENT
    </h2>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <code class="constant">
         POSIXLY_CORRECT
        </code>
       </span>
      </dt>
      <dd>
       <p>
        If this is set, then option processing stops as soon
            as a nonoption argument is encountered.
       </p>
      </dd>
      <dt>
       <span class="term">
        _&lt;PID&gt;_GNU_nonoption_argv_flags_
       </span>
      </dt>
      <dd>
       <p>
        This variable was used by
        <span class="citerefentry">
         <span class="refentrytitle">
          bash
         </span>
         (1)
        </span>
        2.0 to
            communicate to glibc which arguments are the results of
            wildcard expansion and so should not be considered as
            options. This behavior was removed in
        <span class="citerefentry">
         <span class="refentrytitle">
          bash
         </span>
         (1)
        </span>
        version 2.01, but
            the support remains in glibc.
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="getopt-3_sect5" name="getopt-3_sect5" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <code class="function">
         getopt
        </code>
        ():
       </span>
      </dt>
      <dd>
       <p>
        POSIX.2 and POSIX.1-2001, provided the environment
            variable
        <code class="constant">
         POSIXLY_CORRECT
        </code>
        is set. Otherwise, the elements of
        <em class="parameter">
         <code>
          argv
         </code>
        </em>
        aren't really const,
            because we permute them. We pretend they're const in
            the prototype to be compatible with other systems.
       </p>
       <p>
        The use of '+' and '&minus;' in
        <em class="parameter">
         <code>
          optstring
         </code>
        </em>
        is a GNU
            extension.
       </p>
       <p>
        On some older implementations,
        <code class="function">
         getopt
        </code>
        () was declared in
        <code class="literal">
         &lt;
        </code>
        <code class="filename">
         stdio.h
        </code>
        <code class="literal">
         &gt;
        </code>
        SUSv1 permitted the declaration
            to appear in either
        <code class="literal">
         &lt;
        </code>
        <code class="filename">
         unistd.h
        </code>
        <code class="literal">
         &gt;
        </code>
        or
        <code class="literal">
         &lt;
        </code>
        <code class="filename">
         stdio.h
        </code>
        <code class="literal">
         &gt;
        </code>
        POSIX.1-2001 marked the use of
        <code class="literal">
         &lt;
        </code>
        <code class="filename">
         stdio.h
        </code>
        <code class="literal">
         &gt;
        </code>
        for this purpose as LEGACY.
            POSIX.1-2001 does not allow the declaration to appear
            in
        <code class="literal">
         &lt;
        </code>
        <code class="filename">
         stdio.h
        </code>
        <code class="literal">
         &gt;
        </code>
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="function">
         getopt_long() and
          getopt_long_only
        </code>
        ():
       </span>
      </dt>
      <dd>
       <p>
        These functions are GNU extensions.
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="getopt-3_sect6" name="getopt-3_sect6" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <p>
     A program that scans multiple argument vectors, or rescans
      the same vector more than once, and wants to make use of GNU
      extensions such as '+' and '&minus;' at the start of
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     , or changes
      the value of
     <code class="constant">
      POSIXLY_CORRECT
     </code>
     between scans, must reinitialize
     <code class="function">
      getopt
     </code>
     () by resetting
     <code class="varname">
      optind
     </code>
     to 0, rather than the traditional
      value of 1. (Resetting to 0 forces the invocation of an
      internal initialization routine that rechecks
     <code class="constant">
      POSIXLY_CORRECT
     </code>
     and checks for GNU
      extensions in
     <em class="parameter">
      <code>
       optstring
      </code>
     </em>
     .)
    </p>
   </div>
   <div class="refsect1">
    <a id="getopt-3_sect7" name="getopt-3_sect7" shape="rect">
    </a>
    <h2>
     BUGS
    </h2>
    <p>
     The POSIX.2 specification of
     <code class="function">
      getopt
     </code>
     () has a technical error described in
      POSIX.2 Interpretation 150. The GNU implementation (and
      probably all other implementations) implements the correct
      behavior rather than that specified.
    </p>
   </div>
   <div class="refsect1">
    <a id="getopt-3_sect8" name="getopt-3_sect8" shape="rect">
    </a>
    <h2>
     EXAMPLE
    </h2>
    <div class="refsect2">
     <a id="getopt-3_sect9" name="getopt-3_sect9" shape="rect">
     </a>
     <h3>
      getopt()
     </h3>
     <p>
      The following trivial example program uses
      <code class="function">
       getopt
      </code>
      () to handle two program options:
      <code class="option">
       &minus;n
      </code>
      , with no associated
        value; and
      <code class="option">
       &minus;t val
      </code>
      , which
        expects an associated value.
     </p>
     <div class="informalexample">
      <pre class="programlisting" xml:space="preserve">
#include &lt;unistd.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

int
main(int argc, char *argv[])
{
    int flags, opt;
    int nsecs, tfnd;

    nsecs = 0;
    tfnd = 0;
    flags = 0;
    while ((opt = getopt(argc, argv, "nt:")) != &minus;1) {
        switch (opt) {
        case 'n':
            flags = 1;
            break;
        case 't':
            nsecs = atoi(optarg);
            tfnd = 1;
            break;
        default: /* '?' */
            fprintf(stderr, "Usage: %s [&minus;t nsecs] [&minus;n] name\n",
                    argv[0]);
            exit(EXIT_FAILURE);
        }
    }

    printf("flags=%d; tfnd=%d; optind=%d\n", flags, tfnd, optind);

    if (optind &gt;= argc) {
        fprintf(stderr, "Expected argument after options\n");
        exit(EXIT_FAILURE);
    }

    printf("name argument = %s\n", argv[optind]);

    /* Other code omitted */

    exit(EXIT_SUCCESS);
}
</pre>
     </div>
    </div>
    <div class="refsect2">
     <a id="getopt-3_sect10" name="getopt-3_sect10" shape="rect">
     </a>
     <h3>
      getopt_long()
     </h3>
     <p>
      The following example program illustrates the use of
      <code class="function">
       getopt_long
      </code>
      () with most of
        its features.
     </p>
     <div class="informalexample">
      <pre class="programlisting" xml:space="preserve">
#include &lt;stdio.h&gt;     /* for printf */
#include &lt;stdlib.h&gt;    /* for exit */
#include &lt;getopt.h&gt;

int
main(int argc, char **argv)
{
    int c;
    int digit_optind = 0;

    while (1) {
        int this_option_optind = optind ? optind : 1;
        int option_index = 0;
        static struct option long_options[] = {
            {"add",     required_argument, 0,  0 },
            {"append",  no_argument,       0,  0 },
            {"delete",  required_argument, 0,  0 },
            {"verbose", no_argument,       0,  0 },
            {"create",  required_argument, 0, 'c'},
            {"file",    required_argument, 0,  0 },
            {0,         0,                 0,  0 }
        };

        c = getopt_long(argc, argv, "abc:d:012",
                 long_options, &amp;option_index);
        if (c == &minus;1)
            break;

        switch (c) {
        case 0:
            printf("option %s", long_options[option_index].name);
            if (optarg)
                printf(" with arg %s", optarg);
            printf("\n");
            break;

        case '0':
        case '1':
        case '2':
            if (digit_optind != 0 &amp;&amp; digit_optind != this_option_optind)
              printf("digits occur in two different argv&minus;elements.\n");
            digit_optind = this_option_optind;
            printf("option %c\n", c);
            break;

        case 'a':
            printf("option a\n");
            break;

        case 'b':
            printf("option b\n");
            break;

        case 'c':
            printf("option c with value '%s'\n", optarg);
            break;

        case 'd':
            printf("option d with value '%s'\n", optarg);
            break;

        case '?':
            break;

        default:
            printf("?? getopt returned character code 0%o ??\n", c);
        }
    }

    if (optind &lt; argc) {
        printf("non&minus;option ARGV&minus;elements: ");
        while (optind &lt; argc)
            printf("%s ", argv[optind++]);
        printf("\n");
    }

    exit(EXIT_SUCCESS);
}
</pre>
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="getopt-3_sect11" name="getopt-3_sect11" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman3/getsubopt.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        getsubopt
       </span>
       (3)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="getopt-3_sect12" name="getopt-3_sect12" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
