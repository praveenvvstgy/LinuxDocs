<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   lber_types(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="lber_types(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="lber-types.3" name="lber-types.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     ber_int_t, ber_uint_t, ber_len_t, ber_slen_t, ber_tag_t,
      struct, berval, BerValue, BerVarray, BerElement, ber_bvfree,
      ber_bvecfree, ber_bvecadd, ber_bvarray_free, ber_bvarray_add,
      ber_bvdup, ber_dupbv, ber_bvstr, ber_bvstrdup, ber_str2bv,
      ber_alloc_t, ber_init, ber_init2, ber_free &mdash; OpenLDAP
      LBER types and allocation functions
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
#include &lt;lber.h&gt;

typedef impl_tag_t ber_tag_t;
typedef impl_int_t ber_int_t;
typedef impl_uint_t ber_uint_t;
typedef impl_len_t ber_len_t;
typedef impl_slen_t ber_slen_t;

typedef struct berval {
    ber_len_t bv_len;
    char *bv_val;
} BerValue, *BerVarray;

typedef struct berelement BerElement;
</pre>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         void
         <strong>
          ber_bvfree
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        struct berval *
        <var class="pdparam">
         bv
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         void
         <strong>
          ber_bvecfree
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        struct berval **
        <var class="pdparam">
         bvec
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         void
         <strong>
          ber_bvecadd
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        struct berval ***
        <var class="pdparam">
         bvec
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        struct berval *
        <var class="pdparam">
         bv
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         void
         <strong>
          ber_bvarray_free
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        struct berval *
        <var class="pdparam">
         bvarray
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         void
         <strong>
          ber_bvarray_add
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        BerVarray *
        <var class="pdparam">
         bvarray
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        BerValue *
        <var class="pdparam">
         bv
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         struct berval
            *
         <strong>
          ber_bvdup
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const struct berval *
        <var class="pdparam">
         bv
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         struct berval
            *
         <strong>
          ber_dupbv
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const struct berval *
        <var class="pdparam">
         dst
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        struct berval *
        <var class="pdparam">
         src
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         struct berval
            *
         <strong>
          ber_bvstr
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         str
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         struct berval
            *
         <strong>
          ber_bvstrdup
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         str
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         struct berval
            *
         <strong>
          ber_str2bv
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         str
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        ber_len_t
        <var class="pdparam">
         len
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         dup
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        struct berval *
        <var class="pdparam">
         bv
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         BerElement
            *
         <strong>
          ber_alloc_t
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         options
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         BerElement
            *
         <strong>
          ber_init
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        struct berval *
        <var class="pdparam">
         bv
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         void
         <strong>
          ber_init2
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        BerElement *
        <var class="pdparam">
         ber
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        struct berval *
        <var class="pdparam">
         bv
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         options
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         void
         <strong>
          ber_free
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        BerElement *
        <var class="pdparam">
         ber
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         freebuf
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="lber-types-3_sect1" name="lber-types-3_sect1" shape="rect">
    </a>
    <h2>
     LIBRARY
    </h2>
    <p>
     OpenLDAP LBER (liblber, &minus;llber)
    </p>
   </div>
   <div class="refsect1">
    <a id="lber-types-3_sect2" name="lber-types-3_sect2" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     The following are the basic types and structures defined
      for use with the Lightweight BER library.
    </p>
    <p>
     <span class="type">
      ber_int_t
     </span>
     is a signed integer of
      at least 32 bits. It is commonly equivalent to
     <span class="type">
      int
     </span>
     .
     <span class="type">
      ber_uint_t
     </span>
     is
      the unsigned variant of
     <span class="type">
      ber_int_t
     </span>
     .
    </p>
    <p>
     <span class="type">
      ber_len_t
     </span>
     is an unsigned integer
      of at least 32 bits used to represent a length. It is
      commonly equivalent to a
     <span class="type">
      size_t
     </span>
     .
     <span class="type">
      ber_slen_t
     </span>
     is the signed variant to
     <span class="type">
      ber_len_t
     </span>
     .
    </p>
    <p>
     <span class="type">
      ber_tag_t
     </span>
     is an unsigned integer
      of at least 32 bits used to represent a BER tag. It is
      commonly equivalent to a
     <span class="type">
      unsigned
      long
     </span>
     .
    </p>
    <p>
     The actual definitions of the integral impl_TYPE_t types
      are platform specific.
    </p>
    <p>
     <span class="type">
      BerValue
     </span>
     , commonly used as
     <span class="emphasis">
      <em>
       struct berval
      </em>
     </span>
     , is used
      to hold an arbitrary sequence of octets.
     <code class="varname">
      bv_val
     </code>
     points to
     <code class="varname">
      bv_len
     </code>
     octets.
     <code class="varname">
      bv_val
     </code>
     is not necessarily terminated by a
      NULL (zero) octet.
     <code class="function">
      ber_bvfree
     </code>
     ()
      frees a BerValue, pointed to by
     <em class="parameter">
      <code>
       bv
      </code>
     </em>
     , returned from this API. If
     <em class="parameter">
      <code>
       bv
      </code>
     </em>
     is NULL, the
      routine does nothing.
    </p>
    <p>
     <code class="function">
      ber_bvecfree
     </code>
     () frees an
      array of BerValues (and the array), pointed to by
     <em class="parameter">
      <code>
       bvec
      </code>
     </em>
     , returned from this API.
      If
     <em class="parameter">
      <code>
       bvec
      </code>
     </em>
     is NULL, the
      routine does nothing.
     <code class="function">
      ber_bvecadd
     </code>
     () appends the
     <em class="parameter">
      <code>
       bv
      </code>
     </em>
     pointer to the
     <em class="parameter">
      <code>
       bvec
      </code>
     </em>
     array. Space for the array
      is allocated as needed. The end of the array is marked by a
      NULL pointer.
    </p>
    <p>
     <code class="function">
      ber_bvarray_free
     </code>
     () frees an
      array of BerValues (and the array), pointed to by
     <em class="parameter">
      <code>
       bvarray
      </code>
     </em>
     , returned from this
      API. If
     <em class="parameter">
      <code>
       bvarray
      </code>
     </em>
     is
      NULL, the routine does nothing.
     <code class="function">
      ber_bvarray_add
     </code>
     () appends the contents of
      the BerValue pointed to by
     <em class="parameter">
      <code>
       bv
      </code>
     </em>
     to the
     <em class="parameter">
      <code>
       bvarray
      </code>
     </em>
     array. Space for the
      new element is allocated as needed. The end of the array is
      marked by a BerValue with a NULL bv_val field.
    </p>
    <p>
     <code class="function">
      ber_bvdup
     </code>
     () returns a copy
      of a BerValue. The routine returns NULL upon error (e.g. out
      of memory). The caller should use
     <code class="function">
      ber_bvfree
     </code>
     () to deallocate the resulting
      BerValue.
     <code class="function">
      ber_dupbv
     </code>
     () copies a
      BerValue from
     <em class="parameter">
      <code>
       src
      </code>
     </em>
     to
     <em class="parameter">
      <code>
       dst
      </code>
     </em>
     . If
     <em class="parameter">
      <code>
       dst
      </code>
     </em>
     is NULL a new BerValue will
      be allocated to hold the copy. The routine returns NULL upon
      error, otherwise it returns a pointer to the copy. If
     <em class="parameter">
      <code>
       dst
      </code>
     </em>
     is NULL the
      caller should use
     <code class="function">
      ber_bvfree
     </code>
     ()
      to deallocate the resulting BerValue, otherwise
     <code class="function">
      ber_memfree
     </code>
     () should be used to deallocate
      the
     <em class="replaceable">
      <code>
       dst-&gt;bv_val
      </code>
     </em>
     .
      (The
     <code class="function">
      ber_bvdup
     </code>
     () function is
      internally implemented as ber_dupbv(NULL, bv).
     <code class="function">
      ber_bvdup
     </code>
     () is provided only for
      compatibility with an expired draft of the LDAP C API;
     <code class="function">
      ber_dupbv
     </code>
     () is the preferred
      interface.)
    </p>
    <p>
     <code class="function">
      ber_bvstr
     </code>
     () returns a
      BerValue containing the string pointed to by
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     .
     <code class="function">
      ber_bvstrdup
     </code>
     () returns a BerValue
      containing a copy of the string pointed to by
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     .
     <code class="function">
      ber_str2bv
     </code>
     () returns a BerValue containing
      the string pointed to by
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     , whose length may be
      optionally specified in
     <em class="parameter">
      <code>
       len
      </code>
     </em>
     . If
     <em class="parameter">
      <code>
       dup
      </code>
     </em>
     is non-zero, the BerValue
      will contain a copy of
     <em class="parameter">
      <code>
       str
      </code>
     </em>
     . If
     <em class="parameter">
      <code>
       len
      </code>
     </em>
     is zero, the number of
      bytes to copy will be determined by
     <a class="link" href="../htmlman3/strlen.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        strlen
       </span>
       (3)
      </span>
     </a>
     , otherwise
     <em class="parameter">
      <code>
       len
      </code>
     </em>
     bytes will be
      copied. If
     <em class="parameter">
      <code>
       bv
      </code>
     </em>
     is
      non-NULL, the result will be stored in the given BerValue,
      otherwise a new BerValue will be allocated to store the
      result. NOTE: Both
     <code class="function">
      ber_bvstr
     </code>
     ()
      and
     <code class="function">
      ber_bvstrdup
     </code>
     () are
      implemented as macros using
     <code class="function">
      ber_str2bv
     </code>
     () in this version of the
      library.
    </p>
    <p>
     <span class="type">
      BerElement
     </span>
     is an opaque
      structure used to maintain state information used in encoding
      and decoding.
     <code class="function">
      ber_alloc_t
     </code>
     () is
      used to create an empty BerElement structure. If
     <code class="constant">
      LBER_USE_DER
     </code>
     is specified for the
     <em class="parameter">
      <code>
       options
      </code>
     </em>
     parameter
      then data lengths for data written to the BerElement will be
      encoded in the minimal number of octets required, otherwise
      they will always be written as four byte values.
     <code class="function">
      ber_init
     </code>
     () creates a BerElement structure
      that is initialized with a copy of the data in its
     <em class="parameter">
      <code>
       bv
      </code>
     </em>
     parameter.
     <code class="function">
      ber_init2
     </code>
     () initializes an existing
      BerElement
     <em class="parameter">
      <code>
       ber
      </code>
     </em>
     using
      the data in the
     <em class="parameter">
      <code>
       bv
      </code>
     </em>
     parameter. The data is referenced directly, not copied. The
     <em class="parameter">
      <code>
       options
      </code>
     </em>
     parameter is
      the same as for
     <code class="function">
      ber_alloc_t
     </code>
     ().
     <code class="function">
      ber_free
     </code>
     () frees a BerElement
      pointed to by
     <em class="parameter">
      <code>
       ber
      </code>
     </em>
     . If
     <em class="parameter">
      <code>
       ber
      </code>
     </em>
     is NULL, the
      routine does nothing. If
     <em class="parameter">
      <code>
       freebuf
      </code>
     </em>
     is zero, the internal
      buffer is not freed.
    </p>
   </div>
   <div class="refsect1">
    <a id="lber-types-3_sect3" name="lber-types-3_sect3" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman3/lber-encode.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        lber-encode
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/lber-decode.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        lber-decode
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/lber-memory.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        lber-memory
       </span>
       (3)
      </span>
     </a>
    </p>
   </div>
   <div class="refsect1">
    <a id="lber-types-3_sect4" name="lber-types-3_sect4" shape="rect">
    </a>
    <h2>
     ACKNOWLEDGEMENTS
    </h2>
    <p>
     <span class="emphasis">
      <em>
       OpenLDAP Software
      </em>
     </span>
     is developed and maintained by The OpenLDAP Project
      &lt;
     <a class="literalurl" href="http://www.openldap.org/" shape="rect" target="_top">
      http://www.openldap.org/
     </a>
     &gt;.
     <span class="emphasis">
      <em>
       OpenLDAP Software
      </em>
     </span>
     is derived from
      University of Michigan LDAP 3.3 Release.
    </p>
   </div>
  </div>
 </body>
</html>
