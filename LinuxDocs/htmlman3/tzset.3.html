<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   tzset(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="tzset(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="tzset.3" name="tzset.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     tzset, tzname, timezone, daylight &mdash; initialize time
      conversion information
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;time.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         void
         <strong>
          tzset
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        <code>
         void)
        </code>
        ;
       </td>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <div class="featuretests">
         <table style="border-collapse: collapse;">
          <colgroup span="1">
           <col span="1">
           </col>
          </colgroup>
          <thead>
           <tr>
            <th colspan="1" rowspan="1" style="">
             Feature Test Macro Requirements
                      for glibc (see
             <a class="link" href="../htmlman7/feature_test_macros.7.html" shape="rect" target="_top">
              <span class="citerefentry">
               <span class="refentrytitle">
                feature_test_macros
               </span>
               (7)
              </span>
             </a>
             ):
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              tzset
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _POSIX_C_SOURCE
             </code>
             &gt;= 1 ||
             <code class="constant">
              _XOPEN_SOURCE
             </code>
             ||
             <code class="constant">
              _POSIX_SOURCE
             </code>
            </td>
           </tr>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="varname">
              tzname
             </code>
             :
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _POSIX_C_SOURCE
             </code>
             &gt;= 1 ||
             <code class="constant">
              _XOPEN_SOURCE
             </code>
             ||
             <code class="constant">
              _POSIX_SOURCE
             </code>
            </td>
           </tr>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="varname">
              timezone
             </code>
             :
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _SVID_SOURCE
             </code>
             ||
             <code class="constant">
              _XOPEN_SOURCE
             </code>
            </td>
           </tr>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="varname">
              daylight
             </code>
             :
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _SVID_SOURCE
             </code>
             ||
             <code class="constant">
              _XOPEN_SOURCE
             </code>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
       </td>
      </tr>
     </table>
    </div>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
extern char *tzname[2];
extern long timezone;
extern int daylight;
  
</pre>
    </div>
   </div>
   <div class="refsect1">
    <a id="tzset-3_sect1" name="tzset-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     The
     <code class="function">
      tzset
     </code>
     () function
      initializes the
     <code class="varname">
      tzname
     </code>
     variable
      from the
     <code class="constant">
      TZ
     </code>
     environment
      variable. This function is automatically called by the other
      time conversion functions that depend on the timezone. In a
      System-V-like environment, it will also set the variables
     <code class="varname">
      timezone
     </code>
     (seconds West of UTC)
      and
     <code class="varname">
      daylight
     </code>
     (to 0 if this
      timezone does not have any daylight saving time rules, or to
      nonzero if there is a time during the year when daylight
      saving time applies).
    </p>
    <p>
     If the
     <code class="constant">
      TZ
     </code>
     variable does not
      appear in the environment, the
     <code class="varname">
      tzname
     </code>
     variable is initialized with the best
      approximation of local wall clock time, as specified by the
     <a class="link" href="../htmlman5/tzfile.5.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        tzfile
       </span>
       (5)
      </span>
     </a>
     -format file
     <code class="filename">
      localtime
     </code>
     found in the system
      timezone directory (see below). (One also often sees
     <code class="filename">
      /etc/localtime
     </code>
     used here, a
      symlink to the right file in the system timezone
      directory.)
    </p>
    <p>
     If the
     <code class="constant">
      TZ
     </code>
     variable does
      appear in the environment but its value is empty or its value
      cannot be interpreted using any of the formats specified
      below, Coordinated Universal Time (UTC) is used.
    </p>
    <p>
     The value of
     <code class="constant">
      TZ
     </code>
     can be one
      of three formats. The first format is used when there is no
      daylight saving time in the local timezone:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <p>
       <span class="emphasis">
        <em>
         std offset
        </em>
       </span>
      </p>
     </blockquote>
    </div>
    <p>
     The
     <code class="varname">
      std
     </code>
     string specifies the
      name of the timezone and must be three or more alphabetic
      characters. The
     <code class="varname">
      offset
     </code>
     string
      immediately follows
     <code class="varname">
      std
     </code>
     and
      specifies the time value to be added to the local time to get
      Coordinated Universal Time (UTC). The
     <code class="varname">
      offset
     </code>
     is positive if the local timezone is
      west of the Prime Meridian and negative if it is east. The
      hour must be between 0 and 24, and the minutes and seconds 0
      and 59.
    </p>
    <p>
     The second format is used when there is daylight saving
      time:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <p>
       <span class="emphasis">
        <em>
         std offset dst
          [offset],start[/time],end[/time]
        </em>
       </span>
      </p>
     </blockquote>
    </div>
    <p>
     There are no spaces in the specification. The initial
     <code class="varname">
      std
     </code>
     and
     <code class="varname">
      offset
     </code>
     specify the standard timezone, as
      described above. The
     <code class="varname">
      dst
     </code>
     string
      and
     <code class="varname">
      offset
     </code>
     specify the name and
      offset for the corresponding daylight saving timezone. If the
      offset is omitted, it default to one hour ahead of standard
      time.
    </p>
    <p>
     The
     <code class="varname">
      start
     </code>
     field specifies
      when daylight saving time goes into effect and the
     <code class="varname">
      end
     </code>
     field specifies when the
      change is made back to standard time. These fields may have
      the following formats:
    </p>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        J
        <code class="literal">
         n
        </code>
       </span>
      </dt>
      <dd>
       <p>
        This specifies the Julian day with
        <code class="literal">
         n
        </code>
        between 1 and 365. Leap days are not
            counted. In this format, February 29 can't be
            represented; February 28 is day 59, and March 1 is
            always day 60.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="literal">
         n
        </code>
       </span>
      </dt>
      <dd>
       <p>
        This specifies the zero-based Julian day with
        <code class="literal">
         n
        </code>
        between 0 and 365.
            February 29 is counted in leap years.
       </p>
      </dd>
      <dt>
       <span class="term">
        M
        <code class="literal">
         m
        </code>
        .
        <code class="literal">
         w
        </code>
        .
        <code class="literal">
         d
        </code>
       </span>
      </dt>
      <dd>
       <p>
        This specifies day
        <code class="literal">
         d
        </code>
        (0
            &lt;=
        <code class="literal">
         d
        </code>
        &lt;= 6) of week
        <code class="literal">
         w
        </code>
        (1 &lt;=
        <code class="literal">
         w
        </code>
        &lt;= 5) of month
        <code class="literal">
         m
        </code>
        (1 &lt;=
        <code class="literal">
         m
        </code>
        &lt;= 12). Week 1 is the first week
            in which day
        <code class="literal">
         d
        </code>
        occurs and
            week 5 is the last week in which day
        <code class="literal">
         d
        </code>
        occurs. Day 0 is a Sunday.
       </p>
      </dd>
     </dl>
    </div>
    <p>
     The
     <code class="function">
      time
     </code>
     fields specify
      when, in the local time currently in effect, the change to
      the other time occurs. If omitted, the default is
      02:00:00.
    </p>
    <p>
     Here is an example for New Zealand, where the standard
      time (NZST) is 12 hours ahead of UTC, and daylight saving
      time (NZDT), 13 hours ahead of UTC, runs from the first
      Sunday in October to the third Sunday in March, and the
      changeovers happen at the default time of 02:00:00:
    </p>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
    TZ="NZST-12:00:00NZDT-13:00:00,M10.1.0,M3.3.0"
</pre>
    </div>
    <p>
     The third format specifies that the timezone information
      should be read from a file:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <p>
       :[filespec]
      </p>
     </blockquote>
    </div>
    <p>
     If the file specification
     <code class="varname">
      filespec
     </code>
     is omitted, the timezone
      information is read from the file
     <code class="filename">
      localtime
     </code>
     in the system timezone directory,
      which nowadays usually is
     <code class="filename">
      /usr/share/zoneinfo
     </code>
     . This file is in
     <a class="link" href="../htmlman5/tzfile.5.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        tzfile
       </span>
       (5)
      </span>
     </a>
     format. If
     <code class="varname">
      filespec
     </code>
     is given, it specifies
      another
     <a class="link" href="../htmlman5/tzfile.5.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        tzfile
       </span>
       (5)
      </span>
     </a>
     -format file to
      read the timezone information from. If
     <code class="varname">
      filespec
     </code>
     does not begin with a '/', the file
      specification is relative to the system timezone
      directory.
    </p>
    <p>
     Here's an example, once more for New Zealand:
    </p>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
    TZ=":Pacific/Auckland"
</pre>
    </div>
   </div>
   <div class="refsect1">
    <a id="tzset-3_sect2" name="tzset-3_sect2" shape="rect">
    </a>
    <h2>
     FILES
    </h2>
    <p>
     Under glibc, the system timezone directory is determined
      using the
     <code class="constant">
      TZDIR
     </code>
     the environment
      variable. If
     <code class="constant">
      TZDIR
     </code>
     the default
      depends on the system setup, but is normally
     <code class="filename">
      /usr/share/zoneinfo
     </code>
     .
    </p>
    <p>
     This timezone directory contains the files
    </p>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
    localtime      local timezone file
    posixrules     rules for POSIX-style TZ's
</pre>
    </div>
    <p>
     Often,
     <code class="filename">
      /etc/localtime
     </code>
     is a
      symbolic link to the file
     <code class="filename">
      localtime
     </code>
     or to the correct timezone file
      in the system timezone directory.
    </p>
   </div>
   <div class="refsect1">
    <a id="tzset-3_sect3" name="tzset-3_sect3" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     SVr4, POSIX.1-2001, 4.3BSD.
    </p>
   </div>
   <div class="refsect1">
    <a id="tzset-3_sect4" name="tzset-3_sect4" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <p>
     Note that the variable
     <code class="varname">
      daylight
     </code>
     does not indicate that daylight
      saving time applies right now. It used to give the number of
      some algorithm (see the variable
     <code class="varname">
      tz_dsttime
     </code>
     in
     <a class="link" href="../htmlman2/gettimeofday.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        gettimeofday
       </span>
       (2)
      </span>
     </a>
     ). It has
      been obsolete for many years but is required by SUSv2.
    </p>
    <p>
     4.3BSD had a function
     <code class="function">
      char
      *timezone
     </code>
     (
     <em class="parameter">
      <code>
       zone
      </code>
     </em>
     ,
     <em class="parameter">
      <code>
       dst
      </code>
     </em>
     ) that returned the name of
      the timezone corresponding to its first argument (minutes
      West of UTC). If the second argument was 0, the standard name
      was used, otherwise the daylight saving time version.
    </p>
   </div>
   <div class="refsect1">
    <a id="tzset-3_sect5" name="tzset-3_sect5" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman1/date.1.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        date
       </span>
       (1)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/gettimeofday.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        gettimeofday
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/time.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        time
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/ctime.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ctime
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/getenv.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        getenv
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman5/tzfile.5.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        tzfile
       </span>
       (5)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="tzset-3_sect6" name="tzset-3_sect6" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
