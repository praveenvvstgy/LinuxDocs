<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   inet_pton(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="inet_pton(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="inet-pton.3" name="inet-pton.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     inet_pton &mdash; convert IPv4 and IPv6 addresses from
      text to binary form
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;arpa/inet.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          inet_pton
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         af
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         src
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        void *
        <var class="pdparam">
         dst
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="inet-pton-3_sect1" name="inet-pton-3_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     This function converts the character string
     <em class="parameter">
      <code>
       src
      </code>
     </em>
     into a network address
      structure in the
     <em class="parameter">
      <code>
       af
      </code>
     </em>
     address family, then copies the network address structure to
     <em class="parameter">
      <code>
       dst
      </code>
     </em>
     . The
     <em class="parameter">
      <code>
       af
      </code>
     </em>
     argument must be either
     <code class="constant">
      AF_INET
     </code>
     or
     <code class="constant">
      AF_INET6
     </code>
     .
    </p>
    <p>
     The following address families are currently
      supported:
    </p>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <code class="constant">
         AF_INET
        </code>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          src
         </code>
        </em>
        points
            to a character string containing an IPv4 network
            address in dotted-decimal format, "
        <em class="replaceable">
         <code>
          ddd.ddd.ddd.ddd
         </code>
        </em>
        ", where
        <code class="function">
         ddd
        </code>
        is a decimal number
            of up to three digits in the range 0 to 255. The
            address is converted to a
        <span class="emphasis">
         <em>
          struct in_addr
         </em>
        </span>
        and copied to
        <em class="parameter">
         <code>
          dst
         </code>
        </em>
        , which must
            be
        <span class="emphasis">
         <em>
          sizeof(struct
            in_addr)
         </em>
        </span>
        (4) bytes (32 bits) long.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="constant">
         AF_INET6
        </code>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          src
         </code>
        </em>
        points
            to a character string containing an IPv6 network
            address. The address is converted to a
        <span class="emphasis">
         <em>
          struct in6_addr
         </em>
        </span>
        and copied
            to
        <em class="parameter">
         <code>
          dst
         </code>
        </em>
        , which
            must be
        <span class="emphasis">
         <em>
          sizeof(struct
            in6_addr)
         </em>
        </span>
        (16) bytes (128 bits) long. The
            allowed formats for IPv6 addresses follow these
            rules:
       </p>
       <div class="blockquote">
        <blockquote class="blockquote">
         <div class="orderedlist">
          <ol class="orderedlist" type="1">
           <li class="listitem">
            <p>
             The preferred format is
             <em class="replaceable">
              <code>
               x:x:x:x:x:x:x:x
              </code>
             </em>
             .
                      This form consists of eight hexadecimal
                      numbers, each of which expresses a 16-bit
                      value (i.e., each
             <code class="literal">
              x
             </code>
             can be up to 4 hex
                      digits).
            </p>
           </li>
           <li class="listitem">
            <p>
             A series of contiguous zero values in the
                      preferred format can be abbreviated to
             <em class="replaceable">
              <code>
               ::
              </code>
             </em>
             .
                      Only one instance of
             <em class="replaceable">
              <code>
               ::
              </code>
             </em>
             can occur
                      in an address. For example, the loopback
                      address
             <em class="replaceable">
              <code>
               0:0:0:0:0:0:0:1
              </code>
             </em>
             can be abbreviated as
             <em class="replaceable">
              <code>
               ::1
              </code>
             </em>
             . The
                      wildcard address, consisting of all zeros,
                      can be written as
             <em class="replaceable">
              <code>
               ::
              </code>
             </em>
             .
            </p>
           </li>
           <li class="listitem">
            <p>
             An alternate format is useful for
                      expressing IPv4-mapped IPv6 addresses. This
                      form is written as
             <em class="replaceable">
              <code>
               x:x:x:x:x:x:d.d.d.d
              </code>
             </em>
             ,
                      where the six leading
             <code class="literal">
              x
             </code>
             s are hexadecimal values
                      that define the six most-significant 16-bit
                      pieces of the address (i.e., 96 bits), and
                      the
             <code class="literal">
              d
             </code>
             s express a
                      value in dotted-decimal notation that defines
                      the least significant 32 bits of the address.
                      An example of such an address is
             <em class="replaceable">
              <code>
               ::FFFF:204.152.189.116
              </code>
             </em>
             .
            </p>
           </li>
          </ol>
         </div>
        </blockquote>
       </div>
       <p>
        See RFC 2373 for further details on the
            representation of IPv6 addresses.
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="inet-pton-3_sect2" name="inet-pton-3_sect2" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     <code class="function">
      inet_pton
     </code>
     () returns 1 on
      success (network address was successfully converted). 0 is
      returned if
     <em class="parameter">
      <code>
       src
      </code>
     </em>
     does
      not contain a character string representing a valid network
      address in the specified address family. If
     <em class="parameter">
      <code>
       af
      </code>
     </em>
     does not contain a valid
      address family, &minus;1 is returned and
     <code class="varname">
      errno
     </code>
     is set to
     <span class="errorname">
      EAFNOSUPPORT
     </span>
     .
    </p>
   </div>
   <div class="refsect1">
    <a id="inet-pton-3_sect3" name="inet-pton-3_sect3" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     POSIX.1-2001.
    </p>
   </div>
   <div class="refsect1">
    <a id="inet-pton-3_sect4" name="inet-pton-3_sect4" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <p>
     Unlike
     <a class="link" href="../htmlman3/inet.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        inet_aton
       </span>
       (3)
      </span>
     </a>
     and
     <a class="link" href="../htmlman3/inet.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        inet_addr
       </span>
       (3)
      </span>
     </a>
     ,
     <code class="function">
      inet_pton
     </code>
     () supports IPv6 addresses. On the
      other hand,
     <code class="function">
      inet_pton
     </code>
     () accepts
      only IPv4 addresses in dotted-decimal notation, whereas
     <a class="link" href="../htmlman3/inet.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        inet_aton
       </span>
       (3)
      </span>
     </a>
     and
     <a class="link" href="../htmlman3/inet.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        inet_addr
       </span>
       (3)
      </span>
     </a>
     allow the more
      general numbers-and-dots notation (hexadecimal and octal
      number formats, and formats that don't require all four bytes
      to be explicitly written). For an interface that handles both
      IPv6 addresses, and IPv4 addresses in numbers-and-dots
      notation, see
     <a class="link" href="../htmlman3/getaddrinfo.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        getaddrinfo
       </span>
       (3)
      </span>
     </a>
     .
    </p>
   </div>
   <div class="refsect1">
    <a id="inet-pton-3_sect5" name="inet-pton-3_sect5" shape="rect">
    </a>
    <h2>
     BUGS
    </h2>
    <p>
     <code class="constant">
      AF_INET6
     </code>
     does not recognize
      IPv4 addresses. An explicit IPv4-mapped IPv6 address must be
      supplied in
     <em class="parameter">
      <code>
       src
      </code>
     </em>
     instead.
    </p>
   </div>
   <div class="refsect1">
    <a id="inet-pton-3_sect6" name="inet-pton-3_sect6" shape="rect">
    </a>
    <h2>
     EXAMPLE
    </h2>
    <p>
     The program below demonstrates the use of
     <code class="function">
      inet_pton
     </code>
     () and
     <a class="link" href="../htmlman3/inet_ntop.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        inet_ntop
       </span>
       (3)
      </span>
     </a>
     . Here are some
      example runs:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="informalexample">
       <pre class="programlisting" xml:space="preserve">
$<span class="emphasis"><em> ./a.out i6 0:0:0:0:0:0:0:0</em></span>
::
$<span class="emphasis"><em> ./a.out i6 1:0:0:0:0:0:0:8</em></span>
1::8
$<span class="emphasis"><em> ./a.out i6 0:0:0:0:0:FFFF:204.152.189.116</em></span>
::ffff:204.152.189.116
</pre>
      </div>
     </blockquote>
    </div>
    <div class="refsect2">
     <a id="inet-pton-3_sect7" name="inet-pton-3_sect7" shape="rect">
     </a>
     <h3>
      Program source
     </h3>
     <div class="informalexample">
      <pre class="programlisting" xml:space="preserve">
#include &lt;arpa/inet.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int
main(int argc, char *argv[])
{
    unsigned char buf[sizeof(struct in6_addr)];
    int domain, s;
    char str[INET6_ADDRSTRLEN];

    if (argc != 3) {
        fprintf(stderr, "Usage: %s {i4|i6|&lt;num&gt;} string\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    domain = (strcmp(argv[1], "i4") == 0) ? AF_INET :
             (strcmp(argv[1], "i6") == 0) ? AF_INET6 : atoi(argv[1]);

    s = inet_pton(domain, argv[2], buf);
    if (s &lt;= 0) {
        if (s == 0)
            fprintf(stderr, "Not in presentation format");
        else
            perror("inet_pton");
        exit(EXIT_FAILURE);
    }

    if (inet_ntop(domain, buf, str, INET6_ADDRSTRLEN) == NULL) {
        perror("inet_ntop");
        exit(EXIT_FAILURE);
    }

    printf("%s\n", str);

    exit(EXIT_SUCCESS);
}
</pre>
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="inet-pton-3_sect8" name="inet-pton-3_sect8" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman3/getaddrinfo.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        getaddrinfo
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/inet.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        inet
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/inet_ntop.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        inet_ntop
       </span>
       (3)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="inet-pton-3_sect9" name="inet-pton-3_sect9" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
