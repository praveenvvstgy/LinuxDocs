<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   ldap_search(3) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="ldap_search(3) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="ldap-search.3" name="ldap-search.3" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     ldap_search, ldap_search_s, ldap_search_st,
      ldap_search_ext, ldap_search_ext_s &mdash; Perform an LDAP
      search operation
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">
#include &lt;sys/types.h&gt;
#include &lt;ldap.h&gt;
</pre>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          ldap_search_ext
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        LDAP *
        <var class="pdparam">
         ld
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         base
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         scope
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         filter
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         attrs[]
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         attrsonly
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        LDAPControl **
        <var class="pdparam">
         serverctrls
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        LDAPControl **
        <var class="pdparam">
         clientctrls
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        struct timeval *
        <var class="pdparam">
         timeout
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         sizelimit
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int *
        <var class="pdparam">
         msgidp
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          ldap_search_ext_s
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        LDAP *
        <var class="pdparam">
         ld
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         base
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         scope
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         filter
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        char *
        <var class="pdparam">
         attrs[]
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         attrsonly
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        LDAPControl **
        <var class="pdparam">
         serverctrls
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        LDAPControl **
        <var class="pdparam">
         clientctrls
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        struct timeval *
        <var class="pdparam">
         timeout
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         sizelimit
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        LDAPMessage **
        <var class="pdparam">
         res
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="ldap-search-3_sect1" name="ldap-search-3_sect1" shape="rect">
    </a>
    <h2>
     LIBRARY
    </h2>
    <p>
     OpenLDAP LDAP (libldap, &minus;lldap)
    </p>
   </div>
   <div class="refsect1">
    <a id="ldap-search-3_sect2" name="ldap-search-3_sect2" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     These routines are used to perform LDAP search operations.
      The
     <code class="function">
      ldap_search_ext_s
     </code>
     () routine
      does the search synchronously (i.e., not returning until the
      operation completes), providing a pointer to the resulting
      LDAP messages at the location pointed to by the
     <em class="parameter">
      <code>
       res
      </code>
     </em>
     parameter.
    </p>
    <p>
     The
     <code class="function">
      ldap_search_ext
     </code>
     ()
      routine is the asynchronous version, initiating the search
      and returning the message id of the operation it initiated in
      the integer pointed to by the
     <em class="parameter">
      <code>
       msgidp
      </code>
     </em>
     parameter.
    </p>
    <p>
     The
     <em class="parameter">
      <code>
       base
      </code>
     </em>
     parameter
      is the DN of the entry at which to start the search.
    </p>
    <p>
     The
     <em class="parameter">
      <code>
       scope
      </code>
     </em>
     parameter is the scope of the search and should be one of
      LDAP_SCOPE_BASE, to search the object itself,
      LDAP_SCOPE_ONELEVEL, to search the object's immediate
      children, LDAP_SCOPE_SUBTREE, to search the object and all
      its descendants, or LDAP_SCOPE_CHILDREN, to search all of the
      descendants. Note that the latter requires the server support
      the LDAP Subordinates Search Scope extension.
    </p>
    <p>
     The
     <em class="parameter">
      <code>
       filter
      </code>
     </em>
     is a
      string representation of the filter to apply in the search.
      The string should conform to the format specified in RFC 4515
      as extended by RFC 4526. For instance, "(cn=Jane Doe)". Note
      that use of the extension requires the server to support the
      LDAP Absolute True/False Filter extension. NULL may be
      specified to indicate the library should send the filter
      (objectClass=*).
    </p>
    <p>
     The
     <em class="parameter">
      <code>
       attrs
      </code>
     </em>
     parameter is a null-terminated array of attribute
      descriptions to return from matching entries. If NULL is
      specified, the return of all user attributes is requested.
      The description "*" (LDAP_ALL_USER_ATTRIBUTES) may be used to
      request all user attributes to be returned. The description
      "+"(LDAP_ALL_OPERATIONAL_ATTRIBUTES) may be used to request
      all operational attributes to be returned. Note that this
      requires the server to support the LDAP All Operational
      Attribute extension. To request no attributes, the
      description "1.1" (LDAP_NO_ATTRS) should be listed by
      itself.
    </p>
    <p>
     The
     <em class="parameter">
      <code>
       attrsonly
      </code>
     </em>
     parameter should be set to a non-zero value if only attribute
      descriptions are wanted. It should be set to zero (0) if both
      attributes descriptions and attribute values are wanted.
    </p>
    <p>
     The
     <em class="parameter">
      <code>
       serverctrls
      </code>
     </em>
     and
     <em class="parameter">
      <code>
       clientctrls
      </code>
     </em>
     parameters may be used to specify server and client controls,
      respectively.
    </p>
    <p>
     The
     <code class="function">
      ldap_search_ext_s
     </code>
     ()
      routine is the synchronous version of
     <code class="function">
      ldap_search_ext
     </code>
     ().
    </p>
    <p>
     It also returns a code indicating success or, in the case
      of failure, indicating the nature of the failure of the
      operation. See
     <a class="link" href="../htmlman3/ldap_error.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_error
       </span>
       (3)
      </span>
     </a>
     for
      details.
    </p>
   </div>
   <div class="refsect1">
    <a id="ldap-search-3_sect3" name="ldap-search-3_sect3" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <p>
     Note that both read and list functionality are subsumed by
      these routines, by using a filter like "(objectclass=*)" and
      a scope of LDAP_SCOPE_BASE (to emulate read) or
      LDAP_SCOPE_ONELEVEL (to emulate list).
    </p>
    <p>
     These routines may dynamically allocate memory. The caller
      is responsible for freeing such memory using supplied
      deallocation routines. Return values are contained in
      &lt;ldap.h&gt;.
    </p>
    <p>
     Note that
     <em class="parameter">
      <code>
       res
      </code>
     </em>
     parameter of
     <code class="function">
      ldap_search_ext_s
     </code>
     () and
     <code class="function">
      ldap_search_s
     </code>
     () should be freed with
     <code class="function">
      ldap_msgfree
     </code>
     () regardless of
      return value of these functions.
    </p>
   </div>
   <div class="refsect1">
    <a id="ldap-search-3_sect4" name="ldap-search-3_sect4" shape="rect">
    </a>
    <h2>
     DEPRECATED INTERFACES
    </h2>
    <p>
     The
     <code class="function">
      ldap_search
     </code>
     () routine is
      deprecated in favor of the
     <code class="function">
      ldap_search_ext
     </code>
     () routine. The
     <code class="function">
      ldap_search_s
     </code>
     () and
     <code class="function">
      ldap_search_st
     </code>
     () routines are deprecated in
      favor of the
     <code class="function">
      ldap_search_ext_s
     </code>
     () routine.
    </p>
    <p>
     Deprecated interfaces generally remain in the library. The
      macro LDAP_DEPRECATED can be defined to a non-zero value
      (e.g., -DLDAP_DEPRECATED=1) when compiling program designed
      to use deprecated interfaces. It is recommended that
      developers writing new programs, or updating old programs,
      avoid use of deprecated interfaces. Over time, it is expected
      that documentation (and, eventually, support) for deprecated
      interfaces to be eliminated.
    </p>
   </div>
   <div class="refsect1">
    <a id="ldap-search-3_sect5" name="ldap-search-3_sect5" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman3/ldap.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/ldap_result.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_result
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/ldap_error.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        ldap_error
       </span>
       (3)
      </span>
     </a>
    </p>
   </div>
   <div class="refsect1">
    <a id="ldap-search-3_sect6" name="ldap-search-3_sect6" shape="rect">
    </a>
    <h2>
     ACKNOWLEDGEMENTS
    </h2>
    <p>
     <span class="emphasis">
      <em>
       OpenLDAP Software
      </em>
     </span>
     is developed and maintained by The OpenLDAP Project
      &lt;
     <a class="literalurl" href="http://www.openldap.org/" shape="rect" target="_top">
      http://www.openldap.org/
     </a>
     &gt;.
     <span class="emphasis">
      <em>
       OpenLDAP Software
      </em>
     </span>
     is derived from
      University of Michigan LDAP 3.3 Release.
    </p>
   </div>
  </div>
 </body>
</html>
