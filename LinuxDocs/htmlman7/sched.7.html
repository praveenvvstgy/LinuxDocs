<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   sched(7) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="sched(7) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="sched.7" name="sched.7" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     sched &mdash; overview of scheduling APIs
    </p>
   </div>
   <div class="refsect1">
    <a id="sched-7_sect1" name="sched-7_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <div class="refsect2">
     <a id="sched-7_sect2" name="sched-7_sect2" shape="rect">
     </a>
     <h3>
      API summary
     </h3>
     <p>
      The Linux scheduling APIs are as follows:
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_setscheduler.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setscheduler
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         Set the scheduling policy and parameters of a
              specified thread.
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_setscheduler.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_getscheduler
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         Return the scheduling policy of a specified
              thread.
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_setparam.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setparam
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         Set the scheduling parameters of a specified
              thread.
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_setparam.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_getparam
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         Fetch the scheduling parameters of a specified
              thread.
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_get_priority_max.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_get_priority_max
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         Return the minimum priority available in a
              specified scheduling policy.
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_get_priority_max.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_get_priority_min
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         Return the maximum priority available in a
              specified scheduling policy.
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_rr_get_interval.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_rr_get_interval
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         Fetch the quantum used for threads that are
              scheduled under the "round-robin" scheduling
              policy.
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_yield.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_yield
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         Cause the caller to relinquish the CPU, so that
              some other thread be executed.
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_setaffinity.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setaffinity
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         (Linux-specific) Set the CPU affinity of a
              specified thread.
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_setaffinity.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_getaffinity
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         (Linux-specific) Get the CPU affinity of a
              specified thread.
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setattr
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         Set the scheduling policy and parameters of a
              specified thread. This (Linux-specific) system call
              provides a superset of the functionality of
         <a class="link" href="../htmlman2/sched_setscheduler.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setscheduler
           </span>
           (2)
          </span>
         </a>
         and
         <a class="link" href="../htmlman2/sched_setparam.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setparam
           </span>
           (2)
          </span>
         </a>
         .
        </p>
       </dd>
       <dt>
        <span class="term">
         <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_getattr
           </span>
           (2)
          </span>
         </a>
        </span>
       </dt>
       <dd>
        <p>
         Fetch the scheduling policy and parameters of a
              specified thread. This (Linux-specific) system call
              provides a superset of the functionality of
         <a class="link" href="../htmlman2/sched_setscheduler.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_getscheduler
           </span>
           (2)
          </span>
         </a>
         and
         <a class="link" href="../htmlman2/sched_setparam.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_getparam
           </span>
           (2)
          </span>
         </a>
         .
        </p>
       </dd>
      </dl>
     </div>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect3" name="sched-7_sect3" shape="rect">
     </a>
     <h3>
      Scheduling policies
     </h3>
     <p>
      The scheduler is the kernel component that decides which
        runnable thread will be executed by the CPU next. Each
        thread has an associated scheduling policy and a
      <em class="replaceable">
       <code>
        static
       </code>
      </em>
      scheduling priority,
      <em class="replaceable">
       <code>
        sched_priority
       </code>
      </em>
      .
        The scheduler makes its decisions based on knowledge of the
        scheduling policy and static priority of all threads on the
        system.
     </p>
     <p>
      For threads scheduled under one of the normal scheduling
        policies (
      <code class="constant">
       SCHED_OTHER
      </code>
      ,
      <code class="constant">
       SCHED_IDLE
      </code>
      ,
      <code class="constant">
       SCHED_BATCH
      </code>
      ),
      <em class="replaceable">
       <code>
        sched_priority
       </code>
      </em>
      is not used
        in scheduling decisions (it must be specified as 0).
     </p>
     <p>
      Processes scheduled under one of the real-time policies
        (
      <code class="constant">
       SCHED_FIFO
      </code>
      ,
      <code class="constant">
       SCHED_RR
      </code>
      ) have a
      <em class="replaceable">
       <code>
        sched_priority
       </code>
      </em>
      value in the
        range 1 (low) to 99 (high). (As the numbers imply,
        real-time threads always have higher priority than normal
        threads.) Note well: POSIX.1-2001 requires an
        implementation to support only a minimum 32 distinct
        priority levels for the real-time policies, and some
        systems supply just this minimum. Portable programs should
        use
      <a class="link" href="../htmlman2/sched_get_priority_max.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_get_priority_min
        </span>
        (2)
       </span>
      </a>
      and
      <a class="link" href="../htmlman2/sched_get_priority_max.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_get_priority_max
        </span>
        (2)
       </span>
      </a>
      to find the range of priorities supported for a particular
        policy.
     </p>
     <p>
      Conceptually, the scheduler maintains a list of runnable
        threads for each possible
      <em class="replaceable">
       <code>
        sched_priority
       </code>
      </em>
      value. In
        order to determine which thread runs next, the scheduler
        looks for the nonempty list with the highest static
        priority and selects the thread at the head of this
        list.
     </p>
     <p>
      A thread's scheduling policy determines where it will be
        inserted into the list of threads with equal static
        priority and how it will move inside this list.
     </p>
     <p>
      All scheduling is preemptive: if a thread with a higher
        static priority becomes ready to run, the currently running
        thread will be preempted and returned to the wait list for
        its static priority level. The scheduling policy determines
        the ordering only within the list of runnable threads with
        equal static priority.
     </p>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect4" name="sched-7_sect4" shape="rect">
     </a>
     <h3>
      SCHED_FIFO: First in-first out scheduling
     </h3>
     <p>
      <code class="constant">
       SCHED_FIFO
      </code>
      can be used
        only with static priorities higher than 0, which means that
        when a
      <code class="constant">
       SCHED_FIFO
      </code>
      threads
        becomes runnable, it will always immediately preempt any
        currently running
      <code class="constant">
       SCHED_OTHER
      </code>
      ,
      <code class="constant">
       SCHED_BATCH
      </code>
      , or
      <code class="constant">
       SCHED_IDLE
      </code>
      thread.
      <code class="constant">
       SCHED_FIFO
      </code>
      is a simple scheduling
        algorithm without time slicing. For threads scheduled under
        the
      <code class="constant">
       SCHED_FIFO
      </code>
      policy, the
        following rules apply:
     </p>
     <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
       <li class="listitem">
        <p>
         A
         <code class="constant">
          SCHED_FIFO
         </code>
         thread
              that has been preempted by another thread of higher
              priority will stay at the head of the list for its
              priority and will resume execution as soon as all
              threads of higher priority are blocked again.
        </p>
       </li>
       <li class="listitem">
        <p>
         When a
         <code class="constant">
          SCHED_FIFO
         </code>
         thread becomes runnable, it will be inserted at the
              end of the list for its priority.
        </p>
       </li>
       <li class="listitem">
        <p>
         A call to
         <a class="link" href="../htmlman2/sched_setscheduler.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setscheduler
           </span>
           (2)
          </span>
         </a>
         ,
         <a class="link" href="../htmlman2/sched_setparam.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setparam
           </span>
           (2)
          </span>
         </a>
         ,
              or
         <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setattr
           </span>
           (2)
          </span>
         </a>
         will put the
         <code class="constant">
          SCHED_FIFO
         </code>
         (or
         <code class="constant">
          SCHED_RR
         </code>
         ) thread
              identified by
         <em class="replaceable">
          <code>
           pid
          </code>
         </em>
         at the start of
              the list if it was runnable. As a consequence, it may
              preempt the currently running thread if it has the
              same priority. (POSIX.1-2001 specifies that the
              thread should go to the end of the list.)
        </p>
       </li>
       <li class="listitem">
        <p>
         A thread calling
         <a class="link" href="../htmlman2/sched_yield.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_yield
           </span>
           (2)
          </span>
         </a>
         will
              be put at the end of the list.
        </p>
       </li>
      </ul>
     </div>
     <p>
      No other events will move a thread scheduled under the
      <code class="constant">
       SCHED_FIFO
      </code>
      policy in the wait
        list of runnable threads with equal static priority.
     </p>
     <p>
      A
      <code class="constant">
       SCHED_FIFO
      </code>
      thread runs
        until either it is blocked by an I/O request, it is
        preempted by a higher priority thread, or it calls
      <a class="link" href="../htmlman2/sched_yield.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_yield
        </span>
        (2)
       </span>
      </a>
      .
     </p>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect5" name="sched-7_sect5" shape="rect">
     </a>
     <h3>
      SCHED_RR: Round-robin scheduling
     </h3>
     <p>
      <code class="constant">
       SCHED_RR
      </code>
      is a simple
        enhancement of
      <code class="constant">
       SCHED_FIFO
      </code>
      .
        Everything described above for
      <code class="constant">
       SCHED_FIFO
      </code>
      also applies to
      <code class="constant">
       SCHED_RR
      </code>
      , except that each thread is
        allowed to run only for a maximum time quantum. If a
      <code class="constant">
       SCHED_RR
      </code>
      thread has been
        running for a time period equal to or longer than the time
        quantum, it will be put at the end of the list for its
        priority. A
      <code class="constant">
       SCHED_RR
      </code>
      thread
        that has been preempted by a higher priority thread and
        subsequently resumes execution as a running thread will
        complete the unexpired portion of its round-robin time
        quantum. The length of the time quantum can be retrieved
        using
      <a class="link" href="../htmlman2/sched_rr_get_interval.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_rr_get_interval
        </span>
        (2)
       </span>
      </a>
      .
     </p>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect6" name="sched-7_sect6" shape="rect">
     </a>
     <h3>
      SCHED_DEADLINE: Sporadic task model deadline
        scheduling
     </h3>
     <p>
      Since version 3.14, Linux provides a deadline scheduling
        policy (
      <code class="constant">
       SCHED_DEADLINE
      </code>
      ). This
        policy is currently implemented using GEDF (Global Earliest
        Deadline First) in conjunction with CBS (Constant Bandwidth
        Server). To set and fetch this policy and associated
        attributes, one must use the Linux-specific
      <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_setattr
        </span>
        (2)
       </span>
      </a>
      and
      <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_getattr
        </span>
        (2)
       </span>
      </a>
      system
        calls.
     </p>
     <p>
      A sporadic task is one that has a sequence of jobs,
        where each job is activated at most once per period. Each
        job also has a
      <span class="emphasis">
       <em>
        relative
        deadline
       </em>
      </span>
      , before which it should finish
        execution, and a
      <span class="emphasis">
       <em>
        computation
        time
       </em>
      </span>
      , which is the CPU time necessary for
        executing the job. The moment when a task wakes up because
        a new job has to be executed is called the
      <span class="emphasis">
       <em>
        arrival time
       </em>
      </span>
      (also referred to
        as the request time or release time). The
      <span class="emphasis">
       <em>
        start time
       </em>
      </span>
      is the time at which
        a task starts its execution. The
      <span class="emphasis">
       <em>
        absolute deadline
       </em>
      </span>
      is thus
        obtained by adding the relative deadline to the arrival
        time.
     </p>
     <p>
      The following diagram clarifies these terms:
     </p>
     <div class="blockquote">
      <blockquote class="blockquote">
       <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
arrival/wakeup                    absolute deadline
     |    start time                    |
     |        |                         |
     v        v                         v
-----x--------xooooooooooooooooo--------x--------x---
              |&lt;- comp. time -&gt;|
     |&lt;------- relative deadline ------&gt;|
     |&lt;-------------- period -------------------&gt;|
</pre>
       </div>
      </blockquote>
     </div>
     <p>
      When setting a
      <code class="constant">
       SCHED_DEADLINE
      </code>
      policy for a thread using
      <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_setattr
        </span>
        (2)
       </span>
      </a>
      , one can
        specify three parameters:
      <em class="replaceable">
       <code>
        Runtime
       </code>
      </em>
      ,
      <em class="replaceable">
       <code>
        Deadline
       </code>
      </em>
      , and
      <em class="replaceable">
       <code>
        Period
       </code>
      </em>
      . These parameters do
        not necessarily correspond to the aforementioned terms:
        usual practice is to set Runtime to something bigger than
        the average computation time (or worst-case execution time
        for hard real-time tasks), Deadline to the relative
        deadline, and Period to the period of the task. Thus, for
      <code class="constant">
       SCHED_DEADLINE
      </code>
      scheduling, we
        have:
     </p>
     <div class="blockquote">
      <blockquote class="blockquote">
       <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
arrival/wakeup                    absolute deadline
     |    start time                    |
     |        |                         |
     v        v                         v
-----x--------xooooooooooooooooo--------x--------x---
              |&lt;-- Runtime -------&gt;|
     |&lt;----------- Deadline -----------&gt;|
     |&lt;-------------- Period -------------------&gt;|
</pre>
       </div>
      </blockquote>
     </div>
     <p>
      The three deadline-scheduling parameters correspond to
        the
      <em class="replaceable">
       <code>
        sched_runtime
       </code>
      </em>
      ,
      <em class="replaceable">
       <code>
        sched_deadline
       </code>
      </em>
      , and
      <em class="replaceable">
       <code>
        sched_period
       </code>
      </em>
      fields of the
      <em class="replaceable">
       <code>
        sched_attr
       </code>
      </em>
      structure; see
      <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_setattr
        </span>
        (2)
       </span>
      </a>
      . These
        fields express value in nanoseconds. If
      <em class="replaceable">
       <code>
        sched_period
       </code>
      </em>
      is specified
        as 0, then it is made the same as
      <em class="replaceable">
       <code>
        sched_deadline
       </code>
      </em>
      .
     </p>
     <p>
      The kernel requires that:
     </p>
     <p>
      sched_runtime &lt;= sched_deadline &lt;=
        sched_period
     </p>
     <p>
      In addition, under the current implementation, all of
        the parameter values must be at least 1024 (i.e., just over
        one microsecond, which is the resolution of the
        implementation), and less than 2^63. If any of these checks
        fails,
      <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_setattr
        </span>
        (2)
       </span>
      </a>
      fails
        with the error
      <span class="errorname">
       EINVAL
      </span>
      .
     </p>
     <p>
      The CBS guarantees non-interference between tasks, by
        throttling threads that attempt to over-run their specified
        Runtime.
     </p>
     <p>
      To ensure deadline scheduling guarantees, the kernel
        must prevent situations where the set of
      <code class="constant">
       SCHED_DEADLINE
      </code>
      threads is not feasible
        (schedulable) within the given constraints. The kernel thus
        performs an admittance test when setting or changing
      <code class="constant">
       SCHED_DEADLINE
      </code>
      policy and
        attributes. This admission test calculates whether the
        change is feasible; if it is not
      <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_setattr
        </span>
        (2)
       </span>
      </a>
      fails
        with the error
      <span class="errorname">
       EBUSY
      </span>
      .
     </p>
     <p>
      For example, it is required (but not necessarily
        sufficient) for the total utilization to be less than or
        equal to the total number of CPUs available, where, since
        each thread can maximally run for Runtime per Period, that
        thread's utilization is its Runtime divided by its
        Period.
     </p>
     <p>
      In order to fulfil the guarantees that are made when a
        thread is admitted to the
      <code class="constant">
       SCHED_DEADLINE
      </code>
      policy,
      <code class="constant">
       SCHED_DEADLINE
      </code>
      threads are the highest
        priority (user controllable) threads in the system; if any
      <code class="constant">
       SCHED_DEADLINE
      </code>
      thread is
        runnable, it will preempt any thread scheduled under one of
        the other policies.
     </p>
     <p>
      A call to
      <a class="link" href="../htmlman2/fork.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         fork
        </span>
        (2)
       </span>
      </a>
      by a thread
        scheduled under the
      <code class="constant">
       SCHED_DEADLINE
      </code>
      policy will fail with the
        error
      <span class="errorname">
       EAGAIN
      </span>
      , unless the
        thread has its reset-on-fork flag set (see below).
     </p>
     <p>
      A
      <code class="constant">
       SCHED_DEADLINE
      </code>
      thread
        that calls
      <a class="link" href="../htmlman2/sched_yield.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_yield
        </span>
        (2)
       </span>
      </a>
      will yield
        the current job and wait for a new period to begin.
     </p>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect7" name="sched-7_sect7" shape="rect">
     </a>
     <h3>
      SCHED_OTHER: Default Linux time-sharing scheduling
     </h3>
     <p>
      <code class="constant">
       SCHED_OTHER
      </code>
      can be used at
        only static priority 0.
      <code class="constant">
       SCHED_OTHER
      </code>
      is the standard Linux
        time-sharing scheduler that is intended for all threads
        that do not require the special real-time mechanisms. The
        thread to run is chosen from the static priority 0 list
        based on a
      <em class="replaceable">
       <code>
        dynamic
       </code>
      </em>
      priority that is
        determined only inside this list. The dynamic priority is
        based on the nice value (set by
      <a class="link" href="../htmlman2/nice.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         nice
        </span>
        (2)
       </span>
      </a>
      ,
      <a class="link" href="../htmlman2/getpriority.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         setpriority
        </span>
        (2)
       </span>
      </a>
      , or
      <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_setattr
        </span>
        (2)
       </span>
      </a>
      ) and
        increased for each time quantum the thread is ready to run,
        but denied to run by the scheduler. This ensures fair
        progress among all
      <code class="constant">
       SCHED_OTHER
      </code>
      threads.
     </p>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect8" name="sched-7_sect8" shape="rect">
     </a>
     <h3>
      SCHED_BATCH: Scheduling batch processes
     </h3>
     <p>
      (Since Linux 2.6.16.)
      <code class="constant">
       SCHED_BATCH
      </code>
      can be used only at static
        priority 0. This policy is similar to
      <code class="constant">
       SCHED_OTHER
      </code>
      in that it schedules the
        thread according to its dynamic priority (based on the nice
        value). The difference is that this policy will cause the
        scheduler to always assume that the thread is
        CPU-intensive. Consequently, the scheduler will apply a
        small scheduling penalty with respect to wakeup behavior,
        so that this thread is mildly disfavored in scheduling
        decisions.
     </p>
     <p>
      This policy is useful for workloads that are
        noninteractive, but do not want to lower their nice value,
        and for workloads that want a deterministic scheduling
        policy without interactivity causing extra preemptions
        (between the workload's tasks).
     </p>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect9" name="sched-7_sect9" shape="rect">
     </a>
     <h3>
      SCHED_IDLE: Scheduling very low priority jobs
     </h3>
     <p>
      (Since Linux 2.6.23.)
      <code class="constant">
       SCHED_IDLE
      </code>
      can be used only at static
        priority 0; the process nice value has no influence for
        this policy.
     </p>
     <p>
      This policy is intended for running jobs at extremely
        low priority (lower even than a +19 nice value with the
      <code class="constant">
       SCHED_OTHER
      </code>
      or
      <code class="constant">
       SCHED_BATCH
      </code>
      policies).
     </p>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect10" name="sched-7_sect10" shape="rect">
     </a>
     <h3>
      Resetting scheduling policy for child processes
     </h3>
     <p>
      Each thread has a reset-on-fork scheduling flag. When
        this flag is set, children created by
      <a class="link" href="../htmlman2/fork.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         fork
        </span>
        (2)
       </span>
      </a>
      do not inherit
        privileged scheduling policies. The reset-on-fork flag can
        be set by either:
     </p>
     <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
       <li class="listitem">
        <p>
         ORing the
         <code class="constant">
          SCHED_RESET_ON_FORK
         </code>
         flag into the
         <em class="replaceable">
          <code>
           policy
          </code>
         </em>
         argument when calling
         <a class="link" href="../htmlman2/sched_setscheduler.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setscheduler
           </span>
           (2)
          </span>
         </a>
         (since Linux 2.6.32); or
        </p>
       </li>
       <li class="listitem">
        <p>
         specifying the
         <code class="constant">
          SCHED_FLAG_RESET_ON_FORK
         </code>
         flag in
         <em class="replaceable">
          <code>
           attr.sched_flags
          </code>
         </em>
         when
              calling
         <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            sched_setattr
           </span>
           (2)
          </span>
         </a>
         .
        </p>
       </li>
      </ul>
     </div>
     <p>
      Note that the constants used with these two APIs have
        different names. The state of the reset-on-fork flag can
        analogously be retrieved using
      <a class="link" href="../htmlman2/sched_setscheduler.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_getscheduler
        </span>
        (2)
       </span>
      </a>
      and
      <a class="link" href="../htmlman2/sched_setattr.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         sched_getattr
        </span>
        (2)
       </span>
      </a>
      .
     </p>
     <p>
      The reset-on-fork feature is intended for media-playback
        applications, and can be used to prevent applications
        evading the
      <code class="constant">
       RLIMIT_RTTIME
      </code>
      resource limit (see
      <a class="link" href="../htmlman2/getrlimit.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         getrlimit
        </span>
        (2)
       </span>
      </a>
      ) by creating
        multiple child processes.
     </p>
     <p>
      More precisely, if the reset-on-fork flag is set, the
        following rules apply for subsequently created
        children:
     </p>
     <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
       <li class="listitem">
        <p>
         If the calling thread has a scheduling policy of
         <code class="constant">
          SCHED_FIFO
         </code>
         or
         <code class="constant">
          SCHED_RR
         </code>
         , the policy is
              reset to
         <code class="constant">
          SCHED_OTHER
         </code>
         in
              child processes.
        </p>
       </li>
       <li class="listitem">
        <p>
         If the calling process has a negative nice value,
              the nice value is reset to zero in child
              processes.
        </p>
       </li>
      </ul>
     </div>
     <p>
      After the reset-on-fork flag has been enabled, it can be
        reset only if the thread has the
      <code class="constant">
       CAP_SYS_NICE
      </code>
      capability. This flag is
        disabled in child processes created by
      <a class="link" href="../htmlman2/fork.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         fork
        </span>
        (2)
       </span>
      </a>
      .
     </p>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect11" name="sched-7_sect11" shape="rect">
     </a>
     <h3>
      Privileges and resource limits
     </h3>
     <p>
      In Linux kernels before 2.6.12, only privileged
        (
      <code class="constant">
       CAP_SYS_NICE
      </code>
      ) threads can
        set a nonzero static priority (i.e., set a real-time
        scheduling policy). The only change that an unprivileged
        thread can make is to set the
      <code class="constant">
       SCHED_OTHER
      </code>
      policy, and this can be done
        only if the effective user ID of the caller matches the
        real or effective user ID of the target thread (i.e., the
        thread specified by
      <em class="replaceable">
       <code>
        pid
       </code>
      </em>
      ) whose policy is being
        changed.
     </p>
     <p>
      A thread must be privileged (
      <code class="constant">
       CAP_SYS_NICE
      </code>
      ) in order to set or modify a
      <code class="constant">
       SCHED_DEADLINE
      </code>
      policy.
     </p>
     <p>
      Since Linux 2.6.12, the
      <code class="constant">
       RLIMIT_RTPRIO
      </code>
      resource limit defines a
        ceiling on an unprivileged thread's static priority for the
      <code class="constant">
       SCHED_RR
      </code>
      and
      <code class="constant">
       SCHED_FIFO
      </code>
      policies. The rules for
        changing scheduling policy and priority are as follows:
     </p>
     <div class="itemizedlist">
      <ul class="itemizedlist" style="list-style-type: disc;">
       <li class="listitem">
        <p>
         If an unprivileged thread has a nonzero
         <code class="constant">
          RLIMIT_RTPRIO
         </code>
         soft
              limit, then it can change its scheduling policy and
              priority, subject to the restriction that the
              priority cannot be set to a value higher than the
              maximum of its current priority and its
         <code class="constant">
          RLIMIT_RTPRIO
         </code>
         soft limit.
        </p>
       </li>
       <li class="listitem">
        <p>
         If the
         <code class="constant">
          RLIMIT_RTPRIO
         </code>
         soft limit is 0, then the only permitted changes are
              to lower the priority, or to switch to a
              non-real-time policy.
        </p>
       </li>
       <li class="listitem">
        <p>
         Subject to the same rules, another unprivileged
              thread can also make these changes, as long as the
              effective user ID of the thread making the change
              matches the real or effective user ID of the target
              thread.
        </p>
       </li>
       <li class="listitem">
        <p>
         Special rules apply for the
         <code class="constant">
          SCHED_IDLE
         </code>
         policy. In Linux kernels
              before 2.6.39, an unprivileged thread operating under
              this policy cannot change its policy, regardless of
              the value of its
         <code class="constant">
          RLIMIT_RTPRIO
         </code>
         resource limit. In
              Linux kernels since 2.6.39, an unprivileged thread
              can switch to either the
         <code class="constant">
          SCHED_BATCH
         </code>
         or the
         <code class="constant">
          SCHED_NORMAL
         </code>
         policy so long as its
              nice value falls within the range permitted by its
         <code class="constant">
          RLIMIT_NICE
         </code>
         resource
              limit (see
         <a class="link" href="../htmlman2/getrlimit.2.html" shape="rect" target="_top">
          <span class="citerefentry">
           <span class="refentrytitle">
            getrlimit
           </span>
           (2)
          </span>
         </a>
         ).
        </p>
       </li>
      </ul>
     </div>
     <p>
      Privileged (
      <code class="constant">
       CAP_SYS_NICE
      </code>
      )
        threads ignore the
      <code class="constant">
       RLIMIT_RTPRIO
      </code>
      limit; as with older
        kernels, they can make arbitrary changes to scheduling
        policy and priority. See
      <a class="link" href="../htmlman2/getrlimit.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         getrlimit
        </span>
        (2)
       </span>
      </a>
      for further
        information on
      <code class="constant">
       RLIMIT_RTPRIO
      </code>
      .
     </p>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect12" name="sched-7_sect12" shape="rect">
     </a>
     <h3>
      Limiting the CPU usage of real-time and deadline
        processes
     </h3>
     <p>
      A nonblocking infinite loop in a thread scheduled under
        the
      <code class="constant">
       SCHED_FIFO
      </code>
      ,
      <code class="constant">
       SCHED_RR
      </code>
      , or
      <code class="constant">
       SCHED_DEADLINE
      </code>
      policy will block all
        threads with lower priority forever. Prior to Linux 2.6.25,
        the only way of preventing a runaway real-time process from
        freezing the system was to run (at the console) a shell
        scheduled under a higher static priority than the tested
        application. This allows an emergency kill of tested
        real-time applications that do not block or terminate as
        expected.
     </p>
     <p>
      Since Linux 2.6.25, there are other techniques for
        dealing with runaway real-time and deadline processes. One
        of these is to use the
      <code class="constant">
       RLIMIT_RTTIME
      </code>
      resource limit to set a
        ceiling on the CPU time that a real-time process may
        consume. See
      <a class="link" href="../htmlman2/getrlimit.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         getrlimit
        </span>
        (2)
       </span>
      </a>
      for
        details.
     </p>
     <p>
      Since version 2.6.25, Linux also provides two
      <code class="filename">
       /proc
      </code>
      files that can be used
        to reserve a certain amount of CPU time to be used by
        non-real-time processes. Reserving some CPU time in this
        fashion allows some CPU time to be allocated to (say) a
        root shell that can be used to kill a runaway process. Both
        of these files specify time values in microseconds:
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <code class="filename">
          /proc/sys/kernel/sched_rt_period_us
         </code>
        </span>
       </dt>
       <dd>
        <p>
         This file specifies a scheduling period that is
              equivalent to 100% CPU bandwidth. The value in this
              file can range from 1 to
         <code class="constant">
          INT_MAX
         </code>
         , giving an operating range
              of 1 microsecond to around 35 minutes. The default
              value in this file is 1,000,000 (1 second).
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="filename">
          /proc/sys/kernel/sched_rt_runtime_us
         </code>
        </span>
       </dt>
       <dd>
        <p>
         The value in this file specifies how much of the
              "period" time can be used by all real-time and
              deadline scheduled processes on the system. The value
              in this file can range from &minus;1 to
         <code class="constant">
          INT_MAX
         </code>
         &minus;1. Specifying
              &minus;1 makes the runtime the same as the period;
              that is, no CPU time is set aside for non-real-time
              processes (which was the Linux behavior before kernel
              2.6.25). The default value in this file is 950,000
              (0.95 seconds), meaning that 5% of the CPU time is
              reserved for processes that don't run under a
              real-time or deadline scheduling policy.
        </p>
       </dd>
      </dl>
     </div>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect13" name="sched-7_sect13" shape="rect">
     </a>
     <h3>
      Response time
     </h3>
     <p>
      A blocked high priority thread waiting for I/O has a
        certain response time before it is scheduled again. The
        device driver writer can greatly reduce this response time
        by using a "slow interrupt" interrupt handler.
     </p>
    </div>
    <div class="refsect2">
     <a id="sched-7_sect14" name="sched-7_sect14" shape="rect">
     </a>
     <h3>
      Miscellaneous
     </h3>
     <p>
      Child processes inherit the scheduling policy and
        parameters across a
      <a class="link" href="../htmlman2/fork.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         fork
        </span>
        (2)
       </span>
      </a>
      . The scheduling
        policy and parameters are preserved across
      <a class="link" href="../htmlman2/execve.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         execve
        </span>
        (2)
       </span>
      </a>
      .
     </p>
     <p>
      Memory locking is usually needed for real-time processes
        to avoid paging delays; this can be done with
      <a class="link" href="../htmlman2/mlock.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         mlock
        </span>
        (2)
       </span>
      </a>
      or
      <a class="link" href="../htmlman2/mlock.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         mlockall
        </span>
        (2)
       </span>
      </a>
      .
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="sched-7_sect15" name="sched-7_sect15" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <p>
     Originally, Standard Linux was intended as a
      general-purpose operating system being able to handle
      background processes, interactive applications, and less
      demanding real-time applications (applications that need to
      usually meet timing deadlines). Although the Linux kernel 2.6
      allowed for kernel preemption and the newly introduced O(1)
      scheduler ensures that the time needed to schedule is fixed
      and deterministic irrespective of the number of active tasks,
      true real-time computing was not possible up to kernel
      version 2.6.17.
    </p>
    <div class="refsect2">
     <a id="sched-7_sect16" name="sched-7_sect16" shape="rect">
     </a>
     <h3>
      Real-time features in the mainline Linux kernel
     </h3>
     <p>
      From kernel version 2.6.18 onward, however, Linux is
        gradually becoming equipped with real-time capabilities,
        most of which are derived from the former
      <em class="replaceable">
       <code>
        realtime-preempt
       </code>
      </em>
      patches
        developed by Ingo Molnar, Thomas Gleixner, Steven Rostedt,
        and others. Until the patches have been completely merged
        into the mainline kernel (this is expected to be around
        kernel version 2.6.30), they must be installed to achieve
        the best real-time performance. These patches are
        named:
     </p>
     <div class="blockquote">
      <blockquote class="blockquote">
       <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
patch-<em class="replaceable"><code>kernelversion</code></em>-rt<em class="replaceable"><code>patchversion</code></em>
</pre>
       </div>
      </blockquote>
     </div>
     <p>
      and can be downloaded from
      <a class="literalurl" href="http://www.kernel.org/pub/linux/kernel/projects/rt/" shape="rect" target="_top">
       http://www.kernel.org/pub/linux/kernel/projects/rt/
      </a>
     </p>
     <p>
      Without the patches and prior to their full inclusion
        into the mainline kernel, the kernel configuration offers
        only the three preemption classes
      <code class="constant">
       CONFIG_PREEMPT_NONE
      </code>
      ,
      <code class="constant">
       CONFIG_PREEMPT_VOLUNTARY
      </code>
      , and
      <code class="constant">
       CONFIG_PREEMPT_DESKTOP
      </code>
      which
        respectively provide no, some, and considerable reduction
        of the worst-case scheduling latency.
     </p>
     <p>
      With the patches applied or after their full inclusion
        into the mainline kernel, the additional configuration item
      <code class="constant">
       CONFIG_PREEMPT_RT
      </code>
      becomes
        available. If this is selected, Linux is transformed into a
        regular real-time operating system. The FIFO and RR
        scheduling policies are then used to run a thread with true
        real-time priority and a minimum worst-case scheduling
        latency.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="sched-7_sect17" name="sched-7_sect17" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman1/chrt.1.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        chrt
       </span>
       (1)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/getpriority.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        getpriority
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/mlock.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        mlock
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/mlock.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        mlockall
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/mlock.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        munlock
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/mlock.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        munlockall
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/nice.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        nice
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/sched_get_priority_max.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_get_priority_max
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/sched_get_priority_max.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_get_priority_min
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/sched_setscheduler.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_getscheduler
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/sched_setaffinity.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_getaffinity
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/sched_setparam.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_getparam
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/sched_rr_get_interval.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_rr_get_interval
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/sched_setaffinity.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_setaffinity
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/sched_setscheduler.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_setscheduler
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/sched_setparam.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_setparam
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/sched_yield.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_yield
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/getpriority.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        setpriority
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/pthread_setaffinity_np.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        pthread_getaffinity_np
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/pthread_setaffinity_np.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        pthread_setaffinity_np
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman3/sched_getcpu.3.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        sched_getcpu
       </span>
       (3)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman7/capabilities.7.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        capabilities
       </span>
       (7)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman7/cpuset.7.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        cpuset
       </span>
       (7)
      </span>
     </a>
    </p>
    <p>
     <span class="emphasis">
      <em>
       Programming for the real world
      &minus; POSIX.4
      </em>
     </span>
     by Bill O. Gallmeister, O'Reilly
      &amp; Associates, Inc., ISBN 1-56592-074-0.
    </p>
    <p>
     The Linux kernel source files
     <code class="filename">
      Documentation/scheduler/sched-deadline.txt
     </code>
     ,
     <code class="filename">
      Documentation/scheduler/sched-rt-group.txt
     </code>
     ,
     <code class="filename">
      Documentation/scheduler/sched-design-CFS.txt
     </code>
     ,
      and
     <code class="filename">
      Documentation/scheduler/sched-nice-design.txt
     </code>
    </p>
   </div>
   <div class="colophon">
    <a id="sched-7_sect18" name="sched-7_sect18" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
