<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   rename(2) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="rename(2) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="rename.2" name="rename.2" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     rename, renameat, renameat2 &mdash; change the name or
      location of a file
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="funcsynopsis">
     <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;stdio.h&gt;
</pre>
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          rename
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         oldpath
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         newpath
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="informalexample">
     <pre class="programlisting" xml:space="preserve">

#include &lt;fcntl.h&gt;            /* Definition of AT_* constants */
#include &lt;stdio.h&gt;
</pre>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          renameat
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         olddirfd
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         oldpath
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         newdirfd
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         newpath
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="funcsynopsis">
     <table border="0" class="funcprototype-table" style="cellspacing: 0; cellpadding: 0;" summary="Function synopsis">
      <tr>
       <td colspan="1" rowspan="1">
        <code class="funcdef">
         int
         <strong>
          renameat2
         </strong>
         (
        </code>
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         olddirfd
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         oldpath
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        int
        <var class="pdparam">
         newdirfd
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        const char *
        <var class="pdparam">
         newpath
        </var>
        ,
       </td>
      </tr>
      <tr>
       <td colspan="1" rowspan="1">
        &nbsp;
       </td>
       <td colspan="1" rowspan="1">
        unsigned int
        <var class="pdparam">
         flags
        </var>
        <code>
         )
        </code>
        ;
       </td>
      </tr>
     </table>
     <div class="funcprototype-spacer">
      &nbsp;
     </div>
    </div>
    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
     <table border="0" summary="Note">
      <tr>
       <td align="center" colspan="1" rowspan="2" valign="top" width="25">
        <img alt="[Note]" src="../stylesheet/note.png"/>
       </td>
       <th align="left" colspan="1" rowspan="1">
        Note
       </th>
      </tr>
      <tr>
       <td align="left" colspan="1" rowspan="1" valign="top">
        <div class="featuretests">
         <table style="border-collapse: collapse;">
          <colgroup span="1">
           <col span="1">
           </col>
          </colgroup>
          <thead>
           <tr>
            <th colspan="1" rowspan="1" style="">
             Feature Test Macro Requirements
                      for glibc (see
             <a class="link" href="../htmlman7/feature_test_macros.7.html" shape="rect" target="_top">
              <span class="citerefentry">
               <span class="refentrytitle">
                feature_test_macros
               </span>
               (7)
              </span>
             </a>
             ):
            </th>
           </tr>
          </thead>
          <tbody>
           <tr>
            <td colspan="1" rowspan="1" style="">
             <code class="function">
              renameat
             </code>
             ():
            </td>
           </tr>
           <tr>
            <td class="featuretestver" colspan="1" rowspan="1" style="">
             Since
                      glibc 2.10:
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _XOPEN_SOURCE
             </code>
             &gt;= 700 ||
             <code class="constant">
              _POSIX_C_SOURCE
             </code>
             &gt;=
                      200809L
            </td>
           </tr>
           <tr>
            <td class="featuretestver" colspan="1" rowspan="1" style="">
             Before
                      glibc 2.10:
            </td>
           </tr>
           <tr>
            <td class="featuretestdef" colspan="1" rowspan="1" style="">
             <code class="constant">
              _ATFILE_SOURCE
             </code>
            </td>
           </tr>
          </tbody>
         </table>
        </div>
       </td>
      </tr>
     </table>
    </div>
   </div>
   <div class="refsect1">
    <a id="rename-2_sect1" name="rename-2_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     <code class="function">
      rename
     </code>
     () renames a file,
      moving it between directories if required. Any other hard
      links to the file (as created using
     <a class="link" href="../htmlman2/link.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        link
       </span>
       (2)
      </span>
     </a>
     ) are unaffected.
      Open file descriptors for
     <em class="parameter">
      <code>
       oldpath
      </code>
     </em>
     are also
      unaffected.
    </p>
    <p>
     If
     <em class="parameter">
      <code>
       newpath
      </code>
     </em>
     already
      exists, it will be atomically replaced (subject to a few
      conditions; see ERRORS below), so that there is no point at
      which another process attempting to access
     <em class="parameter">
      <code>
       newpath
      </code>
     </em>
     will find it
      missing.
    </p>
    <p>
     If
     <em class="parameter">
      <code>
       oldpath
      </code>
     </em>
     and
     <em class="parameter">
      <code>
       newpath
      </code>
     </em>
     are existing
      hard links referring to the same file, then
     <code class="function">
      rename
     </code>
     () does nothing, and returns a
      success status.
    </p>
    <p>
     If
     <em class="parameter">
      <code>
       newpath
      </code>
     </em>
     exists
      but the operation fails for some reason,
     <code class="function">
      rename
     </code>
     () guarantees to leave an instance of
     <em class="parameter">
      <code>
       newpath
      </code>
     </em>
     in place.
    </p>
    <p>
     <em class="parameter">
      <code>
       oldpath
      </code>
     </em>
     can
      specify a directory. In this case,
     <em class="parameter">
      <code>
       newpath
      </code>
     </em>
     must either not exist,
      or it must specify an empty directory.
    </p>
    <p>
     However, when overwriting there will probably be a window
      in which both
     <em class="parameter">
      <code>
       oldpath
      </code>
     </em>
     and
     <em class="parameter">
      <code>
       newpath
      </code>
     </em>
     refer to
      the file being renamed.
    </p>
    <p>
     If
     <em class="parameter">
      <code>
       oldpath
      </code>
     </em>
     refers
      to a symbolic link, the link is renamed; if
     <em class="parameter">
      <code>
       newpath
      </code>
     </em>
     refers to a symbolic
      link, the link will be overwritten.
    </p>
    <div class="refsect2">
     <a id="rename-2_sect2" name="rename-2_sect2" shape="rect">
     </a>
     <h3>
      renameat()
     </h3>
     <p>
      The
      <code class="function">
       renameat
      </code>
      () system call
        operates in exactly the same way as
      <code class="function">
       rename
      </code>
      (), except for the differences
        described here.
     </p>
     <p>
      If the pathname given in
      <em class="parameter">
       <code>
        oldpath
       </code>
      </em>
      is relative, then it
        is interpreted relative to the directory referred to by the
        file descriptor
      <em class="parameter">
       <code>
        olddirfd
       </code>
      </em>
      (rather than
        relative to the current working directory of the calling
        process, as is done by
      <code class="function">
       rename
      </code>
      () for a relative pathname).
     </p>
     <p>
      If
      <em class="parameter">
       <code>
        oldpath
       </code>
      </em>
      is
        relative and
      <em class="parameter">
       <code>
        olddirfd
       </code>
      </em>
      is the special value
      <code class="constant">
       AT_FDCWD
      </code>
      , then
      <em class="parameter">
       <code>
        oldpath
       </code>
      </em>
      is interpreted
        relative to the current working directory of the calling
        process (like
      <code class="function">
       rename
      </code>
      ()).
     </p>
     <p>
      If
      <em class="parameter">
       <code>
        oldpath
       </code>
      </em>
      is
        absolute, then
      <em class="parameter">
       <code>
        olddirfd
       </code>
      </em>
      is ignored.
     </p>
     <p>
      The interpretation of
      <em class="parameter">
       <code>
        newpath
       </code>
      </em>
      is as for
      <em class="parameter">
       <code>
        oldpath
       </code>
      </em>
      , except that a
        relative pathname is interpreted relative to the directory
        referred to by the file descriptor
      <em class="parameter">
       <code>
        newdirfd
       </code>
      </em>
      .
     </p>
     <p>
      See
      <a class="link" href="../htmlman2/open.2.html" shape="rect" target="_top">
       <span class="citerefentry">
        <span class="refentrytitle">
         openat
        </span>
        (2)
       </span>
      </a>
      for an
        explanation of the need for
      <code class="function">
       renameat
      </code>
      ().
     </p>
    </div>
    <div class="refsect2">
     <a id="rename-2_sect3" name="rename-2_sect3" shape="rect">
     </a>
     <h3>
      renameat2()
     </h3>
     <p>
      <code class="function">
       renameat2
      </code>
      () has an
        additional
      <em class="parameter">
       <code>
        flags
       </code>
      </em>
      argument. A
      <code class="function">
       renameat2
      </code>
      () call
        with a zero
      <em class="parameter">
       <code>
        flags
       </code>
      </em>
      argument is equivalent to
      <code class="function">
       renameat
      </code>
      ().
     </p>
     <p>
      The
      <em class="parameter">
       <code>
        flags
       </code>
      </em>
      argument is a bit mask consisting of zero or more of the
        following flags:
     </p>
     <div class="variablelist">
      <dl class="variablelist">
       <dt>
        <span class="term">
         <code class="constant">
          RENAME_NOREPLACE
         </code>
        </span>
       </dt>
       <dd>
        <p>
         Don't overwrite
         <em class="parameter">
          <code>
           newpath
          </code>
         </em>
         . of the rename.
              Return an error if
         <em class="parameter">
          <code>
           newpath
          </code>
         </em>
         already
              exists.
        </p>
       </dd>
       <dt>
        <span class="term">
         <code class="constant">
          RENAME_EXCHANGE
         </code>
        </span>
       </dt>
       <dd>
        <p>
         Atomically exchange
         <em class="parameter">
          <code>
           oldpath
          </code>
         </em>
         and
         <em class="parameter">
          <code>
           newpath
          </code>
         </em>
         . Both pathnames
              must exist but may be of different types (e.g., one
              could be a non-empty directory and the other a
              symbolic link).
        </p>
       </dd>
      </dl>
     </div>
    </div>
   </div>
   <div class="refsect1">
    <a id="rename-2_sect4" name="rename-2_sect4" shape="rect">
    </a>
    <h2>
     RETURN VALUE
    </h2>
    <p>
     On success, zero is returned. On error, &minus;1 is
      returned, and
     <code class="varname">
      errno
     </code>
     is set
      appropriately.
    </p>
   </div>
   <div class="refsect1">
    <a id="rename-2_sect5" name="rename-2_sect5" shape="rect">
    </a>
    <h2>
     ERRORS
    </h2>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <span class="errorname">
         EACCES
        </span>
       </span>
      </dt>
      <dd>
       <p>
        Write permission is denied for the directory
            containing
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        or
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        , or, search
            permission is denied for one of the directories in the
            path prefix of
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        or
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        , or
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        is a directory
            and does not allow write permission (needed to update
            the
        <code class="filename">
         ..
        </code>
        entry). (See also
        <a class="link" href="../htmlman7/path_resolution.7.html" shape="rect" target="_top">
         <span class="citerefentry">
          <span class="refentrytitle">
           path_resolution
          </span>
          (7)
         </span>
        </a>
        .)
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EBUSY
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The rename fails because
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        or
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        is a directory
            that is in use by some process (perhaps as current
            working directory, or as root directory, or because it
            was open for reading) or is in use by the system (for
            example as mount point), while the system considers
            this an error. (Note that there is no requirement to
            return
        <span class="errorname">
         EBUSY
        </span>
        in such
            cases&mdash;there is nothing wrong with doing the
            rename anyway&mdash;but it is allowed to return
        <span class="errorname">
         EBUSY
        </span>
        if the system
            cannot otherwise handle such situations.)
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EDQUOT
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The user's quota of disk blocks on the filesystem
            has been exhausted.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EFAULT
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        or
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        points
            outside your accessible address space.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EINVAL
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The new pathname contained a path prefix of the old,
            or, more generally, an attempt was made to make a
            directory a subdirectory of itself.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EISDIR
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        is
            an existing directory, but
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        is not a
            directory.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ELOOP
        </span>
       </span>
      </dt>
      <dd>
       <p>
        Too many symbolic links were encountered in
            resolving
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        or
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        .
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EMLINK
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        already has the maximum number of links to it, or it
            was a directory and the directory containing
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        has the maximum
            number of links.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENAMETOOLONG
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        or
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        was too
            long.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENOENT
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The link named by
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        does not exist;
            or, a directory component in
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        does not exist;
            or,
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        or
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        is an
            empty string.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENOMEM
        </span>
       </span>
      </dt>
      <dd>
       <p>
        Insufficient kernel memory was available.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENOSPC
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The device containing the file has no room for the
            new directory entry.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENOTDIR
        </span>
       </span>
      </dt>
      <dd>
       <p>
        A component used as a directory in
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        or
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        is not, in fact,
            a directory. Or,
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        is a directory,
            and
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        exists but is not a directory.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENOTEMPTY
        </span>
        or
        <span class="errorname">
         EEXIST
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        is a
            nonempty directory, that is, contains entries other
            than "." and "..".
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EPERM
        </span>
        or
        <span class="errorname">
         EACCES
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The directory containing
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        has the sticky
            bit (
        <code class="constant">
         S_ISVTX
        </code>
        ) set and the
            process's effective user ID is neither the user ID of
            the file to be deleted nor that of the directory
            containing it, and the process is not privileged
            (Linux: does not have the
        <code class="constant">
         CAP_FOWNER
        </code>
        capability); or
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        is an existing
            file and the directory containing it has the sticky bit
            set and the process's effective user ID is neither the
            user ID of the file to be replaced nor that of the
            directory containing it, and the process is not
            privileged (Linux: does not have the
        <code class="constant">
         CAP_FOWNER
        </code>
        capability); or the
            filesystem containing
        <em class="replaceable">
         <code>
          pathname
         </code>
        </em>
        does not
            support renaming of the type requested.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EROFS
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The file is on a read-only filesystem.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EXDEV
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        and
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        are not
            on the same mounted filesystem. (Linux permits a
            filesystem to be mounted at multiple points, but
        <code class="function">
         rename
        </code>
        () does not work
            across different mount points, even if the same
            filesystem is mounted on both.)
       </p>
      </dd>
     </dl>
    </div>
    <p>
     The following additional errors can occur for
     <code class="function">
      renameat
     </code>
     () and
     <code class="function">
      renameat2
     </code>
     ():
    </p>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <span class="errorname">
         EBADF
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          olddirfd
         </code>
        </em>
        or
        <em class="parameter">
         <code>
          newdirfd
         </code>
        </em>
        is not
            a valid file descriptor.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENOTDIR
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          oldpath
         </code>
        </em>
        is
            relative and
        <em class="parameter">
         <code>
          olddirfd
         </code>
        </em>
        is a file
            descriptor referring to a file other than a directory;
            or similar for
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        and
        <em class="parameter">
         <code>
          newdirfd
         </code>
        </em>
       </p>
      </dd>
     </dl>
    </div>
    <p>
     The following additional errors can occur for
     <code class="function">
      renameat2
     </code>
     ():
    </p>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <span class="errorname">
         EEXIST
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          flags
         </code>
        </em>
        contains
        <code class="constant">
         RENAME_NOREPLACE
        </code>
        and
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        already exists.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EINVAL
        </span>
       </span>
      </dt>
      <dd>
       <p>
        An invalid flag was specified in
        <em class="parameter">
         <code>
          flags
         </code>
        </em>
        , or both
        <code class="constant">
         RENAME_NOREPLACE
        </code>
        and
        <code class="constant">
         RENAME_EXCHANGE
        </code>
        were
            specified.
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         EINVAL
        </span>
       </span>
      </dt>
      <dd>
       <p>
        The filesystem does not support one of the flags in
        <em class="parameter">
         <code>
          flags
         </code>
        </em>
        .
       </p>
      </dd>
      <dt>
       <span class="term">
        <span class="errorname">
         ENOENT
        </span>
       </span>
      </dt>
      <dd>
       <p>
        <em class="parameter">
         <code>
          flags
         </code>
        </em>
        contains
        <code class="constant">
         RENAME_EXCHANGE
        </code>
        and
        <em class="parameter">
         <code>
          newpath
         </code>
        </em>
        does not exist.
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="rename-2_sect6" name="rename-2_sect6" shape="rect">
    </a>
    <h2>
     VERSIONS
    </h2>
    <p>
     <code class="function">
      renameat
     </code>
     () was added to
      Linux in kernel 2.6.16; library support was added to glibc in
      version 2.4.
    </p>
    <p>
     <code class="function">
      renameat2
     </code>
     () was added to
      Linux in kernel 3.15.
    </p>
   </div>
   <div class="refsect1">
    <a id="rename-2_sect7" name="rename-2_sect7" shape="rect">
    </a>
    <h2>
     CONFORMING TO
    </h2>
    <p>
     <code class="function">
      rename
     </code>
     (): 4.3BSD, C89, C99,
      POSIX.1-2001, POSIX.1-2008.
    </p>
    <p>
     <code class="function">
      renameat
     </code>
     ():
      POSIX.1-2008.
    </p>
    <p>
     <code class="function">
      renameat2
     </code>
     () is
      Linux-specific.
    </p>
   </div>
   <div class="refsect1">
    <a id="rename-2_sect8" name="rename-2_sect8" shape="rect">
    </a>
    <h2>
     NOTES
    </h2>
    <div class="refsect2">
     <a id="rename-2_sect9" name="rename-2_sect9" shape="rect">
     </a>
     <h3>
      Glibc notes
     </h3>
     <p>
      On older kernels where
      <code class="function">
       renameat
      </code>
      () is unavailable, the glibc
        wrapper function falls back to the use of
      <code class="function">
       rename
      </code>
      (). When
      <em class="parameter">
       <code>
        oldpath
       </code>
      </em>
      and
      <em class="parameter">
       <code>
        newpath
       </code>
      </em>
      are relative
        pathnames, glibc constructs pathnames based on the symbolic
        links in
      <code class="filename">
       /proc/self/fd
      </code>
      that
        correspond to the
      <em class="parameter">
       <code>
        olddirfd
       </code>
      </em>
      and
      <em class="parameter">
       <code>
        newdirfd
       </code>
      </em>
      arguments.
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="rename-2_sect10" name="rename-2_sect10" shape="rect">
    </a>
    <h2>
     BUGS
    </h2>
    <p>
     On NFS filesystems, you can not assume that if the
      operation failed, the file was not renamed. If the server
      does the rename operation and then crashes, the retransmitted
      RPC which will be processed when the server is up again
      causes a failure. The application is expected to deal with
      this. See
     <a class="link" href="../htmlman2/link.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        link
       </span>
       (2)
      </span>
     </a>
     for a similar
      problem.
    </p>
   </div>
   <div class="refsect1">
    <a id="rename-2_sect11" name="rename-2_sect11" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman1/mv.1.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        mv
       </span>
       (1)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/chmod.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        chmod
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/link.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        link
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/symlink.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        symlink
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman2/unlink.2.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        unlink
       </span>
       (2)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman7/path_resolution.7.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        path_resolution
       </span>
       (7)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman7/symlink.7.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        symlink
       </span>
       (7)
      </span>
     </a>
    </p>
   </div>
   <div class="colophon">
    <a id="rename-2_sect12" name="rename-2_sect12" shape="rect">
    </a>
    <h2>
     COLOPHON
    </h2>
    <p>
     This page is part of release 3.72 of the Linux
     <em class="replaceable">
      <code>
       man-pages
      </code>
     </em>
     project. A
      description of the project, information about reporting bugs,
      and the latest version of this page, can be found at
      http://www.kernel.org/doc/man&minus;pages/.
    </p>
   </div>
  </div>
 </body>
</html>
