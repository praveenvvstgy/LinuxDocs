<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <title>
   runuser(1) &mdash; Linux manual pages
  </title>
  <link href="../stylesheet/manpages.css" rel="stylesheet" type="text/css"/>
  <link href="../index.html" rel="home" title="runuser(1) &mdash; Linux manual pages"/>
  <script src="../stylesheet/manpages.js" type="text/javascript" xml:space="preserve">
  </script>
  <link href="../stylesheet/icon.gif" rel="icon" type="image/gif"/>
 </head>
 <body>
  <div class="refentry">
   <a id="runuser.1" name="runuser.1" shape="rect">
   </a>
   <div class="titlepage">
   </div>
   <div class="refnamediv">
    <h2>
     Name
    </h2>
    <p>
     runuser &mdash; run a command with substitute user and
      group ID
    </p>
   </div>
   <div class="refsynopsisdiv">
    <h2>
     Synopsis
    </h2>
    <div class="cmdsynopsis">
     <p>
      <code class="command">
       runuser
      </code>
      [options]
      <code class="option">
       &minus;u
      </code>
      user command [
        argument... ]
     </p>
    </div>
    <div class="cmdsynopsis">
     <p>
      <code class="command">
       runuser
      </code>
      [options]
        [
      <code class="option">
       &minus;
      </code>
      ] [ user [ argument...
        ] ]
     </p>
    </div>
   </div>
   <div class="refsect1">
    <a id="runuser-1_sect1" name="runuser-1_sect1" shape="rect">
    </a>
    <h2>
     DESCRIPTION
    </h2>
    <p>
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     allows to run commands with substitute user and group ID. If
      the option
     <code class="option">
      &minus;u
     </code>
     not given,
      fallback to
     <span class="command">
      <strong>
       su
      </strong>
     </span>
     compatible semantic and shell is executed. The difference
      between the commands
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     and
     <span class="command">
      <strong>
       su
      </strong>
     </span>
     is that
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     does not ask for
      password (because it may be executed by root user only) and
      it uses a different PAM configuration. The command
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     does
      not have to be installed with suid permissions.
    </p>
    <p>
     When called without arguments
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     defaults to running
      an interactive shell as
     <span class="command">
      <strong>
       root
      </strong>
     </span>
     .
    </p>
    <p>
     For backward compatibility
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     defaults to not
      change the current directory and to only set the environment
      variables
     <code class="constant">
      HOME
     </code>
     and
     <code class="constant">
      SHELL
     </code>
     (plus
     <code class="constant">
      USER
     </code>
     and
     <code class="constant">
      LOGNAME
     </code>
     if the target
     <em class="parameter">
      <code>
       user
      </code>
     </em>
     is not root). This version
      of
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     uses
      PAM for session management.
    </p>
   </div>
   <div class="refsect1">
    <a id="runuser-1_sect2" name="runuser-1_sect2" shape="rect">
    </a>
    <h2>
     OPTIONS
    </h2>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <code class="option">
         &minus;c
        </code>
        <em class="parameter">
         <code>
          command
         </code>
        </em>
        ,
        <code class="option">
         &minus;&minus;command
        </code>
        =
        <em class="parameter">
         <code>
          command
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        Pass
        <em class="parameter">
         <code>
          command
         </code>
        </em>
        to the shell with the
        <code class="option">
         &minus;c
        </code>
        option.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="option">
         &minus;&minus;session&minus;command
        </code>
        =
        <em class="parameter">
         <code>
          command
         </code>
        </em>
       </span>
      </dt>
      <dd>
       <p>
        Same as
        <code class="option">
         &minus;c
        </code>
        but do
            not create a new session (discouraged).
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="option">
         &minus;f
        </code>
        ,
        <code class="option">
         &minus;&minus;fast
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Pass
        <code class="option">
         &minus;f
        </code>
        to the
            shell which may or may not be useful depending on the
            shell.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="option">
         &minus;g
        </code>
        ,
        <code class="option">
         &minus;&minus;group
        </code>
        =
        <span class="command">
         <strong>
          group
         </strong>
        </span>
       </span>
      </dt>
      <dd>
       <p>
        specify the primary group, this option is allowed
            for root user only
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="option">
         &minus;G
        </code>
        ,
        <code class="option">
         &minus;&minus;supp&minus;group
        </code>
        =
        <span class="command">
         <strong>
          group
         </strong>
        </span>
       </span>
      </dt>
      <dd>
       <p>
        specify a supplemental group, this option is allowed
            for root user only
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="option">
         &minus;
        </code>
        ,
        <code class="option">
         &minus;l
        </code>
        ,
        <code class="option">
         &minus;&minus;login
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Starts the shell as login shell with an environment
            similar to a real login:
       </p>
       <div class="blockquote">
        <blockquote class="blockquote">
         <div class="variablelist">
          <dl class="variablelist">
           <dt>
            <span class="term">
             <code class="literal">
              o
             </code>
            </span>
           </dt>
           <dd>
            <p>
             clears all environment variables except
                      for
             <code class="constant">
              TERM
             </code>
            </p>
           </dd>
           <dt>
            <span class="term">
             <code class="literal">
              o
             </code>
            </span>
           </dt>
           <dd>
            <p>
             initializes the environment variables
             <code class="constant">
              HOME
             </code>
             ,
             <code class="constant">
              SHELL
             </code>
             ,
             <code class="constant">
              USER
             </code>
             ,
             <code class="constant">
              LOGNAME
             </code>
             ,
             <code class="constant">
              PATH
             </code>
            </p>
           </dd>
           <dt>
            <span class="term">
             <code class="literal">
              o
             </code>
            </span>
           </dt>
           <dd>
            <p>
             changes to the target user's home
                      directory
            </p>
           </dd>
           <dt>
            <span class="term">
             <code class="literal">
              o
             </code>
            </span>
           </dt>
           <dd>
            <p>
             sets argv[0] of the shell to '
             <code class="option">
              &minus;
             </code>
             ' in order to make the
                      shell a login shell
            </p>
           </dd>
          </dl>
         </div>
        </blockquote>
       </div>
      </dd>
      <dt>
       <span class="term">
        <code class="option">
         &minus;m
        </code>
        ,
        <code class="option">
         &minus;p
        </code>
        ,
        <code class="option">
         &minus;&minus;preserve&minus;environment
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Preserves the whole environment, ie does not set
        <code class="constant">
         HOME
        </code>
        ,
        <code class="constant">
         SHELL
        </code>
        ,
        <code class="constant">
         USER
        </code>
        nor
        <code class="constant">
         LOGNAME
        </code>
        . The option is ignored if the
            option
        <code class="option">
         &minus;&minus;login
        </code>
        is specified.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="option">
         &minus;s
        </code>
        <code class="constant">
         SHELL
        </code>
        ,
        <code class="option">
         &minus;&minus;shell
        </code>
        =
        <code class="constant">
         SHELL
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Runs the specified shell instead of the default. The
            shell to run is selected according to the following
            rules in order:
       </p>
       <div class="blockquote">
        <blockquote class="blockquote">
         <div class="variablelist">
          <dl class="variablelist">
           <dt>
            <span class="term">
             <code class="literal">
              o
             </code>
            </span>
           </dt>
           <dd>
            <p>
             the shell specified with
             <code class="option">
              &minus;&minus;shell
             </code>
            </p>
           </dd>
           <dt>
            <span class="term">
             <code class="literal">
              o
             </code>
            </span>
           </dt>
           <dd>
            <p>
             The shell specified in the environment
                      variable
             <code class="constant">
              SHELL
             </code>
             if the
             <code class="option">
              &minus;&minus;preserve&minus;environment
             </code>
             option is used.
            </p>
           </dd>
           <dt>
            <span class="term">
             <code class="literal">
              o
             </code>
            </span>
           </dt>
           <dd>
            <p>
             the shell listed in the passwd entry of
                      the target user
            </p>
           </dd>
           <dt>
            <span class="term">
             <code class="literal">
              o
             </code>
            </span>
           </dt>
           <dd>
            <p>
             /bin/sh
            </p>
           </dd>
          </dl>
         </div>
        </blockquote>
       </div>
       <p>
        If the target user has a restricted shell (i.e. not
            listed in /etc/shells) the
        <code class="option">
         &minus;&minus;shell
        </code>
        option and the
        <code class="constant">
         SHELL
        </code>
        environment
            variables are ignored unless the calling user is
            root.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="option">
         &minus;&minus;help
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Display help text and exit.
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="option">
         &minus;&minus;version
        </code>
       </span>
      </dt>
      <dd>
       <p>
        Display version information and exit.
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="runuser-1_sect3" name="runuser-1_sect3" shape="rect">
    </a>
    <h2>
     CONFIG FILES
    </h2>
    <p>
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     reads the
     <code class="filename">
      /etc/default/runuser
     </code>
     and
     <code class="filename">
      /etc/login.defs
     </code>
     configuration files. The following configuration items are
      relevant for
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     :
    </p>
    <p>
     <code class="constant">
      ENV_PATH
     </code>
     (string)
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <p>
       Defines the PATH environment variable for a regular
          user. The default value is
       <code class="filename">
        /usr/local/bin:/bin:/usr/bin
       </code>
       .
      </p>
     </blockquote>
    </div>
    <p>
     <code class="constant">
      ENV_ROOTPATH
     </code>
     (string)
    </p>
    <p>
     <code class="constant">
      ENV_SUPATH
     </code>
     (string)
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <p>
       Defines the PATH environment variable for root. The
          default value is
       <code class="filename">
        /usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
       </code>
       .
      </p>
     </blockquote>
    </div>
    <p>
     <code class="constant">
      ALWAYS_SET_PATH
     </code>
     (boolean)
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <p>
       If set to
       <span class="command">
        <strong>
         yes
        </strong>
       </span>
       and
          &minus;&minus;login and
          &minus;&minus;preserve&minus;environment were not
          specified
       <span class="command">
        <strong>
         runuser
        </strong>
       </span>
       initializes
       <code class="constant">
        PATH
       </code>
       .
      </p>
     </blockquote>
    </div>
   </div>
   <div class="refsect1">
    <a id="runuser-1_sect4" name="runuser-1_sect4" shape="rect">
    </a>
    <h2>
     EXIT STATUS
    </h2>
    <p>
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     normally returns the exit status of the command it executed.
      If the command was killed by a signal,
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     returns the number
      of the signal plus 128.
    </p>
    <p>
     Exit status generated by
     <span class="command">
      <strong>
       runuser
      </strong>
     </span>
     itself:
    </p>
    <div class="blockquote">
     <blockquote class="blockquote">
      <div class="variablelist">
       <dl class="variablelist">
        <dt>
         <span class="term">
          <code class="constant">
           1
          </code>
         </span>
        </dt>
        <dd>
         <p>
          Generic error before executing the requested
                command
         </p>
        </dd>
        <dt>
         <span class="term">
          <code class="constant">
           126
          </code>
         </span>
        </dt>
        <dd>
         <p>
          The requested command could not be executed
         </p>
        </dd>
        <dt>
         <span class="term">
          <code class="constant">
           127
          </code>
         </span>
        </dt>
        <dd>
         <p>
          The requested command could was not found
         </p>
        </dd>
       </dl>
      </div>
     </blockquote>
    </div>
   </div>
   <div class="refsect1">
    <a id="runuser-1_sect5" name="runuser-1_sect5" shape="rect">
    </a>
    <h2>
     FILES
    </h2>
    <div class="variablelist">
     <dl class="variablelist">
      <dt>
       <span class="term">
        <code class="filename">
         /etc/pam.d/runuser
        </code>
       </span>
      </dt>
      <dd>
       <p>
        default PAM configuration file
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="filename">
         /etc/pam.d/runuser-l
        </code>
       </span>
      </dt>
      <dd>
       <p>
        PAM configuration file if &minus;&minus;login is
            specified
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="filename">
         /etc/default/runuser
        </code>
       </span>
      </dt>
      <dd>
       <p>
        runuser specific logindef config file
       </p>
      </dd>
      <dt>
       <span class="term">
        <code class="filename">
         /etc/login.defs
        </code>
       </span>
      </dt>
      <dd>
       <p>
        global logindef config file
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="refsect1">
    <a id="runuser-1_sect6" name="runuser-1_sect6" shape="rect">
    </a>
    <h2>
     SEE ALSO
    </h2>
    <p>
     <a class="link" href="../htmlman8/pam.8.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        pam
       </span>
       (8)
      </span>
     </a>
     ,
     <a class="link" href="../htmlman5/shells.5.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        shells
       </span>
       (5)
      </span>
     </a>
     ,
     <span class="citerefentry">
      <span class="refentrytitle">
       login.defs
      </span>
      (5)
     </span>
     ,
     <a class="link" href="../htmlman1/su.1.html" shape="rect" target="_top">
      <span class="citerefentry">
       <span class="refentrytitle">
        su
       </span>
       (1)
      </span>
     </a>
    </p>
   </div>
   <div class="refsect1">
    <a id="runuser-1_sect7" name="runuser-1_sect7" shape="rect">
    </a>
    <h2>
     AUTHOR
    </h2>
    <p>
     Derived from coreutils' su which was based on an
      implemenation from David MacKenzie and Fedora runuser command
      from Dan Walsh.
    </p>
   </div>
   <div class="refsect1">
    <a id="runuser-1_sect8" name="runuser-1_sect8" shape="rect">
    </a>
    <h2>
     AVAILABILITY
    </h2>
    <p>
     The runuser command is part of the util-linux package and
      is available from
     <a class="literalurl" href="ftp://ftp.kernel.org/pub/linux/utils/util-linux/" shape="rect" target="_top">
      Linux Kernel Archive
     </a>
    </p>
   </div>
  </div>
 </body>
</html>
